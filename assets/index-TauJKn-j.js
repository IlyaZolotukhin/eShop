var CB=Object.defineProperty;var RB=(t,e,n)=>e in t?CB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xB=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var u0=(t,e,n)=>(RB(t,typeof e!="symbol"?e+"":e,n),n);var vve=xB((Ar,Pr)=>{function AB(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function S_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function PB(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var sO={exports:{}},C_={},oO={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=Symbol.for("react.element"),kB=Symbol.for("react.portal"),NB=Symbol.for("react.fragment"),OB=Symbol.for("react.strict_mode"),DB=Symbol.for("react.profiler"),MB=Symbol.for("react.provider"),LB=Symbol.for("react.context"),$B=Symbol.for("react.forward_ref"),FB=Symbol.for("react.suspense"),VB=Symbol.for("react.memo"),UB=Symbol.for("react.lazy"),sR=Symbol.iterator;function jB(t){return t===null||typeof t!="object"?null:(t=sR&&t[sR]||t["@@iterator"],typeof t=="function"?t:null)}var aO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lO=Object.assign,uO={};function _c(t,e,n){this.props=t,this.context=e,this.refs=uO,this.updater=n||aO}_c.prototype.isReactComponent={};_c.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_c.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cO(){}cO.prototype=_c.prototype;function pT(t,e,n){this.props=t,this.context=e,this.refs=uO,this.updater=n||aO}var mT=pT.prototype=new cO;mT.constructor=pT;lO(mT,_c.prototype);mT.isPureReactComponent=!0;var oR=Array.isArray,dO=Object.prototype.hasOwnProperty,gT={current:null},hO={key:!0,ref:!0,__self:!0,__source:!0};function fO(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)dO.call(e,r)&&!hO.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Af,type:t,key:s,ref:o,props:i,_owner:gT.current}}function BB(t,e){return{$$typeof:Af,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _T(t){return typeof t=="object"&&t!==null&&t.$$typeof===Af}function zB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var aR=/\/+/g;function c0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zB(""+t.key):e.toString(36)}function mm(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Af:case kB:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+c0(o,0):r,oR(i)?(n="",t!=null&&(n=t.replace(aR,"$&/")+"/"),mm(i,e,n,"",function(u){return u})):i!=null&&(_T(i)&&(i=BB(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(aR,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",oR(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+c0(s,a);o+=mm(s,e,n,l,i)}else if(l=jB(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+c0(s,a++),o+=mm(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rp(t,e,n){if(t==null)return t;var r=[],i=0;return mm(t,r,"","",function(s){return e.call(n,s,i++)}),r}function WB(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kn={current:null},gm={transition:null},qB={ReactCurrentDispatcher:Kn,ReactCurrentBatchConfig:gm,ReactCurrentOwner:gT};xe.Children={map:Rp,forEach:function(t,e,n){Rp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rp(t,function(){e++}),e},toArray:function(t){return Rp(t,function(e){return e})||[]},only:function(t){if(!_T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=_c;xe.Fragment=NB;xe.Profiler=DB;xe.PureComponent=pT;xe.StrictMode=OB;xe.Suspense=FB;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qB;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lO({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gT.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dO.call(e,l)&&!hO.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Af,type:t.type,key:i,ref:s,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:LB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MB,_context:t},t.Consumer=t};xe.createElement=fO;xe.createFactory=function(t){var e=fO.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:$B,render:t}};xe.isValidElement=_T;xe.lazy=function(t){return{$$typeof:UB,_payload:{_status:-1,_result:t},_init:WB}};xe.memo=function(t,e){return{$$typeof:VB,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=gm.transition;gm.transition={};try{t()}finally{gm.transition=e}};xe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};xe.useCallback=function(t,e){return Kn.current.useCallback(t,e)};xe.useContext=function(t){return Kn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return Kn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return Kn.current.useEffect(t,e)};xe.useId=function(){return Kn.current.useId()};xe.useImperativeHandle=function(t,e,n){return Kn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Kn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Kn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Kn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return Kn.current.useReducer(t,e,n)};xe.useRef=function(t){return Kn.current.useRef(t)};xe.useState=function(t){return Kn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Kn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Kn.current.useTransition()};xe.version="18.2.0";oO.exports=xe;var w=oO.exports;const sr=S_(w),Fu=AB({__proto__:null,default:sr},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HB=w,GB=Symbol.for("react.element"),KB=Symbol.for("react.fragment"),QB=Object.prototype.hasOwnProperty,YB=HB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XB={key:!0,ref:!0,__self:!0,__source:!0};function pO(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QB.call(e,r)&&!XB.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:GB,type:t,key:s,ref:o,props:i,_owner:YB.current}}C_.Fragment=KB;C_.jsx=pO;C_.jsxs=pO;sO.exports=C_;var I=sO.exports,mO={exports:{}},gO={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=w;function JB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ZB=typeof Object.is=="function"?Object.is:JB,e5=Pf.useSyncExternalStore,t5=Pf.useRef,n5=Pf.useEffect,r5=Pf.useMemo,i5=Pf.useDebugValue;gO.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=t5(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=r5(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return d=p}return d=f}if(p=d,ZB(c,f))return p;var g=r(f);return i!==void 0&&i(p,g)?p:(c=f,d=g)}var u=!1,c,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var a=e5(t,s[0],s[1]);return n5(function(){o.hasValue=!0,o.value=a},[a]),i5(a),a};mO.exports=gO;var s5=mO.exports,Sr="default"in Fu?sr:Fu,lR=Symbol.for("react-redux-context"),uR=typeof globalThis<"u"?globalThis:{};function o5(){if(!Sr.createContext)return{};const t=uR[lR]??(uR[lR]=new Map);let e=t.get(Sr.createContext);return e||(e=Sr.createContext(null),t.set(Sr.createContext,e)),e}var To=o5(),a5=()=>{throw new Error("uSES not initialized!")};function yT(t=To){return function(){return Sr.useContext(t)}}var _O=yT(),yO=a5,l5=t=>{yO=t},u5=(t,e)=>t===e;function c5(t=To){const e=t===To?_O:yT(t);return function(r,i={}){const{equalityFn:s=u5,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:d}=e();Sr.useRef(!0);const h=Sr.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),f=yO(l.addNestedSub,a.getState,u||a.getState,h,s);return Sr.useDebugValue(f),f}}var Ii=c5();function d5(t){t()}function h5(){let t=null,e=null;return{clear(){t=null,e=null},notify(){d5(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0,i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var cR={notify(){},get:()=>[]};function f5(t,e){let n,r=cR,i=0,s=!1;function o(g){c();const v=r.subscribe(g);let m=!1;return()=>{m||(m=!0,v(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return s}function c(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=h5())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=cR)}function h(){s||(s=!0,c())}function f(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>r};return p}var p5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m5=p5?Sr.useLayoutEffect:Sr.useEffect;function g5({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Sr.useMemo(()=>{const u=f5(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=Sr.useMemo(()=>t.getState(),[t]);m5(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=e||To;return Sr.createElement(l.Provider,{value:o},n)}var _5=g5;function vO(t=To){const e=t===To?_O:yT(t);return function(){const{store:r}=e();return r}}var y5=vO();function v5(t=To){const e=t===To?y5:vO(t);return function(){return e().dispatch}}var R_=v5();l5(s5.useSyncExternalStoreWithSelector);var wO={exports:{}},Fr={},EO={exports:{}},IO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,z){var X=N.length;N.push(z);e:for(;0<X;){var ve=X-1>>>1,he=N[ve];if(0<i(he,z))N[ve]=z,N[X]=he,X=ve;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var z=N[0],X=N.pop();if(X!==z){N[0]=X;e:for(var ve=0,he=N.length,Be=he>>>1;ve<Be;){var fe=2*(ve+1)-1,Pe=N[fe],ke=fe+1,yt=N[ke];if(0>i(Pe,X))ke<he&&0>i(yt,Pe)?(N[ve]=yt,N[ke]=X,ve=ke):(N[ve]=Pe,N[fe]=X,ve=fe);else if(ke<he&&0>i(yt,X))N[ve]=yt,N[ke]=X,ve=ke;else break e}}return z}function i(N,z){var X=N.sortIndex-z.sortIndex;return X!==0?X:N.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=N)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function E(N){if(g=!1,y(N),!p)if(n(l)!==null)p=!0,Y(b);else{var z=n(u);z!==null&&Z(E,z.startTime-N)}}function b(N,z){p=!1,g&&(g=!1,m(A),A=-1),f=!0;var X=h;try{for(y(z),d=n(l);d!==null&&(!(d.expirationTime>z)||N&&!L());){var ve=d.callback;if(typeof ve=="function"){d.callback=null,h=d.priorityLevel;var he=ve(d.expirationTime<=z);z=t.unstable_now(),typeof he=="function"?d.callback=he:d===n(l)&&r(l),y(z)}else r(l);d=n(l)}if(d!==null)var Be=!0;else{var fe=n(u);fe!==null&&Z(E,fe.startTime-z),Be=!1}return Be}finally{d=null,h=X,f=!1}}var C=!1,T=null,A=-1,M=5,P=-1;function L(){return!(t.unstable_now()-P<M)}function G(){if(T!==null){var N=t.unstable_now();P=N;var z=!0;try{z=T(!0,N)}finally{z?F():(C=!1,T=null)}}else C=!1}var F;if(typeof _=="function")F=function(){_(G)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,B=U.port2;U.port1.onmessage=G,F=function(){B.postMessage(null)}}else F=function(){v(G,0)};function Y(N){T=N,C||(C=!0,F())}function Z(N,z){A=v(function(){N(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Y(b))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var X=h;h=z;try{return N()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,z){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var X=h;h=N;try{return z()}finally{h=X}},t.unstable_scheduleCallback=function(N,z,X){var ve=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ve+X:ve):X=ve,N){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=X+he,N={id:c++,callback:z,priorityLevel:N,startTime:X,expirationTime:he,sortIndex:-1},X>ve?(N.sortIndex=X,e(u,N),n(l)===null&&N===n(u)&&(g?(m(A),A=-1):g=!0,Z(E,X-ve))):(N.sortIndex=he,e(l,N),p||f||(p=!0,Y(b))),N},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(N){var z=h;return function(){var X=h;h=z;try{return N.apply(this,arguments)}finally{h=X}}}})(IO);EO.exports=IO;var w5=EO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO=w,Or=w5;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bO=new Set,dh={};function gl(t,e){Vu(t,e),Vu(t+"Capture",e)}function Vu(t,e){for(dh[t]=e,t=0;t<e.length;t++)bO.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lw=Object.prototype.hasOwnProperty,E5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dR={},hR={};function I5(t){return Lw.call(hR,t)?!0:Lw.call(dR,t)?!1:E5.test(t)?hR[t]=!0:(dR[t]=!0,!1)}function T5(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b5(t,e,n,r){if(e===null||typeof e>"u"||T5(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bn[t]=new Qn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bn[e]=new Qn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bn[t]=new Qn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bn[t]=new Qn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bn[t]=new Qn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bn[t]=new Qn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bn[t]=new Qn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bn[t]=new Qn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bn[t]=new Qn(t,5,!1,t.toLowerCase(),null,!1,!1)});var vT=/[\-:]([a-z])/g;function wT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vT,wT);bn[e]=new Qn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vT,wT);bn[e]=new Qn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vT,wT);bn[e]=new Qn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bn[t]=new Qn(t,1,!1,t.toLowerCase(),null,!1,!1)});bn.xlinkHref=new Qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bn[t]=new Qn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ET(t,e,n,r){var i=bn.hasOwnProperty(e)?bn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b5(e,n,i,r)&&(n=null),r||i===null?I5(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Os=TO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xp=Symbol.for("react.element"),ru=Symbol.for("react.portal"),iu=Symbol.for("react.fragment"),IT=Symbol.for("react.strict_mode"),$w=Symbol.for("react.profiler"),SO=Symbol.for("react.provider"),CO=Symbol.for("react.context"),TT=Symbol.for("react.forward_ref"),Fw=Symbol.for("react.suspense"),Vw=Symbol.for("react.suspense_list"),bT=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),RO=Symbol.for("react.offscreen"),fR=Symbol.iterator;function Wc(t){return t===null||typeof t!="object"?null:(t=fR&&t[fR]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,d0;function Ed(t){if(d0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);d0=e&&e[1]||""}return`
`+d0+t}var h0=!1;function f0(t,e){if(!t||h0)return"";h0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{h0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ed(t):""}function S5(t){switch(t.tag){case 5:return Ed(t.type);case 16:return Ed("Lazy");case 13:return Ed("Suspense");case 19:return Ed("SuspenseList");case 0:case 2:case 15:return t=f0(t.type,!1),t;case 11:return t=f0(t.type.render,!1),t;case 1:return t=f0(t.type,!0),t;default:return""}}function Uw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case iu:return"Fragment";case ru:return"Portal";case $w:return"Profiler";case IT:return"StrictMode";case Fw:return"Suspense";case Vw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CO:return(t.displayName||"Context")+".Consumer";case SO:return(t._context.displayName||"Context")+".Provider";case TT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bT:return e=t.displayName||null,e!==null?e:Uw(t.type)||"Memo";case Qs:e=t._payload,t=t._init;try{return Uw(t(e))}catch{}}return null}function C5(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uw(e);case 8:return e===IT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function R5(t){var e=xO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ap(t){t._valueTracker||(t._valueTracker=R5(t))}function AO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ym(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jw(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PO(t,e){e=e.checked,e!=null&&ET(t,"checked",e,!1)}function Bw(t,e){PO(t,e);var n=bo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zw(t,e.type,n):e.hasOwnProperty("defaultValue")&&zw(t,e.type,bo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zw(t,e,n){(e!=="number"||Ym(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Id=Array.isArray;function vu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ww(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Id(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bo(n)}}function kO(t,e){var n=bo(e.value),r=bo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _R(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pp,OO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pp=Pp||document.createElement("div"),Pp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ld={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x5=["Webkit","ms","Moz","O"];Object.keys(Ld).forEach(function(t){x5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ld[e]=Ld[t]})});function DO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ld.hasOwnProperty(t)&&Ld[t]?(""+e).trim():e+"px"}function MO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=DO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var A5=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hw(t,e){if(e){if(A5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Gw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kw=null;function ST(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qw=null,wu=null,Eu=null;function yR(t){if(t=Of(t)){if(typeof Qw!="function")throw Error($(280));var e=t.stateNode;e&&(e=N_(e),Qw(t.stateNode,t.type,e))}}function LO(t){wu?Eu?Eu.push(t):Eu=[t]:wu=t}function $O(){if(wu){var t=wu,e=Eu;if(Eu=wu=null,yR(t),e)for(t=0;t<e.length;t++)yR(e[t])}}function FO(t,e){return t(e)}function VO(){}var p0=!1;function UO(t,e,n){if(p0)return t(e,n);p0=!0;try{return FO(t,e,n)}finally{p0=!1,(wu!==null||Eu!==null)&&(VO(),$O())}}function fh(t,e){var n=t.stateNode;if(n===null)return null;var r=N_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Yw=!1;if(Ts)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){Yw=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{Yw=!1}function P5(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var $d=!1,Xm=null,Jm=!1,Xw=null,k5={onError:function(t){$d=!0,Xm=t}};function N5(t,e,n,r,i,s,o,a,l){$d=!1,Xm=null,P5.apply(k5,arguments)}function O5(t,e,n,r,i,s,o,a,l){if(N5.apply(this,arguments),$d){if($d){var u=Xm;$d=!1,Xm=null}else throw Error($(198));Jm||(Jm=!0,Xw=u)}}function _l(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vR(t){if(_l(t)!==t)throw Error($(188))}function D5(t){var e=t.alternate;if(!e){if(e=_l(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vR(i),t;if(s===r)return vR(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function BO(t){return t=D5(t),t!==null?zO(t):null}function zO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zO(t);if(e!==null)return e;t=t.sibling}return null}var WO=Or.unstable_scheduleCallback,wR=Or.unstable_cancelCallback,M5=Or.unstable_shouldYield,L5=Or.unstable_requestPaint,Lt=Or.unstable_now,$5=Or.unstable_getCurrentPriorityLevel,CT=Or.unstable_ImmediatePriority,qO=Or.unstable_UserBlockingPriority,Zm=Or.unstable_NormalPriority,F5=Or.unstable_LowPriority,HO=Or.unstable_IdlePriority,x_=null,Gi=null;function V5(t){if(Gi&&typeof Gi.onCommitFiberRoot=="function")try{Gi.onCommitFiberRoot(x_,t,void 0,(t.current.flags&128)===128)}catch{}}var yi=Math.clz32?Math.clz32:B5,U5=Math.log,j5=Math.LN2;function B5(t){return t>>>=0,t===0?32:31-(U5(t)/j5|0)|0}var kp=64,Np=4194304;function Td(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Td(a):(s&=o,s!==0&&(r=Td(s)))}else o=n&~i,o!==0?r=Td(o):s!==0&&(r=Td(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yi(e),i=1<<n,r|=t[n],e&=~i;return r}function z5(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W5(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-yi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=z5(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Jw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function GO(){var t=kp;return kp<<=1,!(kp&4194240)&&(kp=64),t}function m0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yi(e),t[e]=n}function q5(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-yi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function RT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var He=0;function KO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QO,xT,YO,XO,JO,Zw=!1,Op=[],ao=null,lo=null,uo=null,ph=new Map,mh=new Map,Xs=[],H5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ER(t,e){switch(t){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":ph.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(e.pointerId)}}function Hc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Of(e),e!==null&&xT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function G5(t,e,n,r,i){switch(e){case"focusin":return ao=Hc(ao,t,e,n,r,i),!0;case"dragenter":return lo=Hc(lo,t,e,n,r,i),!0;case"mouseover":return uo=Hc(uo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ph.set(s,Hc(ph.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,mh.set(s,Hc(mh.get(s)||null,t,e,n,r,i)),!0}return!1}function ZO(t){var e=Ta(t.target);if(e!==null){var n=_l(e);if(n!==null){if(e=n.tag,e===13){if(e=jO(n),e!==null){t.blockedOn=e,JO(t.priority,function(){YO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _m(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kw=r,n.target.dispatchEvent(r),Kw=null}else return e=Of(n),e!==null&&xT(e),t.blockedOn=n,!1;e.shift()}return!0}function IR(t,e,n){_m(t)&&n.delete(e)}function K5(){Zw=!1,ao!==null&&_m(ao)&&(ao=null),lo!==null&&_m(lo)&&(lo=null),uo!==null&&_m(uo)&&(uo=null),ph.forEach(IR),mh.forEach(IR)}function Gc(t,e){t.blockedOn===e&&(t.blockedOn=null,Zw||(Zw=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,K5)))}function gh(t){function e(i){return Gc(i,t)}if(0<Op.length){Gc(Op[0],t);for(var n=1;n<Op.length;n++){var r=Op[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ao!==null&&Gc(ao,t),lo!==null&&Gc(lo,t),uo!==null&&Gc(uo,t),ph.forEach(e),mh.forEach(e),n=0;n<Xs.length;n++)r=Xs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xs.length&&(n=Xs[0],n.blockedOn===null);)ZO(n),n.blockedOn===null&&Xs.shift()}var Iu=Os.ReactCurrentBatchConfig,tg=!0;function Q5(t,e,n,r){var i=He,s=Iu.transition;Iu.transition=null;try{He=1,AT(t,e,n,r)}finally{He=i,Iu.transition=s}}function Y5(t,e,n,r){var i=He,s=Iu.transition;Iu.transition=null;try{He=4,AT(t,e,n,r)}finally{He=i,Iu.transition=s}}function AT(t,e,n,r){if(tg){var i=eE(t,e,n,r);if(i===null)S0(t,e,r,ng,n),ER(t,r);else if(G5(i,t,e,n,r))r.stopPropagation();else if(ER(t,r),e&4&&-1<H5.indexOf(t)){for(;i!==null;){var s=Of(i);if(s!==null&&QO(s),s=eE(t,e,n,r),s===null&&S0(t,e,r,ng,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else S0(t,e,r,null,n)}}var ng=null;function eE(t,e,n,r){if(ng=null,t=ST(r),t=Ta(t),t!==null)if(e=_l(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ng=t,null}function eD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($5()){case CT:return 1;case qO:return 4;case Zm:case F5:return 16;case HO:return 536870912;default:return 16}default:return 16}}var no=null,PT=null,ym=null;function tD(){if(ym)return ym;var t,e=PT,n=e.length,r,i="value"in no?no.value:no.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ym=i.slice(t,1<r?1-r:void 0)}function vm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dp(){return!0}function TR(){return!1}function Vr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dp:TR,this.isPropagationStopped=TR,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dp)},persist:function(){},isPersistent:Dp}),e}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kT=Vr(yc),Nf=It({},yc,{view:0,detail:0}),X5=Vr(Nf),g0,_0,Kc,A_=It({},Nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:NT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kc&&(Kc&&t.type==="mousemove"?(g0=t.screenX-Kc.screenX,_0=t.screenY-Kc.screenY):_0=g0=0,Kc=t),g0)},movementY:function(t){return"movementY"in t?t.movementY:_0}}),bR=Vr(A_),J5=It({},A_,{dataTransfer:0}),Z5=Vr(J5),ez=It({},Nf,{relatedTarget:0}),y0=Vr(ez),tz=It({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),nz=Vr(tz),rz=It({},yc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iz=Vr(rz),sz=It({},yc,{data:0}),SR=Vr(sz),oz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},az={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lz[t])?!!e[t]:!1}function NT(){return uz}var cz=It({},Nf,{key:function(t){if(t.key){var e=oz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?az[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:NT,charCode:function(t){return t.type==="keypress"?vm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dz=Vr(cz),hz=It({},A_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CR=Vr(hz),fz=It({},Nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:NT}),pz=Vr(fz),mz=It({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),gz=Vr(mz),_z=It({},A_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yz=Vr(_z),vz=[9,13,27,32],OT=Ts&&"CompositionEvent"in window,Fd=null;Ts&&"documentMode"in document&&(Fd=document.documentMode);var wz=Ts&&"TextEvent"in window&&!Fd,nD=Ts&&(!OT||Fd&&8<Fd&&11>=Fd),RR=" ",xR=!1;function rD(t,e){switch(t){case"keyup":return vz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var su=!1;function Ez(t,e){switch(t){case"compositionend":return iD(e);case"keypress":return e.which!==32?null:(xR=!0,RR);case"textInput":return t=e.data,t===RR&&xR?null:t;default:return null}}function Iz(t,e){if(su)return t==="compositionend"||!OT&&rD(t,e)?(t=tD(),ym=PT=no=null,su=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nD&&e.locale!=="ko"?null:e.data;default:return null}}var Tz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tz[t.type]:e==="textarea"}function sD(t,e,n,r){LO(r),e=rg(e,"onChange"),0<e.length&&(n=new kT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vd=null,_h=null;function bz(t){gD(t,0)}function P_(t){var e=lu(t);if(AO(e))return t}function Sz(t,e){if(t==="change")return e}var oD=!1;if(Ts){var v0;if(Ts){var w0="oninput"in document;if(!w0){var PR=document.createElement("div");PR.setAttribute("oninput","return;"),w0=typeof PR.oninput=="function"}v0=w0}else v0=!1;oD=v0&&(!document.documentMode||9<document.documentMode)}function kR(){Vd&&(Vd.detachEvent("onpropertychange",aD),_h=Vd=null)}function aD(t){if(t.propertyName==="value"&&P_(_h)){var e=[];sD(e,_h,t,ST(t)),UO(bz,e)}}function Cz(t,e,n){t==="focusin"?(kR(),Vd=e,_h=n,Vd.attachEvent("onpropertychange",aD)):t==="focusout"&&kR()}function Rz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return P_(_h)}function xz(t,e){if(t==="click")return P_(e)}function Az(t,e){if(t==="input"||t==="change")return P_(e)}function Pz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ti=typeof Object.is=="function"?Object.is:Pz;function yh(t,e){if(Ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lw.call(e,i)||!Ti(t[i],e[i]))return!1}return!0}function NR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function OR(t,e){var n=NR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NR(n)}}function lD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uD(){for(var t=window,e=Ym();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ym(t.document)}return e}function DT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kz(t){var e=uD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lD(n.ownerDocument.documentElement,n)){if(r!==null&&DT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=OR(n,s);var o=OR(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nz=Ts&&"documentMode"in document&&11>=document.documentMode,ou=null,tE=null,Ud=null,nE=!1;function DR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nE||ou==null||ou!==Ym(r)||(r=ou,"selectionStart"in r&&DT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ud&&yh(Ud,r)||(Ud=r,r=rg(tE,"onSelect"),0<r.length&&(e=new kT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ou)))}function Mp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var au={animationend:Mp("Animation","AnimationEnd"),animationiteration:Mp("Animation","AnimationIteration"),animationstart:Mp("Animation","AnimationStart"),transitionend:Mp("Transition","TransitionEnd")},E0={},cD={};Ts&&(cD=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function k_(t){if(E0[t])return E0[t];if(!au[t])return t;var e=au[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cD)return E0[t]=e[n];return t}var dD=k_("animationend"),hD=k_("animationiteration"),fD=k_("animationstart"),pD=k_("transitionend"),mD=new Map,MR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ho(t,e){mD.set(t,e),gl(e,[t])}for(var I0=0;I0<MR.length;I0++){var T0=MR[I0],Oz=T0.toLowerCase(),Dz=T0[0].toUpperCase()+T0.slice(1);Ho(Oz,"on"+Dz)}Ho(dD,"onAnimationEnd");Ho(hD,"onAnimationIteration");Ho(fD,"onAnimationStart");Ho("dblclick","onDoubleClick");Ho("focusin","onFocus");Ho("focusout","onBlur");Ho(pD,"onTransitionEnd");Vu("onMouseEnter",["mouseout","mouseover"]);Vu("onMouseLeave",["mouseout","mouseover"]);Vu("onPointerEnter",["pointerout","pointerover"]);Vu("onPointerLeave",["pointerout","pointerover"]);gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gl("onBeforeInput",["compositionend","keypress","textInput","paste"]);gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mz=new Set("cancel close invalid load scroll toggle".split(" ").concat(bd));function LR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,O5(r,e,void 0,t),t.currentTarget=null}function gD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;LR(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;LR(i,a,u),s=l}}}if(Jm)throw t=Xw,Jm=!1,Xw=null,t}function ot(t,e){var n=e[aE];n===void 0&&(n=e[aE]=new Set);var r=t+"__bubble";n.has(r)||(_D(e,t,2,!1),n.add(r))}function b0(t,e,n){var r=0;e&&(r|=4),_D(n,t,r,e)}var Lp="_reactListening"+Math.random().toString(36).slice(2);function vh(t){if(!t[Lp]){t[Lp]=!0,bO.forEach(function(n){n!=="selectionchange"&&(Mz.has(n)||b0(n,!1,t),b0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lp]||(e[Lp]=!0,b0("selectionchange",!1,e))}}function _D(t,e,n,r){switch(eD(e)){case 1:var i=Q5;break;case 4:i=Y5;break;default:i=AT}n=i.bind(null,e,n,t),i=void 0,!Yw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function S0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ta(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}UO(function(){var u=s,c=ST(n),d=[];e:{var h=mD.get(t);if(h!==void 0){var f=kT,p=t;switch(t){case"keypress":if(vm(n)===0)break e;case"keydown":case"keyup":f=dz;break;case"focusin":p="focus",f=y0;break;case"focusout":p="blur",f=y0;break;case"beforeblur":case"afterblur":f=y0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=bR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Z5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=pz;break;case dD:case hD:case fD:f=nz;break;case pD:f=gz;break;case"scroll":f=X5;break;case"wheel":f=yz;break;case"copy":case"cut":case"paste":f=iz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=CR}var g=(e&4)!==0,v=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var _=u,y;_!==null;){y=_;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,m!==null&&(E=fh(_,m),E!=null&&g.push(wh(_,E,y)))),v)break;_=_.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Kw&&(p=n.relatedTarget||n.fromElement)&&(Ta(p)||p[bs]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Ta(p):null,p!==null&&(v=_l(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=bR,E="onMouseLeave",m="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(g=CR,E="onPointerLeave",m="onPointerEnter",_="pointer"),v=f==null?h:lu(f),y=p==null?h:lu(p),h=new g(E,_+"leave",f,n,c),h.target=v,h.relatedTarget=y,E=null,Ta(c)===u&&(g=new g(m,_+"enter",p,n,c),g.target=y,g.relatedTarget=v,E=g),v=E,f&&p)t:{for(g=f,m=p,_=0,y=g;y;y=Ll(y))_++;for(y=0,E=m;E;E=Ll(E))y++;for(;0<_-y;)g=Ll(g),_--;for(;0<y-_;)m=Ll(m),y--;for(;_--;){if(g===m||m!==null&&g===m.alternate)break t;g=Ll(g),m=Ll(m)}g=null}else g=null;f!==null&&$R(d,h,f,g,!1),p!==null&&v!==null&&$R(d,v,p,g,!0)}}e:{if(h=u?lu(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var b=Sz;else if(AR(h))if(oD)b=Az;else{b=Rz;var C=Cz}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=xz);if(b&&(b=b(t,u))){sD(d,b,n,c);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&zw(h,"number",h.value)}switch(C=u?lu(u):window,t){case"focusin":(AR(C)||C.contentEditable==="true")&&(ou=C,tE=u,Ud=null);break;case"focusout":Ud=tE=ou=null;break;case"mousedown":nE=!0;break;case"contextmenu":case"mouseup":case"dragend":nE=!1,DR(d,n,c);break;case"selectionchange":if(Nz)break;case"keydown":case"keyup":DR(d,n,c)}var T;if(OT)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else su?rD(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(nD&&n.locale!=="ko"&&(su||A!=="onCompositionStart"?A==="onCompositionEnd"&&su&&(T=tD()):(no=c,PT="value"in no?no.value:no.textContent,su=!0)),C=rg(u,A),0<C.length&&(A=new SR(A,t,null,n,c),d.push({event:A,listeners:C}),T?A.data=T:(T=iD(n),T!==null&&(A.data=T)))),(T=wz?Ez(t,n):Iz(t,n))&&(u=rg(u,"onBeforeInput"),0<u.length&&(c=new SR("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}gD(d,e)})}function wh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fh(t,n),s!=null&&r.unshift(wh(t,s,i)),s=fh(t,e),s!=null&&r.push(wh(t,s,i))),t=t.return}return r}function Ll(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $R(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=fh(n,s),l!=null&&o.unshift(wh(n,l,a))):i||(l=fh(n,s),l!=null&&o.push(wh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Lz=/\r\n?/g,$z=/\u0000|\uFFFD/g;function FR(t){return(typeof t=="string"?t:""+t).replace(Lz,`
`).replace($z,"")}function $p(t,e,n){if(e=FR(e),FR(t)!==e&&n)throw Error($(425))}function ig(){}var rE=null,iE=null;function sE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oE=typeof setTimeout=="function"?setTimeout:void 0,Fz=typeof clearTimeout=="function"?clearTimeout:void 0,VR=typeof Promise=="function"?Promise:void 0,Vz=typeof queueMicrotask=="function"?queueMicrotask:typeof VR<"u"?function(t){return VR.resolve(null).then(t).catch(Uz)}:oE;function Uz(t){setTimeout(function(){throw t})}function C0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),gh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);gh(e)}function co(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function UR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vc=Math.random().toString(36).slice(2),Di="__reactFiber$"+vc,Eh="__reactProps$"+vc,bs="__reactContainer$"+vc,aE="__reactEvents$"+vc,jz="__reactListeners$"+vc,Bz="__reactHandles$"+vc;function Ta(t){var e=t[Di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bs]||n[Di]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=UR(t);t!==null;){if(n=t[Di])return n;t=UR(t)}return e}t=n,n=t.parentNode}return null}function Of(t){return t=t[Di]||t[bs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function N_(t){return t[Eh]||null}var lE=[],uu=-1;function Go(t){return{current:t}}function dt(t){0>uu||(t.current=lE[uu],lE[uu]=null,uu--)}function nt(t,e){uu++,lE[uu]=t.current,t.current=e}var So={},Dn=Go(So),cr=Go(!1),Ha=So;function Uu(t,e){var n=t.type.contextTypes;if(!n)return So;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dr(t){return t=t.childContextTypes,t!=null}function sg(){dt(cr),dt(Dn)}function jR(t,e,n){if(Dn.current!==So)throw Error($(168));nt(Dn,e),nt(cr,n)}function yD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,C5(t)||"Unknown",i));return It({},n,r)}function og(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||So,Ha=Dn.current,nt(Dn,t),nt(cr,cr.current),!0}function BR(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=yD(t,e,Ha),r.__reactInternalMemoizedMergedChildContext=t,dt(cr),dt(Dn),nt(Dn,t)):dt(cr),nt(cr,n)}var us=null,O_=!1,R0=!1;function vD(t){us===null?us=[t]:us.push(t)}function zz(t){O_=!0,vD(t)}function Ko(){if(!R0&&us!==null){R0=!0;var t=0,e=He;try{var n=us;for(He=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}us=null,O_=!1}catch(i){throw us!==null&&(us=us.slice(t+1)),WO(CT,Ko),i}finally{He=e,R0=!1}}return null}var cu=[],du=0,ag=null,lg=0,zr=[],Wr=0,Ga=null,ds=1,hs="";function la(t,e){cu[du++]=lg,cu[du++]=ag,ag=t,lg=e}function wD(t,e,n){zr[Wr++]=ds,zr[Wr++]=hs,zr[Wr++]=Ga,Ga=t;var r=ds;t=hs;var i=32-yi(r)-1;r&=~(1<<i),n+=1;var s=32-yi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ds=1<<32-yi(e)+i|n<<i|r,hs=s+t}else ds=1<<s|n<<i|r,hs=t}function MT(t){t.return!==null&&(la(t,1),wD(t,1,0))}function LT(t){for(;t===ag;)ag=cu[--du],cu[du]=null,lg=cu[--du],cu[du]=null;for(;t===Ga;)Ga=zr[--Wr],zr[Wr]=null,hs=zr[--Wr],zr[Wr]=null,ds=zr[--Wr],zr[Wr]=null}var kr=null,Cr=null,pt=!1,hi=null;function ED(t,e){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Cr=co(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ga!==null?{id:ds,overflow:hs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kr=t,Cr=null,!0):!1;default:return!1}}function uE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cE(t){if(pt){var e=Cr;if(e){var n=e;if(!zR(t,e)){if(uE(t))throw Error($(418));e=co(n.nextSibling);var r=kr;e&&zR(t,e)?ED(r,n):(t.flags=t.flags&-4097|2,pt=!1,kr=t)}}else{if(uE(t))throw Error($(418));t.flags=t.flags&-4097|2,pt=!1,kr=t}}}function WR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function Fp(t){if(t!==kr)return!1;if(!pt)return WR(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sE(t.type,t.memoizedProps)),e&&(e=Cr)){if(uE(t))throw ID(),Error($(418));for(;e;)ED(t,e),e=co(e.nextSibling)}if(WR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cr=co(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=kr?co(t.stateNode.nextSibling):null;return!0}function ID(){for(var t=Cr;t;)t=co(t.nextSibling)}function ju(){Cr=kr=null,pt=!1}function $T(t){hi===null?hi=[t]:hi.push(t)}var Wz=Os.ReactCurrentBatchConfig;function ci(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ug=Go(null),cg=null,hu=null,FT=null;function VT(){FT=hu=cg=null}function UT(t){var e=ug.current;dt(ug),t._currentValue=e}function dE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tu(t,e){cg=t,FT=hu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(or=!0),t.firstContext=null)}function Jr(t){var e=t._currentValue;if(FT!==t)if(t={context:t,memoizedValue:e,next:null},hu===null){if(cg===null)throw Error($(308));hu=t,cg.dependencies={lanes:0,firstContext:t}}else hu=hu.next=t;return e}var ba=null;function jT(t){ba===null?ba=[t]:ba.push(t)}function TD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jT(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ss(t,r)}function Ss(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ys=!1;function BT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ho(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ss(t,n)}return i=r.interleaved,i===null?(e.next=e,jT(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ss(t,n)}function wm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,RT(t,n)}}function qR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dg(t,e,n,r){var i=t.updateQueue;Ys=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=It({},d,h);break e;case 2:Ys=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qa|=o,t.lanes=o,t.memoizedState=d}}function HR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var SD=new TO.Component().refs;function hE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var D_={isMounted:function(t){return(t=t._reactInternals)?_l(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zn(),i=po(t),s=_s(r,i);s.payload=e,n!=null&&(s.callback=n),e=ho(t,s,i),e!==null&&(vi(e,t,i,r),wm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zn(),i=po(t),s=_s(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ho(t,s,i),e!==null&&(vi(e,t,i,r),wm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zn(),r=po(t),i=_s(n,r);i.tag=2,e!=null&&(i.callback=e),e=ho(t,i,r),e!==null&&(vi(e,t,r,n),wm(e,t,r))}};function GR(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!yh(n,r)||!yh(i,s):!0}function CD(t,e,n){var r=!1,i=So,s=e.contextType;return typeof s=="object"&&s!==null?s=Jr(s):(i=dr(e)?Ha:Dn.current,r=e.contextTypes,s=(r=r!=null)?Uu(t,i):So),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=D_,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function KR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&D_.enqueueReplaceState(e,e.state,null)}function fE(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=SD,BT(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jr(s):(s=dr(e)?Ha:Dn.current,i.context=Uu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hE(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&D_.enqueueReplaceState(i,i.state,null),dg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===SD&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Vp(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function QR(t){var e=t._init;return e(t._payload)}function RD(t){function e(m,_){if(t){var y=m.deletions;y===null?(m.deletions=[_],m.flags|=16):y.push(_)}}function n(m,_){if(!t)return null;for(;_!==null;)e(m,_),_=_.sibling;return null}function r(m,_){for(m=new Map;_!==null;)_.key!==null?m.set(_.key,_):m.set(_.index,_),_=_.sibling;return m}function i(m,_){return m=mo(m,_),m.index=0,m.sibling=null,m}function s(m,_,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<_?(m.flags|=2,_):y):(m.flags|=2,_)):(m.flags|=1048576,_)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,_,y,E){return _===null||_.tag!==6?(_=D0(y,m.mode,E),_.return=m,_):(_=i(_,y),_.return=m,_)}function l(m,_,y,E){var b=y.type;return b===iu?c(m,_,y.props.children,E,y.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Qs&&QR(b)===_.type)?(E=i(_,y.props),E.ref=Qc(m,_,y),E.return=m,E):(E=Cm(y.type,y.key,y.props,null,m.mode,E),E.ref=Qc(m,_,y),E.return=m,E)}function u(m,_,y,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==y.containerInfo||_.stateNode.implementation!==y.implementation?(_=M0(y,m.mode,E),_.return=m,_):(_=i(_,y.children||[]),_.return=m,_)}function c(m,_,y,E,b){return _===null||_.tag!==7?(_=$a(y,m.mode,E,b),_.return=m,_):(_=i(_,y),_.return=m,_)}function d(m,_,y){if(typeof _=="string"&&_!==""||typeof _=="number")return _=D0(""+_,m.mode,y),_.return=m,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xp:return y=Cm(_.type,_.key,_.props,null,m.mode,y),y.ref=Qc(m,null,_),y.return=m,y;case ru:return _=M0(_,m.mode,y),_.return=m,_;case Qs:var E=_._init;return d(m,E(_._payload),y)}if(Id(_)||Wc(_))return _=$a(_,m.mode,y,null),_.return=m,_;Vp(m,_)}return null}function h(m,_,y,E){var b=_!==null?_.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:a(m,_,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xp:return y.key===b?l(m,_,y,E):null;case ru:return y.key===b?u(m,_,y,E):null;case Qs:return b=y._init,h(m,_,b(y._payload),E)}if(Id(y)||Wc(y))return b!==null?null:c(m,_,y,E,null);Vp(m,y)}return null}function f(m,_,y,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(y)||null,a(_,m,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case xp:return m=m.get(E.key===null?y:E.key)||null,l(_,m,E,b);case ru:return m=m.get(E.key===null?y:E.key)||null,u(_,m,E,b);case Qs:var C=E._init;return f(m,_,y,C(E._payload),b)}if(Id(E)||Wc(E))return m=m.get(y)||null,c(_,m,E,b,null);Vp(_,E)}return null}function p(m,_,y,E){for(var b=null,C=null,T=_,A=_=0,M=null;T!==null&&A<y.length;A++){T.index>A?(M=T,T=null):M=T.sibling;var P=h(m,T,y[A],E);if(P===null){T===null&&(T=M);break}t&&T&&P.alternate===null&&e(m,T),_=s(P,_,A),C===null?b=P:C.sibling=P,C=P,T=M}if(A===y.length)return n(m,T),pt&&la(m,A),b;if(T===null){for(;A<y.length;A++)T=d(m,y[A],E),T!==null&&(_=s(T,_,A),C===null?b=T:C.sibling=T,C=T);return pt&&la(m,A),b}for(T=r(m,T);A<y.length;A++)M=f(T,m,A,y[A],E),M!==null&&(t&&M.alternate!==null&&T.delete(M.key===null?A:M.key),_=s(M,_,A),C===null?b=M:C.sibling=M,C=M);return t&&T.forEach(function(L){return e(m,L)}),pt&&la(m,A),b}function g(m,_,y,E){var b=Wc(y);if(typeof b!="function")throw Error($(150));if(y=b.call(y),y==null)throw Error($(151));for(var C=b=null,T=_,A=_=0,M=null,P=y.next();T!==null&&!P.done;A++,P=y.next()){T.index>A?(M=T,T=null):M=T.sibling;var L=h(m,T,P.value,E);if(L===null){T===null&&(T=M);break}t&&T&&L.alternate===null&&e(m,T),_=s(L,_,A),C===null?b=L:C.sibling=L,C=L,T=M}if(P.done)return n(m,T),pt&&la(m,A),b;if(T===null){for(;!P.done;A++,P=y.next())P=d(m,P.value,E),P!==null&&(_=s(P,_,A),C===null?b=P:C.sibling=P,C=P);return pt&&la(m,A),b}for(T=r(m,T);!P.done;A++,P=y.next())P=f(T,m,A,P.value,E),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?A:P.key),_=s(P,_,A),C===null?b=P:C.sibling=P,C=P);return t&&T.forEach(function(G){return e(m,G)}),pt&&la(m,A),b}function v(m,_,y,E){if(typeof y=="object"&&y!==null&&y.type===iu&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case xp:e:{for(var b=y.key,C=_;C!==null;){if(C.key===b){if(b=y.type,b===iu){if(C.tag===7){n(m,C.sibling),_=i(C,y.props.children),_.return=m,m=_;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Qs&&QR(b)===C.type){n(m,C.sibling),_=i(C,y.props),_.ref=Qc(m,C,y),_.return=m,m=_;break e}n(m,C);break}else e(m,C);C=C.sibling}y.type===iu?(_=$a(y.props.children,m.mode,E,y.key),_.return=m,m=_):(E=Cm(y.type,y.key,y.props,null,m.mode,E),E.ref=Qc(m,_,y),E.return=m,m=E)}return o(m);case ru:e:{for(C=y.key;_!==null;){if(_.key===C)if(_.tag===4&&_.stateNode.containerInfo===y.containerInfo&&_.stateNode.implementation===y.implementation){n(m,_.sibling),_=i(_,y.children||[]),_.return=m,m=_;break e}else{n(m,_);break}else e(m,_);_=_.sibling}_=M0(y,m.mode,E),_.return=m,m=_}return o(m);case Qs:return C=y._init,v(m,_,C(y._payload),E)}if(Id(y))return p(m,_,y,E);if(Wc(y))return g(m,_,y,E);Vp(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,_!==null&&_.tag===6?(n(m,_.sibling),_=i(_,y),_.return=m,m=_):(n(m,_),_=D0(y,m.mode,E),_.return=m,m=_),o(m)):n(m,_)}return v}var Bu=RD(!0),xD=RD(!1),Df={},Ki=Go(Df),Ih=Go(Df),Th=Go(Df);function Sa(t){if(t===Df)throw Error($(174));return t}function zT(t,e){switch(nt(Th,e),nt(Ih,t),nt(Ki,Df),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qw(e,t)}dt(Ki),nt(Ki,e)}function zu(){dt(Ki),dt(Ih),dt(Th)}function AD(t){Sa(Th.current);var e=Sa(Ki.current),n=qw(e,t.type);e!==n&&(nt(Ih,t),nt(Ki,n))}function WT(t){Ih.current===t&&(dt(Ki),dt(Ih))}var vt=Go(0);function hg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var x0=[];function qT(){for(var t=0;t<x0.length;t++)x0[t]._workInProgressVersionPrimary=null;x0.length=0}var Em=Os.ReactCurrentDispatcher,A0=Os.ReactCurrentBatchConfig,Ka=0,wt=null,Ht=null,tn=null,fg=!1,jd=!1,bh=0,qz=0;function Sn(){throw Error($(321))}function HT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ti(t[n],e[n]))return!1;return!0}function GT(t,e,n,r,i,s){if(Ka=s,wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Em.current=t===null||t.memoizedState===null?Qz:Yz,t=n(r,i),jd){s=0;do{if(jd=!1,bh=0,25<=s)throw Error($(301));s+=1,tn=Ht=null,e.updateQueue=null,Em.current=Xz,t=n(r,i)}while(jd)}if(Em.current=pg,e=Ht!==null&&Ht.next!==null,Ka=0,tn=Ht=wt=null,fg=!1,e)throw Error($(300));return t}function KT(){var t=bh!==0;return bh=0,t}function Pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?wt.memoizedState=tn=t:tn=tn.next=t,tn}function Zr(){if(Ht===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=tn===null?wt.memoizedState:tn.next;if(e!==null)tn=e,Ht=t;else{if(t===null)throw Error($(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},tn===null?wt.memoizedState=tn=t:tn=tn.next=t}return tn}function Sh(t,e){return typeof e=="function"?e(t):e}function P0(t){var e=Zr(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ka&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,wt.lanes|=c,Qa|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ti(r,e.memoizedState)||(or=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,wt.lanes|=s,Qa|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function k0(t){var e=Zr(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ti(s,e.memoizedState)||(or=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function PD(){}function kD(t,e){var n=wt,r=Zr(),i=e(),s=!Ti(r.memoizedState,i);if(s&&(r.memoizedState=i,or=!0),r=r.queue,QT(DD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,Ch(9,OD.bind(null,n,r,i,e),void 0,null),sn===null)throw Error($(349));Ka&30||ND(n,e,i)}return i}function ND(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OD(t,e,n,r){e.value=n,e.getSnapshot=r,MD(e)&&LD(t)}function DD(t,e,n){return n(function(){MD(e)&&LD(t)})}function MD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ti(t,n)}catch{return!0}}function LD(t){var e=Ss(t,1);e!==null&&vi(e,t,1,-1)}function YR(t){var e=Pi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:t},e.queue=t,t=t.dispatch=Kz.bind(null,wt,t),[e.memoizedState,t]}function Ch(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $D(){return Zr().memoizedState}function Im(t,e,n,r){var i=Pi();wt.flags|=t,i.memoizedState=Ch(1|e,n,void 0,r===void 0?null:r)}function M_(t,e,n,r){var i=Zr();r=r===void 0?null:r;var s=void 0;if(Ht!==null){var o=Ht.memoizedState;if(s=o.destroy,r!==null&&HT(r,o.deps)){i.memoizedState=Ch(e,n,s,r);return}}wt.flags|=t,i.memoizedState=Ch(1|e,n,s,r)}function XR(t,e){return Im(8390656,8,t,e)}function QT(t,e){return M_(2048,8,t,e)}function FD(t,e){return M_(4,2,t,e)}function VD(t,e){return M_(4,4,t,e)}function UD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jD(t,e,n){return n=n!=null?n.concat([t]):null,M_(4,4,UD.bind(null,e,t),n)}function YT(){}function BD(t,e){var n=Zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&HT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zD(t,e){var n=Zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&HT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function WD(t,e,n){return Ka&21?(Ti(n,e)||(n=GO(),wt.lanes|=n,Qa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,or=!0),t.memoizedState=n)}function Hz(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var r=A0.transition;A0.transition={};try{t(!1),e()}finally{He=n,A0.transition=r}}function qD(){return Zr().memoizedState}function Gz(t,e,n){var r=po(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},HD(t))GD(e,n);else if(n=TD(t,e,n,r),n!==null){var i=zn();vi(n,t,r,i),KD(n,e,r)}}function Kz(t,e,n){var r=po(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(HD(t))GD(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ti(a,o)){var l=e.interleaved;l===null?(i.next=i,jT(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=TD(t,e,i,r),n!==null&&(i=zn(),vi(n,t,r,i),KD(n,e,r))}}function HD(t){var e=t.alternate;return t===wt||e!==null&&e===wt}function GD(t,e){jd=fg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function KD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,RT(t,n)}}var pg={readContext:Jr,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},Qz={readContext:Jr,useCallback:function(t,e){return Pi().memoizedState=[t,e===void 0?null:e],t},useContext:Jr,useEffect:XR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Im(4194308,4,UD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Im(4194308,4,t,e)},useInsertionEffect:function(t,e){return Im(4,2,t,e)},useMemo:function(t,e){var n=Pi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gz.bind(null,wt,t),[r.memoizedState,t]},useRef:function(t){var e=Pi();return t={current:t},e.memoizedState=t},useState:YR,useDebugValue:YT,useDeferredValue:function(t){return Pi().memoizedState=t},useTransition:function(){var t=YR(!1),e=t[0];return t=Hz.bind(null,t[1]),Pi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wt,i=Pi();if(pt){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),sn===null)throw Error($(349));Ka&30||ND(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,XR(DD.bind(null,r,s,t),[t]),r.flags|=2048,Ch(9,OD.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Pi(),e=sn.identifierPrefix;if(pt){var n=hs,r=ds;n=(r&~(1<<32-yi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qz++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yz={readContext:Jr,useCallback:BD,useContext:Jr,useEffect:QT,useImperativeHandle:jD,useInsertionEffect:FD,useLayoutEffect:VD,useMemo:zD,useReducer:P0,useRef:$D,useState:function(){return P0(Sh)},useDebugValue:YT,useDeferredValue:function(t){var e=Zr();return WD(e,Ht.memoizedState,t)},useTransition:function(){var t=P0(Sh)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:PD,useSyncExternalStore:kD,useId:qD,unstable_isNewReconciler:!1},Xz={readContext:Jr,useCallback:BD,useContext:Jr,useEffect:QT,useImperativeHandle:jD,useInsertionEffect:FD,useLayoutEffect:VD,useMemo:zD,useReducer:k0,useRef:$D,useState:function(){return k0(Sh)},useDebugValue:YT,useDeferredValue:function(t){var e=Zr();return Ht===null?e.memoizedState=t:WD(e,Ht.memoizedState,t)},useTransition:function(){var t=k0(Sh)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:PD,useSyncExternalStore:kD,useId:qD,unstable_isNewReconciler:!1};function Wu(t,e){try{var n="",r=e;do n+=S5(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function N0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Jz=typeof WeakMap=="function"?WeakMap:Map;function QD(t,e,n){n=_s(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gg||(gg=!0,bE=r),pE(t,e)},n}function YD(t,e,n){n=_s(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pE(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pE(t,e),typeof r!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function JR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Jz;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=h6.bind(null,t,e,n),e.then(t,t))}function ZR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ex(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_s(-1,1),e.tag=2,ho(n,e,1))),n.lanes|=1),t)}var Zz=Os.ReactCurrentOwner,or=!1;function Fn(t,e,n,r){e.child=t===null?xD(e,null,n,r):Bu(e,t.child,n,r)}function tx(t,e,n,r,i){n=n.render;var s=e.ref;return Tu(e,i),r=GT(t,e,n,r,s,i),n=KT(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cs(t,e,i)):(pt&&n&&MT(e),e.flags|=1,Fn(t,e,r,i),e.child)}function nx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ib(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,XD(t,e,s,r,i)):(t=Cm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:yh,n(o,r)&&t.ref===e.ref)return Cs(t,e,i)}return e.flags|=1,t=mo(s,r),t.ref=e.ref,t.return=e,e.child=t}function XD(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(yh(s,r)&&t.ref===e.ref)if(or=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(or=!0);else return e.lanes=t.lanes,Cs(t,e,i)}return mE(t,e,n,r,i)}function JD(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(pu,Er),Er|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(pu,Er),Er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,nt(pu,Er),Er|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,nt(pu,Er),Er|=r;return Fn(t,e,i,n),e.child}function ZD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mE(t,e,n,r,i){var s=dr(n)?Ha:Dn.current;return s=Uu(e,s),Tu(e,i),n=GT(t,e,n,r,s,i),r=KT(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cs(t,e,i)):(pt&&r&&MT(e),e.flags|=1,Fn(t,e,n,i),e.child)}function rx(t,e,n,r,i){if(dr(n)){var s=!0;og(e)}else s=!1;if(Tu(e,i),e.stateNode===null)Tm(t,e),CD(e,n,r),fE(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jr(u):(u=dr(n)?Ha:Dn.current,u=Uu(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&KR(e,o,r,u),Ys=!1;var h=e.memoizedState;o.state=h,dg(e,r,o,i),l=e.memoizedState,a!==r||h!==l||cr.current||Ys?(typeof c=="function"&&(hE(e,n,c,r),l=e.memoizedState),(a=Ys||GR(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,bD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ci(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jr(l):(l=dr(n)?Ha:Dn.current,l=Uu(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&KR(e,o,r,l),Ys=!1,h=e.memoizedState,o.state=h,dg(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||cr.current||Ys?(typeof f=="function"&&(hE(e,n,f,r),p=e.memoizedState),(u=Ys||GR(e,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return gE(t,e,n,r,s,i)}function gE(t,e,n,r,i,s){ZD(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&BR(e,n,!1),Cs(t,e,s);r=e.stateNode,Zz.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Bu(e,t.child,null,s),e.child=Bu(e,null,a,s)):Fn(t,e,a,s),e.memoizedState=r.state,i&&BR(e,n,!0),e.child}function eM(t){var e=t.stateNode;e.pendingContext?jR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jR(t,e.context,!1),zT(t,e.containerInfo)}function ix(t,e,n,r,i){return ju(),$T(i),e.flags|=256,Fn(t,e,n,r),e.child}var _E={dehydrated:null,treeContext:null,retryLane:0};function yE(t){return{baseLanes:t,cachePool:null,transitions:null}}function tM(t,e,n){var r=e.pendingProps,i=vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),nt(vt,i&1),t===null)return cE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=F_(o,r,0,null),t=$a(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yE(n),e.memoizedState=_E,t):XT(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return e6(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=mo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=mo(a,s):(s=$a(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?yE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_E,r}return s=t.child,t=s.sibling,r=mo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function XT(t,e){return e=F_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Up(t,e,n,r){return r!==null&&$T(r),Bu(e,t.child,null,n),t=XT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function e6(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=N0(Error($(422))),Up(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=F_({mode:"visible",children:r.children},i,0,null),s=$a(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Bu(e,t.child,null,o),e.child.memoizedState=yE(o),e.memoizedState=_E,s);if(!(e.mode&1))return Up(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=N0(s,r,void 0),Up(t,e,o,r)}if(a=(o&t.childLanes)!==0,or||a){if(r=sn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ss(t,i),vi(r,t,i,-1))}return rb(),r=N0(Error($(421))),Up(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=f6.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Cr=co(i.nextSibling),kr=e,pt=!0,hi=null,t!==null&&(zr[Wr++]=ds,zr[Wr++]=hs,zr[Wr++]=Ga,ds=t.id,hs=t.overflow,Ga=e),e=XT(e,r.children),e.flags|=4096,e)}function sx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dE(t.return,e,n)}function O0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nM(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Fn(t,e,r.children,n),r=vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sx(t,n,e);else if(t.tag===19)sx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(vt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&hg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),O0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}O0(e,!0,n,null,s);break;case"together":O0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=mo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function t6(t,e,n){switch(e.tag){case 3:eM(e),ju();break;case 5:AD(e);break;case 1:dr(e.type)&&og(e);break;case 4:zT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;nt(ug,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?tM(t,e,n):(nt(vt,vt.current&1),t=Cs(t,e,n),t!==null?t.sibling:null);nt(vt,vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nM(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nt(vt,vt.current),r)break;return null;case 22:case 23:return e.lanes=0,JD(t,e,n)}return Cs(t,e,n)}var rM,vE,iM,sM;rM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vE=function(){};iM=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Sa(Ki.current);var s=null;switch(n){case"input":i=jw(t,i),r=jw(t,r),s=[];break;case"select":i=It({},i,{value:void 0}),r=It({},r,{value:void 0}),s=[];break;case"textarea":i=Ww(t,i),r=Ww(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ig)}Hw(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(dh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(dh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ot("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};sM=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yc(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function n6(t,e,n){var r=e.pendingProps;switch(LT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(e),null;case 1:return dr(e.type)&&sg(),Cn(e),null;case 3:return r=e.stateNode,zu(),dt(cr),dt(Dn),qT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hi!==null&&(RE(hi),hi=null))),vE(t,e),Cn(e),null;case 5:WT(e);var i=Sa(Th.current);if(n=e.type,t!==null&&e.stateNode!=null)iM(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Cn(e),null}if(t=Sa(Ki.current),Fp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Di]=e,r[Eh]=s,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(i=0;i<bd.length;i++)ot(bd[i],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":pR(r,s),ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ot("invalid",r);break;case"textarea":gR(r,s),ot("invalid",r)}Hw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&$p(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$p(r.textContent,a,t),i=["children",""+a]):dh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ot("scroll",r)}switch(n){case"input":Ap(r),mR(r,s,!0);break;case"textarea":Ap(r),_R(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ig)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Di]=e,t[Eh]=r,rM(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gw(n,r),n){case"dialog":ot("cancel",t),ot("close",t),i=r;break;case"iframe":case"object":case"embed":ot("load",t),i=r;break;case"video":case"audio":for(i=0;i<bd.length;i++)ot(bd[i],t);i=r;break;case"source":ot("error",t),i=r;break;case"img":case"image":case"link":ot("error",t),ot("load",t),i=r;break;case"details":ot("toggle",t),i=r;break;case"input":pR(t,r),i=jw(t,r),ot("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=It({},r,{value:void 0}),ot("invalid",t);break;case"textarea":gR(t,r),i=Ww(t,r),ot("invalid",t);break;default:i=r}Hw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?MO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&hh(t,l):typeof l=="number"&&hh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(dh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ot("scroll",t):l!=null&&ET(t,s,l,o))}switch(n){case"input":Ap(t),mR(t,r,!1);break;case"textarea":Ap(t),_R(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?vu(t,!!r.multiple,s,!1):r.defaultValue!=null&&vu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ig)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Cn(e),null;case 6:if(t&&e.stateNode!=null)sM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Sa(Th.current),Sa(Ki.current),Fp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Di]=e,(s=r.nodeValue!==n)&&(t=kr,t!==null))switch(t.tag){case 3:$p(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$p(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Di]=e,e.stateNode=r}return Cn(e),null;case 13:if(dt(vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&Cr!==null&&e.mode&1&&!(e.flags&128))ID(),ju(),e.flags|=98560,s=!1;else if(s=Fp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Di]=e}else ju(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Cn(e),s=!1}else hi!==null&&(RE(hi),hi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Qt===0&&(Qt=3):rb())),e.updateQueue!==null&&(e.flags|=4),Cn(e),null);case 4:return zu(),vE(t,e),t===null&&vh(e.stateNode.containerInfo),Cn(e),null;case 10:return UT(e.type._context),Cn(e),null;case 17:return dr(e.type)&&sg(),Cn(e),null;case 19:if(dt(vt),s=e.memoizedState,s===null)return Cn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Yc(s,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hg(t),o!==null){for(e.flags|=128,Yc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(vt,vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Lt()>qu&&(e.flags|=128,r=!0,Yc(s,!1),e.lanes=4194304)}else{if(!r)if(t=hg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pt)return Cn(e),null}else 2*Lt()-s.renderingStartTime>qu&&n!==1073741824&&(e.flags|=128,r=!0,Yc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Lt(),e.sibling=null,n=vt.current,nt(vt,r?n&1|2:n&1),e):(Cn(e),null);case 22:case 23:return nb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Er&1073741824&&(Cn(e),e.subtreeFlags&6&&(e.flags|=8192)):Cn(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function r6(t,e){switch(LT(e),e.tag){case 1:return dr(e.type)&&sg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zu(),dt(cr),dt(Dn),qT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return WT(e),null;case 13:if(dt(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ju()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dt(vt),null;case 4:return zu(),null;case 10:return UT(e.type._context),null;case 22:case 23:return nb(),null;case 24:return null;default:return null}}var jp=!1,An=!1,i6=typeof WeakSet=="function"?WeakSet:Set,ee=null;function fu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ct(t,e,r)}else n.current=null}function wE(t,e,n){try{n()}catch(r){Ct(t,e,r)}}var ox=!1;function s6(t,e){if(rE=tg,t=uD(),DT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(iE={focusedElem:t,selectionRange:n},tg=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=e.stateNode,_=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:ci(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(E){Ct(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return p=ox,ox=!1,p}function Bd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&wE(e,n,s)}i=i.next}while(i!==r)}}function L_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function EE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oM(t){var e=t.alternate;e!==null&&(t.alternate=null,oM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Di],delete e[Eh],delete e[aE],delete e[jz],delete e[Bz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aM(t){return t.tag===5||t.tag===3||t.tag===4}function ax(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function IE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ig));else if(r!==4&&(t=t.child,t!==null))for(IE(t,e,n),t=t.sibling;t!==null;)IE(t,e,n),t=t.sibling}function TE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(TE(t,e,n),t=t.sibling;t!==null;)TE(t,e,n),t=t.sibling}var gn=null,di=!1;function Bs(t,e,n){for(n=n.child;n!==null;)lM(t,e,n),n=n.sibling}function lM(t,e,n){if(Gi&&typeof Gi.onCommitFiberUnmount=="function")try{Gi.onCommitFiberUnmount(x_,n)}catch{}switch(n.tag){case 5:An||fu(n,e);case 6:var r=gn,i=di;gn=null,Bs(t,e,n),gn=r,di=i,gn!==null&&(di?(t=gn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gn.removeChild(n.stateNode));break;case 18:gn!==null&&(di?(t=gn,n=n.stateNode,t.nodeType===8?C0(t.parentNode,n):t.nodeType===1&&C0(t,n),gh(t)):C0(gn,n.stateNode));break;case 4:r=gn,i=di,gn=n.stateNode.containerInfo,di=!0,Bs(t,e,n),gn=r,di=i;break;case 0:case 11:case 14:case 15:if(!An&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wE(n,e,o),i=i.next}while(i!==r)}Bs(t,e,n);break;case 1:if(!An&&(fu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ct(n,e,a)}Bs(t,e,n);break;case 21:Bs(t,e,n);break;case 22:n.mode&1?(An=(r=An)||n.memoizedState!==null,Bs(t,e,n),An=r):Bs(t,e,n);break;default:Bs(t,e,n)}}function lx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new i6),e.forEach(function(r){var i=p6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function oi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gn=a.stateNode,di=!1;break e;case 3:gn=a.stateNode.containerInfo,di=!0;break e;case 4:gn=a.stateNode.containerInfo,di=!0;break e}a=a.return}if(gn===null)throw Error($(160));lM(s,o,i),gn=null,di=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ct(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uM(e,t),e=e.sibling}function uM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),Ai(t),r&4){try{Bd(3,t,t.return),L_(3,t)}catch(g){Ct(t,t.return,g)}try{Bd(5,t,t.return)}catch(g){Ct(t,t.return,g)}}break;case 1:oi(e,t),Ai(t),r&512&&n!==null&&fu(n,n.return);break;case 5:if(oi(e,t),Ai(t),r&512&&n!==null&&fu(n,n.return),t.flags&32){var i=t.stateNode;try{hh(i,"")}catch(g){Ct(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&PO(i,s),Gw(a,o);var u=Gw(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?MO(i,d):c==="dangerouslySetInnerHTML"?OO(i,d):c==="children"?hh(i,d):ET(i,c,d,u)}switch(a){case"input":Bw(i,s);break;case"textarea":kO(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?vu(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?vu(i,!!s.multiple,s.defaultValue,!0):vu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Eh]=s}catch(g){Ct(t,t.return,g)}}break;case 6:if(oi(e,t),Ai(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Ct(t,t.return,g)}}break;case 3:if(oi(e,t),Ai(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gh(e.containerInfo)}catch(g){Ct(t,t.return,g)}break;case 4:oi(e,t),Ai(t);break;case 13:oi(e,t),Ai(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eb=Lt())),r&4&&lx(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(An=(u=An)||c,oi(e,t),An=u):oi(e,t),Ai(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ee=t,c=t.child;c!==null;){for(d=ee=c;ee!==null;){switch(h=ee,f=h.child,h.tag){case 0:case 11:case 14:case 15:Bd(4,h,h.return);break;case 1:fu(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Ct(r,n,g)}}break;case 5:fu(h,h.return);break;case 22:if(h.memoizedState!==null){cx(d);continue}}f!==null?(f.return=h,ee=f):cx(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=DO("display",o))}catch(g){Ct(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ct(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:oi(e,t),Ai(t),r&4&&lx(t);break;case 21:break;default:oi(e,t),Ai(t)}}function Ai(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aM(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(hh(i,""),r.flags&=-33);var s=ax(t);TE(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ax(t);IE(t,a,o);break;default:throw Error($(161))}}catch(l){Ct(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function o6(t,e,n){ee=t,cM(t)}function cM(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||An;a=jp;var u=An;if(jp=o,(An=l)&&!u)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?dx(i):l!==null?(l.return=o,ee=l):dx(i);for(;s!==null;)ee=s,cM(s),s=s.sibling;ee=i,jp=a,An=u}ux(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):ux(t)}}function ux(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:An||L_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!An)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ci(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&HR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&gh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}An||e.flags&512&&EE(e)}catch(h){Ct(e,e.return,h)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function cx(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function dx(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{L_(4,e)}catch(l){Ct(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ct(e,i,l)}}var s=e.return;try{EE(e)}catch(l){Ct(e,s,l)}break;case 5:var o=e.return;try{EE(e)}catch(l){Ct(e,o,l)}}}catch(l){Ct(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var a6=Math.ceil,mg=Os.ReactCurrentDispatcher,JT=Os.ReactCurrentOwner,Yr=Os.ReactCurrentBatchConfig,$e=0,sn=null,zt=null,En=0,Er=0,pu=Go(0),Qt=0,Rh=null,Qa=0,$_=0,ZT=0,zd=null,rr=null,eb=0,qu=1/0,ls=null,gg=!1,bE=null,fo=null,Bp=!1,ro=null,_g=0,Wd=0,SE=null,bm=-1,Sm=0;function zn(){return $e&6?Lt():bm!==-1?bm:bm=Lt()}function po(t){return t.mode&1?$e&2&&En!==0?En&-En:Wz.transition!==null?(Sm===0&&(Sm=GO()),Sm):(t=He,t!==0||(t=window.event,t=t===void 0?16:eD(t.type)),t):1}function vi(t,e,n,r){if(50<Wd)throw Wd=0,SE=null,Error($(185));kf(t,n,r),(!($e&2)||t!==sn)&&(t===sn&&(!($e&2)&&($_|=n),Qt===4&&Js(t,En)),hr(t,r),n===1&&$e===0&&!(e.mode&1)&&(qu=Lt()+500,O_&&Ko()))}function hr(t,e){var n=t.callbackNode;W5(t,e);var r=eg(t,t===sn?En:0);if(r===0)n!==null&&wR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wR(n),e===1)t.tag===0?zz(hx.bind(null,t)):vD(hx.bind(null,t)),Vz(function(){!($e&6)&&Ko()}),n=null;else{switch(KO(r)){case 1:n=CT;break;case 4:n=qO;break;case 16:n=Zm;break;case 536870912:n=HO;break;default:n=Zm}n=yM(n,dM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dM(t,e){if(bm=-1,Sm=0,$e&6)throw Error($(327));var n=t.callbackNode;if(bu()&&t.callbackNode!==n)return null;var r=eg(t,t===sn?En:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yg(t,r);else{e=r;var i=$e;$e|=2;var s=fM();(sn!==t||En!==e)&&(ls=null,qu=Lt()+500,La(t,e));do try{c6();break}catch(a){hM(t,a)}while(!0);VT(),mg.current=s,$e=i,zt!==null?e=0:(sn=null,En=0,e=Qt)}if(e!==0){if(e===2&&(i=Jw(t),i!==0&&(r=i,e=CE(t,i))),e===1)throw n=Rh,La(t,0),Js(t,r),hr(t,Lt()),n;if(e===6)Js(t,r);else{if(i=t.current.alternate,!(r&30)&&!l6(i)&&(e=yg(t,r),e===2&&(s=Jw(t),s!==0&&(r=s,e=CE(t,s))),e===1))throw n=Rh,La(t,0),Js(t,r),hr(t,Lt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:ua(t,rr,ls);break;case 3:if(Js(t,r),(r&130023424)===r&&(e=eb+500-Lt(),10<e)){if(eg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){zn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=oE(ua.bind(null,t,rr,ls),e);break}ua(t,rr,ls);break;case 4:if(Js(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-yi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*a6(r/1960))-r,10<r){t.timeoutHandle=oE(ua.bind(null,t,rr,ls),r);break}ua(t,rr,ls);break;case 5:ua(t,rr,ls);break;default:throw Error($(329))}}}return hr(t,Lt()),t.callbackNode===n?dM.bind(null,t):null}function CE(t,e){var n=zd;return t.current.memoizedState.isDehydrated&&(La(t,e).flags|=256),t=yg(t,e),t!==2&&(e=rr,rr=n,e!==null&&RE(e)),t}function RE(t){rr===null?rr=t:rr.push.apply(rr,t)}function l6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ti(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Js(t,e){for(e&=~ZT,e&=~$_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yi(e),r=1<<n;t[n]=-1,e&=~r}}function hx(t){if($e&6)throw Error($(327));bu();var e=eg(t,0);if(!(e&1))return hr(t,Lt()),null;var n=yg(t,e);if(t.tag!==0&&n===2){var r=Jw(t);r!==0&&(e=r,n=CE(t,r))}if(n===1)throw n=Rh,La(t,0),Js(t,e),hr(t,Lt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ua(t,rr,ls),hr(t,Lt()),null}function tb(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(qu=Lt()+500,O_&&Ko())}}function Ya(t){ro!==null&&ro.tag===0&&!($e&6)&&bu();var e=$e;$e|=1;var n=Yr.transition,r=He;try{if(Yr.transition=null,He=1,t)return t()}finally{He=r,Yr.transition=n,$e=e,!($e&6)&&Ko()}}function nb(){Er=pu.current,dt(pu)}function La(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Fz(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(LT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sg();break;case 3:zu(),dt(cr),dt(Dn),qT();break;case 5:WT(r);break;case 4:zu();break;case 13:dt(vt);break;case 19:dt(vt);break;case 10:UT(r.type._context);break;case 22:case 23:nb()}n=n.return}if(sn=t,zt=t=mo(t.current,null),En=Er=e,Qt=0,Rh=null,ZT=$_=Qa=0,rr=zd=null,ba!==null){for(e=0;e<ba.length;e++)if(n=ba[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ba=null}return t}function hM(t,e){do{var n=zt;try{if(VT(),Em.current=pg,fg){for(var r=wt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fg=!1}if(Ka=0,tn=Ht=wt=null,jd=!1,bh=0,JT.current=null,n===null||n.return===null){Qt=1,Rh=e,zt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=En,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=ZR(o);if(f!==null){f.flags&=-257,ex(f,o,a,s,e),f.mode&1&&JR(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){JR(s,u,e),rb();break e}l=Error($(426))}}else if(pt&&a.mode&1){var v=ZR(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ex(v,o,a,s,e),$T(Wu(l,a));break e}}s=l=Wu(l,a),Qt!==4&&(Qt=2),zd===null?zd=[s]:zd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=QD(s,l,e);qR(s,m);break e;case 1:a=l;var _=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fo===null||!fo.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=YD(s,a,e);qR(s,E);break e}}s=s.return}while(s!==null)}mM(n)}catch(b){e=b,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function fM(){var t=mg.current;return mg.current=pg,t===null?pg:t}function rb(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),sn===null||!(Qa&268435455)&&!($_&268435455)||Js(sn,En)}function yg(t,e){var n=$e;$e|=2;var r=fM();(sn!==t||En!==e)&&(ls=null,La(t,e));do try{u6();break}catch(i){hM(t,i)}while(!0);if(VT(),$e=n,mg.current=r,zt!==null)throw Error($(261));return sn=null,En=0,Qt}function u6(){for(;zt!==null;)pM(zt)}function c6(){for(;zt!==null&&!M5();)pM(zt)}function pM(t){var e=_M(t.alternate,t,Er);t.memoizedProps=t.pendingProps,e===null?mM(t):zt=e,JT.current=null}function mM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=r6(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,zt=null;return}}else if(n=n6(n,e,Er),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Qt===0&&(Qt=5)}function ua(t,e,n){var r=He,i=Yr.transition;try{Yr.transition=null,He=1,d6(t,e,n,r)}finally{Yr.transition=i,He=r}return null}function d6(t,e,n,r){do bu();while(ro!==null);if($e&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(q5(t,s),t===sn&&(zt=sn=null,En=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bp||(Bp=!0,yM(Zm,function(){return bu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Yr.transition,Yr.transition=null;var o=He;He=1;var a=$e;$e|=4,JT.current=null,s6(t,n),uM(n,t),kz(iE),tg=!!rE,iE=rE=null,t.current=n,o6(n),L5(),$e=a,He=o,Yr.transition=s}else t.current=n;if(Bp&&(Bp=!1,ro=t,_g=i),s=t.pendingLanes,s===0&&(fo=null),V5(n.stateNode),hr(t,Lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gg)throw gg=!1,t=bE,bE=null,t;return _g&1&&t.tag!==0&&bu(),s=t.pendingLanes,s&1?t===SE?Wd++:(Wd=0,SE=t):Wd=0,Ko(),null}function bu(){if(ro!==null){var t=KO(_g),e=Yr.transition,n=He;try{if(Yr.transition=null,He=16>t?16:t,ro===null)var r=!1;else{if(t=ro,ro=null,_g=0,$e&6)throw Error($(331));var i=$e;for($e|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ee=u;ee!==null;){var c=ee;switch(c.tag){case 0:case 11:case 15:Bd(8,c,s)}var d=c.child;if(d!==null)d.return=c,ee=d;else for(;ee!==null;){c=ee;var h=c.sibling,f=c.return;if(oM(c),c===u){ee=null;break}if(h!==null){h.return=f,ee=h;break}ee=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bd(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ee=m;break e}ee=s.return}}var _=t.current;for(ee=_;ee!==null;){o=ee;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ee=y;else e:for(o=_;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:L_(9,a)}}catch(b){Ct(a,a.return,b)}if(a===o){ee=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ee=E;break e}ee=a.return}}if($e=i,Ko(),Gi&&typeof Gi.onPostCommitFiberRoot=="function")try{Gi.onPostCommitFiberRoot(x_,t)}catch{}r=!0}return r}finally{He=n,Yr.transition=e}}return!1}function fx(t,e,n){e=Wu(n,e),e=QD(t,e,1),t=ho(t,e,1),e=zn(),t!==null&&(kf(t,1,e),hr(t,e))}function Ct(t,e,n){if(t.tag===3)fx(t,t,n);else for(;e!==null;){if(e.tag===3){fx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fo===null||!fo.has(r))){t=Wu(n,t),t=YD(e,t,1),e=ho(e,t,1),t=zn(),e!==null&&(kf(e,1,t),hr(e,t));break}}e=e.return}}function h6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zn(),t.pingedLanes|=t.suspendedLanes&n,sn===t&&(En&n)===n&&(Qt===4||Qt===3&&(En&130023424)===En&&500>Lt()-eb?La(t,0):ZT|=n),hr(t,e)}function gM(t,e){e===0&&(t.mode&1?(e=Np,Np<<=1,!(Np&130023424)&&(Np=4194304)):e=1);var n=zn();t=Ss(t,e),t!==null&&(kf(t,e,n),hr(t,n))}function f6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gM(t,n)}function p6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),gM(t,n)}var _M;_M=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cr.current)or=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return or=!1,t6(t,e,n);or=!!(t.flags&131072)}else or=!1,pt&&e.flags&1048576&&wD(e,lg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tm(t,e),t=e.pendingProps;var i=Uu(e,Dn.current);Tu(e,n),i=GT(null,e,r,t,i,n);var s=KT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dr(r)?(s=!0,og(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,BT(e),i.updater=D_,e.stateNode=i,i._reactInternals=e,fE(e,r,t,n),e=gE(null,e,r,!0,s,n)):(e.tag=0,pt&&s&&MT(e),Fn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=g6(r),t=ci(r,t),i){case 0:e=mE(null,e,r,t,n);break e;case 1:e=rx(null,e,r,t,n);break e;case 11:e=tx(null,e,r,t,n);break e;case 14:e=nx(null,e,r,ci(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ci(r,i),mE(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ci(r,i),rx(t,e,r,i,n);case 3:e:{if(eM(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,bD(t,e),dg(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wu(Error($(423)),e),e=ix(t,e,r,n,i);break e}else if(r!==i){i=Wu(Error($(424)),e),e=ix(t,e,r,n,i);break e}else for(Cr=co(e.stateNode.containerInfo.firstChild),kr=e,pt=!0,hi=null,n=xD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ju(),r===i){e=Cs(t,e,n);break e}Fn(t,e,r,n)}e=e.child}return e;case 5:return AD(e),t===null&&cE(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sE(r,i)?o=null:s!==null&&sE(r,s)&&(e.flags|=32),ZD(t,e),Fn(t,e,o,n),e.child;case 6:return t===null&&cE(e),null;case 13:return tM(t,e,n);case 4:return zT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bu(e,null,r,n):Fn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ci(r,i),tx(t,e,r,i,n);case 7:return Fn(t,e,e.pendingProps,n),e.child;case 8:return Fn(t,e,e.pendingProps.children,n),e.child;case 12:return Fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,nt(ug,r._currentValue),r._currentValue=o,s!==null)if(Ti(s.value,o)){if(s.children===i.children&&!cr.current){e=Cs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=_s(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),dE(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),dE(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Fn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Tu(e,n),i=Jr(i),r=r(i),e.flags|=1,Fn(t,e,r,n),e.child;case 14:return r=e.type,i=ci(r,e.pendingProps),i=ci(r.type,i),nx(t,e,r,i,n);case 15:return XD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ci(r,i),Tm(t,e),e.tag=1,dr(r)?(t=!0,og(e)):t=!1,Tu(e,n),CD(e,r,i),fE(e,r,i,n),gE(null,e,r,!0,t,n);case 19:return nM(t,e,n);case 22:return JD(t,e,n)}throw Error($(156,e.tag))};function yM(t,e){return WO(t,e)}function m6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,n,r){return new m6(t,e,n,r)}function ib(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g6(t){if(typeof t=="function")return ib(t)?1:0;if(t!=null){if(t=t.$$typeof,t===TT)return 11;if(t===bT)return 14}return 2}function mo(t,e){var n=t.alternate;return n===null?(n=Gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ib(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case iu:return $a(n.children,i,s,e);case IT:o=8,i|=8;break;case $w:return t=Gr(12,n,e,i|2),t.elementType=$w,t.lanes=s,t;case Fw:return t=Gr(13,n,e,i),t.elementType=Fw,t.lanes=s,t;case Vw:return t=Gr(19,n,e,i),t.elementType=Vw,t.lanes=s,t;case RO:return F_(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SO:o=10;break e;case CO:o=9;break e;case TT:o=11;break e;case bT:o=14;break e;case Qs:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Gr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $a(t,e,n,r){return t=Gr(7,t,r,e),t.lanes=n,t}function F_(t,e,n,r){return t=Gr(22,t,r,e),t.elementType=RO,t.lanes=n,t.stateNode={isHidden:!1},t}function D0(t,e,n){return t=Gr(6,t,null,e),t.lanes=n,t}function M0(t,e,n){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=m0(0),this.expirationTimes=m0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sb(t,e,n,r,i,s,o,a,l){return t=new _6(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},BT(s),t}function y6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ru,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vM(t){if(!t)return So;t=t._reactInternals;e:{if(_l(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(dr(n))return yD(t,n,e)}return e}function wM(t,e,n,r,i,s,o,a,l){return t=sb(n,r,!0,t,i,s,o,a,l),t.context=vM(null),n=t.current,r=zn(),i=po(n),s=_s(r,i),s.callback=e??null,ho(n,s,i),t.current.lanes=i,kf(t,i,r),hr(t,r),t}function V_(t,e,n,r){var i=e.current,s=zn(),o=po(i);return n=vM(n),e.context===null?e.context=n:e.pendingContext=n,e=_s(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ho(i,e,o),t!==null&&(vi(t,i,o,s),wm(t,i,o)),o}function vg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function px(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ob(t,e){px(t,e),(t=t.alternate)&&px(t,e)}function v6(){return null}var EM=typeof reportError=="function"?reportError:function(t){console.error(t)};function ab(t){this._internalRoot=t}U_.prototype.render=ab.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));V_(t,e,null,null)};U_.prototype.unmount=ab.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ya(function(){V_(null,t,null,null)}),e[bs]=null}};function U_(t){this._internalRoot=t}U_.prototype.unstable_scheduleHydration=function(t){if(t){var e=XO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xs.length&&e!==0&&e<Xs[n].priority;n++);Xs.splice(n,0,t),n===0&&ZO(t)}};function lb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function j_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mx(){}function w6(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=vg(o);s.call(u)}}var o=wM(e,r,t,0,null,!1,!1,"",mx);return t._reactRootContainer=o,t[bs]=o.current,vh(t.nodeType===8?t.parentNode:t),Ya(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=vg(l);a.call(u)}}var l=sb(t,0,!1,null,null,!1,!1,"",mx);return t._reactRootContainer=l,t[bs]=l.current,vh(t.nodeType===8?t.parentNode:t),Ya(function(){V_(e,l,n,r)}),l}function B_(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=vg(o);a.call(l)}}V_(e,o,t,i)}else o=w6(n,e,t,i,r);return vg(o)}QO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Td(e.pendingLanes);n!==0&&(RT(e,n|1),hr(e,Lt()),!($e&6)&&(qu=Lt()+500,Ko()))}break;case 13:Ya(function(){var r=Ss(t,1);if(r!==null){var i=zn();vi(r,t,1,i)}}),ob(t,1)}};xT=function(t){if(t.tag===13){var e=Ss(t,134217728);if(e!==null){var n=zn();vi(e,t,134217728,n)}ob(t,134217728)}};YO=function(t){if(t.tag===13){var e=po(t),n=Ss(t,e);if(n!==null){var r=zn();vi(n,t,e,r)}ob(t,e)}};XO=function(){return He};JO=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};Qw=function(t,e,n){switch(e){case"input":if(Bw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=N_(r);if(!i)throw Error($(90));AO(r),Bw(r,i)}}}break;case"textarea":kO(t,n);break;case"select":e=n.value,e!=null&&vu(t,!!n.multiple,e,!1)}};FO=tb;VO=Ya;var E6={usingClientEntryPoint:!1,Events:[Of,lu,N_,LO,$O,tb]},Xc={findFiberByHostInstance:Ta,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},I6={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BO(t),t===null?null:t.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||v6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{x_=zp.inject(I6),Gi=zp}catch{}}Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E6;Fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lb(e))throw Error($(200));return y6(t,e,null,n)};Fr.createRoot=function(t,e){if(!lb(t))throw Error($(299));var n=!1,r="",i=EM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sb(t,1,!1,null,null,n,!1,r,i),t[bs]=e.current,vh(t.nodeType===8?t.parentNode:t),new ab(e)};Fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=BO(e),t=t===null?null:t.stateNode,t};Fr.flushSync=function(t){return Ya(t)};Fr.hydrate=function(t,e,n){if(!j_(e))throw Error($(200));return B_(null,t,e,!0,n)};Fr.hydrateRoot=function(t,e,n){if(!lb(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=EM;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wM(e,null,t,1,n??null,i,!1,s,o),t[bs]=e.current,vh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new U_(e)};Fr.render=function(t,e,n){if(!j_(e))throw Error($(200));return B_(null,t,e,!1,n)};Fr.unmountComponentAtNode=function(t){if(!j_(t))throw Error($(40));return t._reactRootContainer?(Ya(function(){B_(null,null,t,!1,function(){t._reactRootContainer=null,t[bs]=null})}),!0):!1};Fr.unstable_batchedUpdates=tb;Fr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!j_(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return B_(t,e,n,!1,r)};Fr.version="18.2.0-next-9e3b772b8-20220608";function IM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IM)}catch(t){console.error(t)}}IM(),wO.exports=Fr;var z_=wO.exports;const Wp=S_(z_);/**
 * @remix-run/router v1.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xh.apply(this,arguments)}var io;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(io||(io={}));const gx="popstate";function T6(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return xE("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:wg(i)}return S6(e,n,null,t)}function Wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ub(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function b6(){return Math.random().toString(36).substr(2,8)}function _x(t,e){return{usr:t.state,key:t.key,idx:e}}function xE(t,e,n,r){return n===void 0&&(n=null),xh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wc(e):e,{state:n,key:e&&e.key||r||b6()})}function wg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function S6(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=io.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(xh({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=io.Pop;let v=c(),m=v==null?null:v-u;u=v,l&&l({action:a,location:g.location,delta:m})}function h(v,m){a=io.Push;let _=xE(g.location,v,m);n&&n(_,v),u=c()+1;let y=_x(_,u),E=g.createHref(_);try{o.pushState(y,"",E)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(E)}s&&l&&l({action:a,location:g.location,delta:1})}function f(v,m){a=io.Replace;let _=xE(g.location,v,m);n&&n(_,v),u=c();let y=_x(_,u),E=g.createHref(_);o.replaceState(y,"",E),s&&l&&l({action:a,location:g.location,delta:0})}function p(v){let m=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof v=="string"?v:wg(v);return Wt(m,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,m)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(gx,d),l=v,()=>{i.removeEventListener(gx,d),l=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let m=p(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(v){return o.go(v)}};return g}var yx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yx||(yx={}));function C6(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?wc(e):e,i=cb(r.pathname||"/",n);if(i==null)return null;let s=TM(t);R6(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=L6(s[a],V6(i));return o}function TM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Wt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=go([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Wt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),TM(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:D6(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of bM(s.path))i(s,o,l)}),e}function bM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=bM(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function R6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:M6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const x6=/^:\w+$/,A6=3,P6=2,k6=1,N6=10,O6=-2,vx=t=>t==="*";function D6(t,e){let n=t.split("/"),r=n.length;return n.some(vx)&&(r+=O6),e&&(r+=P6),n.filter(i=>!vx(i)).reduce((i,s)=>i+(x6.test(s)?A6:s===""?k6:N6),r)}function M6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function L6(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=$6({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=a.route;s.push({params:r,pathname:go([i,c.pathname]),pathnameBase:W6(go([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=go([i,c.pathnameBase]))}return s}function $6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=F6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:h,isOptional:f}=c;if(h==="*"){let g=a[d]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?u[h]=void 0:u[h]=U6(p||"",h),u},{}),pathname:s,pathnameBase:o,pattern:t}}function F6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ub(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function V6(t){try{return decodeURI(t)}catch(e){return ub(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function U6(t,e){try{return decodeURIComponent(t)}catch(n){return ub(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function cb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function j6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?wc(t):t;return{pathname:n?n.startsWith("/")?n:B6(n,e):e,search:q6(r),hash:H6(i)}}function B6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function L0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function z6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function SM(t,e){let n=z6(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function CM(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=wc(t):(i=xh({},t),Wt(!i.pathname||!i.pathname.includes("?"),L0("?","pathname","search",i)),Wt(!i.pathname||!i.pathname.includes("#"),L0("#","pathname","hash",i)),Wt(!i.search||!i.search.includes("#"),L0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=j6(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const go=t=>t.join("/").replace(/\/\/+/g,"/"),W6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,H6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function G6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RM=["post","put","patch","delete"];new Set(RM);const K6=["get",...RM];new Set(K6);/**
 * React Router v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ah(){return Ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ah.apply(this,arguments)}const db=w.createContext(null),Q6=w.createContext(null),yl=w.createContext(null),W_=w.createContext(null),vl=w.createContext({outlet:null,matches:[],isDataRoute:!1}),xM=w.createContext(null);function Y6(t,e){let{relative:n}=e===void 0?{}:e;Mf()||Wt(!1);let{basename:r,navigator:i}=w.useContext(yl),{hash:s,pathname:o,search:a}=PM(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:go([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Mf(){return w.useContext(W_)!=null}function q_(){return Mf()||Wt(!1),w.useContext(W_).location}function AM(t){w.useContext(yl).static||w.useLayoutEffect(t)}function H_(){let{isDataRoute:t}=w.useContext(vl);return t?u3():X6()}function X6(){Mf()||Wt(!1);let t=w.useContext(db),{basename:e,future:n,navigator:r}=w.useContext(yl),{matches:i}=w.useContext(vl),{pathname:s}=q_(),o=JSON.stringify(SM(i,n.v7_relativeSplatPath)),a=w.useRef(!1);return AM(()=>{a.current=!0}),w.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=CM(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:go([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,s,t])}function PM(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(yl),{matches:i}=w.useContext(vl),{pathname:s}=q_(),o=JSON.stringify(SM(i,r.v7_relativeSplatPath));return w.useMemo(()=>CM(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function J6(t,e){return Z6(t,e)}function Z6(t,e,n,r){Mf()||Wt(!1);let{navigator:i}=w.useContext(yl),{matches:s}=w.useContext(vl),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=q_(),c;if(e){var d;let v=typeof e=="string"?wc(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||Wt(!1),c=v}else c=u;let h=c.pathname||"/",f=l==="/"?h:h.slice(l.length)||"/",p=C6(t,{pathname:f}),g=i3(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:go([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:go([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&g?w.createElement(W_.Provider,{value:{location:Ah({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:io.Pop}},g):g}function e3(){let t=l3(),e=G6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,null)}const t3=w.createElement(e3,null);class n3 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(vl.Provider,{value:this.props.routeContext},w.createElement(xM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function r3(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(db);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(vl.Provider,{value:e},r)}function i3(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));c>=0||Wt(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,h)=>{let f,p=!1,g=null,v=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||t3,l&&(u<0&&h===0?(c3("route-fallback",!1),p=!0,v=null):u===h&&(p=!0,v=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),_=()=>{let y;return f?y=g:p?y=v:d.route.Component?y=w.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,w.createElement(r3,{match:d,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?w.createElement(n3,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:_(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):_()},null)}var kM=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kM||{}),Eg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Eg||{});function s3(t){let e=w.useContext(db);return e||Wt(!1),e}function o3(t){let e=w.useContext(Q6);return e||Wt(!1),e}function a3(t){let e=w.useContext(vl);return e||Wt(!1),e}function NM(t){let e=a3(),n=e.matches[e.matches.length-1];return n.route.id||Wt(!1),n.route.id}function l3(){var t;let e=w.useContext(xM),n=o3(Eg.UseRouteError),r=NM(Eg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function u3(){let{router:t}=s3(kM.UseNavigateStable),e=NM(Eg.UseNavigateStable),n=w.useRef(!1);return AM(()=>{n.current=!0}),w.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ah({fromRouteId:e},s)))},[t,e])}const wx={};function c3(t,e,n){!e&&!wx[t]&&(wx[t]=!0)}function as(t){Wt(!1)}function d3(t){let{basename:e="/",children:n=null,location:r,navigationType:i=io.Pop,navigator:s,static:o=!1,future:a}=t;Mf()&&Wt(!1);let l=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:l,navigator:s,static:o,future:Ah({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=wc(r));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=w.useMemo(()=>{let v=cb(c,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:f,key:p},navigationType:i}},[l,c,d,h,f,p,i]);return g==null?null:w.createElement(yl.Provider,{value:u},w.createElement(W_.Provider,{children:n,value:g}))}function h3(t){let{children:e,location:n}=t;return J6(AE(e),n)}new Promise(()=>{});function AE(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,i)=>{if(!w.isValidElement(r))return;let s=[...e,i];if(r.type===w.Fragment){n.push.apply(n,AE(r.props.children,s));return}r.type!==as&&Wt(!1),!r.props.index||!r.props.children||Wt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=AE(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function PE(){return PE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PE.apply(this,arguments)}function f3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function p3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function m3(t,e){return t.button===0&&(!e||e==="_self")&&!p3(t)}const g3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_3="startTransition",Ex=Fu[_3];function y3(t){let{basename:e,children:n,future:r,window:i}=t,s=w.useRef();s.current==null&&(s.current=T6({window:i,v5Compat:!0}));let o=s.current,[a,l]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=w.useCallback(d=>{u&&Ex?Ex(()=>l(d)):l(d)},[l,u]);return w.useLayoutEffect(()=>o.listen(c),[o,c]),w.createElement(d3,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const v3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xa=w.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:d}=e,h=f3(e,g3),{basename:f}=w.useContext(yl),p,g=!1;if(typeof u=="string"&&w3.test(u)&&(p=u,v3))try{let y=new URL(window.location.href),E=u.startsWith("//")?new URL(y.protocol+u):new URL(u),b=cb(E.pathname,f);E.origin===y.origin&&b!=null?u=b+E.search+E.hash:g=!0}catch{}let v=Y6(u,{relative:i}),m=E3(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:d});function _(y){r&&r(y),y.defaultPrevented||m(y)}return w.createElement("a",PE({},h,{href:p||v,onClick:g||s?r:_,ref:n,target:l}))});var Ix;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ix||(Ix={}));var Tx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Tx||(Tx={}));function E3(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=H_(),u=q_(),c=PM(t,{relative:o});return w.useCallback(d=>{if(m3(d,n)){d.preventDefault();let h=r!==void 0?r:wg(u)===wg(c);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}var bx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=function(t,e){if(!t)throw Ec(e)},Ec=function(t){return new Error("Firebase Database ("+OM.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},I3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new T3;const h=s<<2|a>>4;if(r.push(h),u!==64){const f=a<<4&240|u>>2;if(r.push(f),d!==64){const p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class T3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MM=function(t){const e=DM(t);return hb.encodeByteArray(e,!0)},Ig=function(t){return MM(t).replace(/\./g,"")},Tg=function(t){try{return hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){return Ph(void 0,t)}function Ph(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!S3(n)||(t[n]=Ph(t[n],e[n]));return t}function S3(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=()=>C3().__FIREBASE_DEFAULTS__,x3=()=>{if(typeof process>"u"||typeof bx>"u")return;const t=bx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},A3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tg(t[1]);return e&&JSON.parse(e)},G_=()=>{try{return R3()||x3()||A3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LM=t=>{var e,n;return(n=(e=G_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$M=t=>{const e=LM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},FM=()=>{var t;return(t=G_())===null||t===void 0?void 0:t.config},VM=t=>{var e;return(e=G_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ig(JSON.stringify(n)),Ig(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function mb(){var t;const e=(t=G_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P3(){return typeof self=="object"&&self.self===self}function UM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Q_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jM(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BM(){return OM.NODE_ADMIN===!0}function k3(){return!mb()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kh(){try{return typeof indexedDB=="object"}catch{return!1}}function N3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3="FirebaseError";class kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=O3,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?D3(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kn(i,a,r)}}function D3(t,e){return t.replace(M3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const M3=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){return JSON.parse(t)}function Gt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Nh(Tg(s[0])||""),n=Nh(Tg(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},L3=function(t){const e=zM(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},$3=function(t){const e=zM(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Hu(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function kE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bg(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Sg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Sx(s)&&Sx(o)){if(!Sg(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Sx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Sd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,c;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):d<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const h=(i<<5|i>>>27)+u+l+c+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function WM(t,e){const n=new V3(t,e);return n.subscribe.bind(n)}class V3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");U3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$0),i.error===void 0&&(i.error=$0),i.complete===void 0&&(i.complete=$0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $0(){}function gb(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,j(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Y_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t){return t&&t._delegate?t._delegate:t}class ei{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new K_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W3(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z3(t){return t===ca?void 0:t}function W3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new B3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=[];var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const qM={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},H3=Te.INFO,G3={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},K3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=G3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lf{constructor(e){this.name=e,this._logLevel=H3,this._logHandler=K3,this._userLogHandler=null,_b.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}function Q3(t){_b.forEach(e=>{e.setLogLevel(t)})}function Y3(t,e){for(const n of _b){let r=null;e&&e.level&&(r=qM[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:Te[s].toLowerCase(),message:a,args:o,type:i.name})}}}const X3=(t,e)=>e.some(n=>t instanceof n);let Cx,Rx;function J3(){return Cx||(Cx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z3(){return Rx||(Rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HM=new WeakMap,NE=new WeakMap,GM=new WeakMap,F0=new WeakMap,yb=new WeakMap;function e9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_o(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&HM.set(n,t)}).catch(()=>{}),yb.set(e,t),e}function t9(t){if(NE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});NE.set(t,e)}let OE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return NE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _o(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function n9(t){OE=t(OE)}function r9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(V0(this),e,...n);return GM.set(r,e.sort?e.sort():[e]),_o(r)}:Z3().includes(t)?function(...e){return t.apply(V0(this),e),_o(HM.get(this))}:function(...e){return _o(t.apply(V0(this),e))}}function i9(t){return typeof t=="function"?r9(t):(t instanceof IDBTransaction&&t9(t),X3(t,J3())?new Proxy(t,OE):t)}function _o(t){if(t instanceof IDBRequest)return e9(t);if(F0.has(t))return F0.get(t);const e=i9(t);return e!==t&&(F0.set(t,e),yb.set(e,t)),e}const V0=t=>yb.get(t);function s9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=_o(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_o(o.result),l.oldVersion,l.newVersion,_o(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const o9=["get","getKey","getAll","getAllKeys","count"],a9=["put","add","delete","clear"],U0=new Map;function xx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(U0.get(e))return U0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=a9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o9.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return U0.set(e,s),s}n9(t=>({...t,get:(e,n,r)=>xx(e,n)||t.get(e,n,r),has:(e,n)=>!!xx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function u9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const DE="@firebase/app",Ax="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new Lf("@firebase/app"),c9="@firebase/app-compat",d9="@firebase/analytics-compat",h9="@firebase/analytics",f9="@firebase/app-check-compat",p9="@firebase/app-check",m9="@firebase/auth",g9="@firebase/auth-compat",_9="@firebase/database",y9="@firebase/database-compat",v9="@firebase/functions",w9="@firebase/functions-compat",E9="@firebase/installations",I9="@firebase/installations-compat",T9="@firebase/messaging",b9="@firebase/messaging-compat",S9="@firebase/performance",C9="@firebase/performance-compat",R9="@firebase/remote-config",x9="@firebase/remote-config-compat",A9="@firebase/storage",P9="@firebase/storage-compat",k9="@firebase/firestore",N9="@firebase/firestore-compat",O9="firebase",D9="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="[DEFAULT]",M9={[DE]:"fire-core",[c9]:"fire-core-compat",[h9]:"fire-analytics",[d9]:"fire-analytics-compat",[p9]:"fire-app-check",[f9]:"fire-app-check-compat",[m9]:"fire-auth",[g9]:"fire-auth-compat",[_9]:"fire-rtdb",[y9]:"fire-rtdb-compat",[v9]:"fire-fn",[w9]:"fire-fn-compat",[E9]:"fire-iid",[I9]:"fire-iid-compat",[T9]:"fire-fcm",[b9]:"fire-fcm-compat",[S9]:"fire-perf",[C9]:"fire-perf-compat",[R9]:"fire-rc",[x9]:"fire-rc-compat",[A9]:"fire-gcs",[P9]:"fire-gcs-compat",[k9]:"fire-fst",[N9]:"fire-fst-compat","fire-js":"fire-js",[O9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Map,Oh=new Map;function Cg(t,e){try{t.container.addComponent(e)}catch(n){Ja.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function KM(t,e){t.container.addOrOverwriteComponent(e)}function Xi(t){const e=t.name;if(Oh.has(e))return Ja.debug(`There were multiple attempts to register component ${e}.`),!1;Oh.set(e,t);for(const n of Ro.values())Cg(n,t);return!0}function Ic(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function L9(t,e,n=Co){Ic(t,e).clearInstance(n)}function $9(){Oh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ys=new wl("app","Firebase",F9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V9=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=D9;function X_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Co,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ys.create("bad-app-name",{appName:String(i)});if(n||(n=FM()),!n)throw ys.create("no-options");const s=Ro.get(i);if(s){if(Sg(n,s.options)&&Sg(r,s.config))return s;throw ys.create("duplicate-app",{appName:i})}const o=new q3(i);for(const l of Oh.values())o.addComponent(l);const a=new V9(n,r,o);return Ro.set(i,a),a}function J_(t=Co){const e=Ro.get(t);if(!e&&t===Co&&FM())return X_();if(!e)throw ys.create("no-app",{appName:t});return e}function U9(){return Array.from(Ro.values())}async function QM(t){const e=t.name;Ro.has(e)&&(Ro.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Wn(t,e,n){var r;let i=(r=M9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ja.warn(a.join(" "));return}Xi(new ei(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function YM(t,e){if(t!==null&&typeof t!="function")throw ys.create("invalid-log-argument");Y3(t,e)}function XM(t){Q3(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9="firebase-heartbeat-database",B9=1,Dh="firebase-heartbeat-store";let j0=null;function JM(){return j0||(j0=s9(j9,B9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Dh)}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),j0}async function z9(t){try{return await(await JM()).transaction(Dh).objectStore(Dh).get(ZM(t))}catch(e){if(e instanceof kn)Ja.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ja.warn(n.message)}}}async function Px(t,e){try{const r=(await JM()).transaction(Dh,"readwrite");await r.objectStore(Dh).put(e,ZM(t)),await r.done}catch(n){if(n instanceof kn)Ja.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ja.warn(r.message)}}}function ZM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=1024,q9=30*24*60*60*1e3;class H9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kx();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=q9}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kx(),{heartbeatsToSend:r,unsentEntries:i}=G9(this._heartbeatsCache.heartbeats),s=Ig(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function kx(){return new Date().toISOString().substring(0,10)}function G9(t,e=W9){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Nx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Nx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class K9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kh()?N3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Px(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Px(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Nx(t){return Ig(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q9(t){Xi(new ei("platform-logger",e=>new l9(e),"PRIVATE")),Xi(new ei("heartbeat",e=>new H9(e),"PRIVATE")),Wn(DE,Ax,t),Wn(DE,Ax,"esm2017"),Wn("fire-js","")}Q9("");const Y9=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:kn,SDK_VERSION:rs,_DEFAULT_ENTRY_NAME:Co,_addComponent:Cg,_addOrOverwriteComponent:KM,_apps:Ro,_clearComponents:$9,_components:Oh,_getProvider:Ic,_registerComponent:Xi,_removeServiceInstance:L9,deleteApp:QM,getApp:J_,getApps:U9,initializeApp:X_,onLog:YM,registerVersion:Wn,setLogLevel:XM},Symbol.toStringTag,{value:"Module"}));var X9="firebase",J9="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(X9,J9,"app");var Ox={};const Dx="@firebase/database",Mx="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eL="";function Z9(t){eL=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Gt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Nh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return bi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new eW(e)}}catch{}return new tW},Ca=tL("localStorage"),ME=tL("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new Lf("@firebase/database"),nW=function(){let t=1;return function(){return t++}}(),nL=function(t){const e=j3(t),n=new F3;n.update(e);const r=n.digest();return hb.encodeByteArray(r)},$f=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=$f.apply(null,r):typeof r=="object"?e+=Gt(r):e+=r,e+=" "}return e};let Fa=null,Lx=!0;const rW=function(t,e){j(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Su.logLevel=Te.VERBOSE,Fa=Su.log.bind(Su),e&&ME.set("logging_enabled",!0)):typeof t=="function"?Fa=t:(Fa=null,ME.remove("logging_enabled"))},Pn=function(...t){if(Lx===!0&&(Lx=!1,Fa===null&&ME.get("logging_enabled")===!0&&rW(!0)),Fa){const e=$f.apply(null,t);Fa(e)}},Ff=function(t){return function(...e){Pn(t,...e)}},LE=function(...t){const e="FIREBASE INTERNAL ERROR: "+$f(...t);Su.error(e)},Rs=function(...t){const e=`FIREBASE FATAL ERROR: ${$f(...t)}`;throw Su.error(e),new Error(e)},fr=function(...t){const e="FIREBASE WARNING: "+$f(...t);Su.warn(e)},iW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&fr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},rL=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},sW=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Gu="[MIN_NAME]",Za="[MAX_NAME]",Tc=function(t,e){if(t===e)return 0;if(t===Gu||e===Za)return-1;if(e===Gu||t===Za)return 1;{const n=$x(t),r=$x(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},oW=function(t,e){return t===e?0:t<e?-1:1},Jc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Gt(e))},vb=function(t){if(typeof t!="object"||t===null)return Gt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Gt(e[r]),n+=":",n+=vb(t[e[r]]);return n+="}",n},iL=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function _r(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const sL=function(t){j(!rL(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(c.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},aW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},lW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function uW(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const cW=new RegExp("^-?(0*)\\d{1,10}$"),dW=-2147483648,hW=2147483647,$x=function(t){if(cW.test(t)){const e=Number(t);if(e>=dW&&e<=hW)return e}return null},bc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw fr("Exception was thrown by user callback.",n),e},Math.floor(0))}},fW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Pn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fr(e)}}class Cu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Cu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="5",oL="v",aL="s",lL="r",uL="f",cL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dL="ls",hL="p",$E="ac",fL="websocket",pL="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ca.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ca.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function gW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function gL(t,e,n){j(typeof e=="string","typeof type must == string"),j(typeof n=="object","typeof params must == object");let r;if(e===fL)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===pL)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);gW(t)&&(n.ns=t.namespace);const i=[];return _r(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(){this.counters_={}}incrementCounter(e,n=1){bi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return b3(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0={},z0={};function Eb(t){const e=t.toString();return B0[e]||(B0[e]=new _W),B0[e]}function yW(t,e){const n=t.toString();return z0[n]||(z0[n]=e()),z0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&bc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="start",wW="close",EW="pLPCommand",IW="pRTLPCB",_L="id",yL="pw",vL="ser",TW="cb",bW="seg",SW="ts",CW="d",RW="dframe",wL=1870,EL=30,xW=wL-EL,AW=25e3,PW=3e4;class gu{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ff(e),this.stats_=Eb(n),this.urlFn=l=>(this.appCheckToken&&(l[$E]=this.appCheckToken),gL(n,pL,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new vW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(PW)),sW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ib((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Fx)this.id=a,this.password=l;else if(o===wW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Fx]="t",r[vL]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[TW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[oL]=wb,this.transportSessionId&&(r[aL]=this.transportSessionId),this.lastSessionId&&(r[dL]=this.lastSessionId),this.applicationId&&(r[hL]=this.applicationId),this.appCheckToken&&(r[$E]=this.appCheckToken),typeof location<"u"&&location.hostname&&cL.test(location.hostname)&&(r[lL]=uL);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gu.forceAllow_=!0}static forceDisallow(){gu.forceDisallow_=!0}static isAvailable(){return gu.forceAllow_?!0:!gu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!aW()&&!lW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Gt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=MM(n),i=iL(r,xW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[RW]="t",r[_L]=e,r[yL]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Gt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ib{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=nW(),window[EW+this.uniqueCallbackIdentifier]=e,window[IW+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ib.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Pn("frame writing exception"),a.stack&&Pn(a.stack),Pn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Pn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[_L]=this.myID,e[yL]=this.myPW,e[vL]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+EL+r.length<=wL;){const o=this.pendingSegs.shift();r=r+"&"+bW+i+"="+o.seg+"&"+SW+i+"="+o.ts+"&"+CW+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(AW)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Pn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW=16384,NW=45e3;let Rg=null;typeof MozWebSocket<"u"?Rg=MozWebSocket:typeof WebSocket<"u"&&(Rg=WebSocket);class fi{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ff(this.connId),this.stats_=Eb(n),this.connURL=fi.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[oL]=wb,typeof location<"u"&&location.hostname&&cL.test(location.hostname)&&(o[lL]=uL),n&&(o[aL]=n),r&&(o[dL]=r),i&&(o[$E]=i),s&&(o[hL]=s),gL(e,fL,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ca.set("previous_websocket_failure",!0);try{let r;BM(),this.mySock=new Rg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Rg!==null&&!fi.forceDisallow_}static previouslyFailed(){return Ca.isInMemoryStorage||Ca.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ca.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Nh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(j(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Gt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=iL(n,kW);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(NW))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fi.responsesRequiredToBeHealthy=2;fi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[gu,fi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=fi&&fi.isAvailable();let r=n&&!fi.previouslyFailed();if(e.webSocketOnly&&(n||fr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[fi];else{const i=this.transports_=[];for(const s of Mh.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Mh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Mh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OW=6e4,DW=5e3,MW=10*1024,LW=100*1024,W0="t",Vx="d",$W="s",Ux="r",FW="e",jx="o",Bx="a",zx="n",Wx="p",VW="h";class UW{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ff("c:"+this.id+":"),this.transportManager_=new Mh(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>LW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>MW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(W0 in e){const n=e[W0];n===Bx?this.upgradeIfSecondaryHealthy_():n===Ux?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===jx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Jc("t",e),r=Jc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Wx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Bx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Jc("t",e),r=Jc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Jc(W0,e);if(Vx in e){const r=e[Vx];if(n===VW){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===zx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===$W?this.onConnectionShutdown_(r):n===Ux?this.onReset_(r):n===FW?LE("Server Error: "+r):n===jx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):LE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wb!==r&&fr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(OW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Wx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ca.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.allowedEvents_=e,this.listeners_={},j(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){j(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends TL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!pb()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xg}getInitialEvent(e){return j(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=32,Hx=768;class Je{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ve(){return new Je("")}function Ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function xo(t){return t.pieces_.length-t.pieceNum_}function tt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Je(t.pieces_,e)}function bL(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function jW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function SL(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function CL(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Je(e,0)}function Kt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Je)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Je(n,0)}function Se(t){return t.pieceNum_>=t.pieces_.length}function jn(t,e){const n=Ce(t),r=Ce(e);if(n===null)return e;if(n===r)return jn(tt(t),tt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function RL(t,e){if(xo(t)!==xo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function mi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(xo(t)>xo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class BW{constructor(e,n){this.errorPrefix_=n,this.parts_=SL(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Y_(this.parts_[r]);xL(this)}}function zW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Y_(e),xL(t)}function WW(t){const e=t.parts_.pop();t.byteLength_-=Y_(e),t.parts_.length>0&&(t.byteLength_-=1)}function xL(t){if(t.byteLength_>Hx)throw new Error(t.errorPrefix_+"has a key path longer than "+Hx+" bytes ("+t.byteLength_+").");if(t.parts_.length>qx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qx+") or object contains a cycle "+da(t))}function da(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends TL{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Tb}getInitialEvent(e){return j(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=1e3,qW=60*5*1e3,Gx=30*1e3,HW=1.3,GW=3e4,KW="server_kill",Kx=3;class vs extends IL{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=vs.nextPersistentConnectionId_++,this.log_=Ff("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zc,this.maxReconnectDelay_=qW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!BM())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tb.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&xg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Gt(s)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new K_,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;vs.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&bi(e,"w")){const r=Hu(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();fr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||$3(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Gx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=L3(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Gt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):LE("Unrecognized action received from server: "+Gt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>GW&&(this.reconnectDelay_=Zc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*HW)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+vs.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(d){j(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Pn("getToken() completed but was canceled"):(Pn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new UW(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{fr(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(KW)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&fr(d),l())}}}interrupt(e){Pn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Pn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kE(this.interruptReasons_)&&(this.reconnectDelay_=Zc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>vb(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Je(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Pn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Kx&&(this.reconnectDelay_=Gx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Pn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Kx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+eL.replace(/\./g,"-")]=1,pb()?e["framework.cordova"]=1:Q_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=xg.getInstance().currentlyOnline();return kE(this.interruptReasons_)&&e}}vs.nextPersistentConnectionId_=0;vs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new be(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new be(Gu,e),i=new be(Gu,n);return this.compare(r,i)!==0}minPost(){return be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp;class AL extends Z_{static get __EMPTY_NODE(){return qp}static set __EMPTY_NODE(e){qp=e}compare(e,n){return Tc(e.name,n.name)}isDefinedOn(e){throw Ec("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return be.MIN}maxPost(){return new be(Za,qp)}makePost(e,n){return j(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,qp)}toString(){return".key"}}const Ru=new AL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hp=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ir=class Cd{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Cd.RED,this.left=i??Ui.EMPTY_NODE,this.right=s??Ui.EMPTY_NODE}copy(e,n,r,i,s){return new Cd(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ui.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ui.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Cd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Cd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Ir.RED=!0;Ir.BLACK=!1;class QW{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ir(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Ui=class Rm{constructor(e,n=Rm.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Rm(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ir.BLACK,null,null))}remove(e){return new Rm(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ir.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Hp(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Hp(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Hp(this.root_,null,this.comparator_,!0,e)}};Ui.EMPTY_NODE=new QW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(t,e){return Tc(t.name,e.name)}function bb(t,e){return Tc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FE;function XW(t){FE=t}const PL=function(t){return typeof t=="number"?"number:"+sL(t):"string:"+t},kL=function(t){if(t.isLeafNode()){const e=t.val();j(typeof e=="string"||typeof e=="number"||typeof e=="object"&&bi(e,".sv"),"Priority must be a string or number.")}else j(t===FE||t.isEmpty(),"priority of unexpected type.");j(t===FE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qx;class Zt{constructor(e,n=Zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),kL(this.priorityNode_)}static set __childrenNodeConstructor(e){Qx=e}static get __childrenNodeConstructor(){return Qx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Zt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Zt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Se(e)?this:Ce(e)===".priority"?this.priorityNode_:Zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ce(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(j(r!==".priority"||xo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(tt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+PL(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=sL(this.value_):e+=this.value_,this.lazyHash_=nL(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Zt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Zt.__childrenNodeConstructor?-1:(j(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Zt.VALUE_TYPE_ORDER.indexOf(n),s=Zt.VALUE_TYPE_ORDER.indexOf(r);return j(i>=0,"Unknown leaf type: "+n),j(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NL,OL;function JW(t){NL=t}function ZW(t){OL=t}class eq extends Z_{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Tc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return be.MIN}maxPost(){return new be(Za,new Zt("[PRIORITY-POST]",OL))}makePost(e,n){const r=NL(e);return new be(n,new Zt("[PRIORITY-POST]",r))}toString(){return".priority"}}const xt=new eq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq=Math.log(2);class nq{constructor(e){const n=s=>parseInt(Math.log(s)/tq,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ag=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let d,h;if(c===0)return null;if(c===1)return d=t[l],h=n?n(d):d,new Ir(h,d.node,Ir.BLACK,null,null);{const f=parseInt(c/2,10)+l,p=i(l,f),g=i(f+1,u);return d=t[f],h=n?n(d):d,new Ir(h,d.node,Ir.BLACK,p,g)}},s=function(l){let u=null,c=null,d=t.length;const h=function(p,g){const v=d-p,m=d;d-=p;const _=i(v+1,m),y=t[v],E=n?n(y):y;f(new Ir(E,y.node,g,null,_))},f=function(p){u?(u.left=p,u=p):(c=p,u=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),v=Math.pow(2,l.count-(p+1));g?h(v,Ir.BLACK):(h(v,Ir.BLACK),h(v,Ir.RED))}return c},o=new nq(t.length),a=s(o);return new Ui(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q0;const $l={};class fs{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return j($l&&xt,"ChildrenNode.ts has not been loaded"),q0=q0||new fs({".priority":$l},{".priority":xt}),q0}get(e){const n=Hu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ui?n:null}hasIndex(e){return bi(this.indexSet_,e.toString())}addIndex(e,n){j(e!==Ru,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(be.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Ag(r,e.getCompare()):a=$l;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new fs(c,u)}addToIndexes(e,n){const r=bg(this.indexes_,(i,s)=>{const o=Hu(this.indexSet_,s);if(j(o,"Missing index implementation for "+s),i===$l)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(be.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Ag(a,o.getCompare())}else return $l;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new be(e.name,a))),l.insert(e,e.node)}});return new fs(r,this.indexSet_)}removeFromIndexes(e,n){const r=bg(this.indexes_,i=>{if(i===$l)return i;{const s=n.get(e.name);return s?i.remove(new be(e.name,s)):i}});return new fs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed;class de{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&kL(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ed||(ed=new de(new Ui(bb),null,fs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ed}updatePriority(e){return this.children_.isEmpty()?this:new de(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ed:n}}getChild(e){const n=Ce(e);return n===null?this:this.getImmediateChild(n).getChild(tt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(j(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new be(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ed:this.priorityNode_;return new de(i,o,s)}}updateChild(e,n){const r=Ce(e);if(r===null)return n;{j(Ce(e)!==".priority"||xo(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(tt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(xt,(o,a)=>{n[o]=a.val(e),r++,s&&de.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+PL(this.getPriority().val())+":"),this.forEachChild(xt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":nL(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new be(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new be(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new be(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,be.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,be.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Vf?-1:0}withIndex(e){if(e===Ru||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new de(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ru||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(xt),i=n.getIterator(xt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ru?null:this.indexMap_.get(e.toString())}}de.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class rq extends de{constructor(){super(new Ui(bb),de.EMPTY_NODE,fs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return de.EMPTY_NODE}isEmpty(){return!1}}const Vf=new rq;Object.defineProperties(be,{MIN:{value:new be(Gu,de.EMPTY_NODE)},MAX:{value:new be(Za,Vf)}});AL.__EMPTY_NODE=de.EMPTY_NODE;Zt.__childrenNodeConstructor=de;XW(Vf);ZW(Vf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq=!0;function rn(t,e=null){if(t===null)return de.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),j(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Zt(n,rn(e))}if(!(t instanceof Array)&&iq){const n=[];let r=!1;if(_r(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=rn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new be(o,l)))}}),n.length===0)return de.EMPTY_NODE;const s=Ag(n,YW,o=>o.name,bb);if(r){const o=Ag(n,xt.getCompare());return new de(s,rn(e),new fs({".priority":o},{".priority":xt}))}else return new de(s,rn(e),fs.Default)}else{let n=de.EMPTY_NODE;return _r(t,(r,i)=>{if(bi(t,r)&&r.substring(0,1)!=="."){const s=rn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(rn(e))}}JW(rn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq extends Z_{constructor(e){super(),this.indexPath_=e,j(!Se(e)&&Ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Tc(e.name,n.name):s}makePost(e,n){const r=rn(e),i=de.EMPTY_NODE.updateChild(this.indexPath_,r);return new be(n,i)}maxPost(){const e=de.EMPTY_NODE.updateChild(this.indexPath_,Vf);return new be(Za,e)}toString(){return SL(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq extends Z_{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Tc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,n){const r=rn(e);return new be(n,r)}toString(){return".value"}}const aq=new oq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){return{type:"value",snapshotNode:t}}function Ku(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Lh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $h(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function lq(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){j(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Lh(n,a)):j(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ku(n,r)):o.trackChildChange($h(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(xt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Lh(i,s))}),n.isLeafNode()||n.forEachChild(xt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange($h(i,s,o))}else r.trackChildChange(Ku(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?de.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.indexedFilter_=new Sb(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Fh.getStartPost_(e),this.endPost_=Fh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new be(n,r))||(r=de.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=de.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(de.EMPTY_NODE);const s=this;return n.forEachChild(xt,(o,a)=>{s.matches(new be(o,a))||(i=i.updateImmediateChild(o,de.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Fh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new be(n,r))||(r=de.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=de.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=de.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(de.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,de.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;j(a.numChildren()===this.limit_,"");const l=new be(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,l);if(c&&!r.isEmpty()&&f>=0)return s!=null&&s.trackChildChange($h(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Lh(n,d));const g=a.updateImmediateChild(n,de.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(Ku(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:c&&o(u,l)>=0?(s!=null&&(s.trackChildChange(Lh(u.name,u.node)),s.trackChildChange(Ku(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,de.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gu}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Za}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xt}copy(){const e=new Cb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cq(t){return t.loadsAllData()?new Sb(t.getIndex()):t.hasLimit()?new uq(t):new Fh(t)}function Yx(t){const e={};if(t.isDefault())return e;let n;if(t.index_===xt?n="$priority":t.index_===aq?n="$value":t.index_===Ru?n="$key":(j(t.index_ instanceof sq,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Gt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Gt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Gt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Gt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Gt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Xx(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==xt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends IL{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ff("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(j(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Pg.getListenId_(e,r),a={};this.listens_[o]=a;const l=Yx(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Hu(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){const r=Pg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Yx(e._queryParams),r=e._path.toString(),i=new K_;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+El(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Nh(a.responseText)}catch{fr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&fr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(){this.rootNode_=de.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(){return{value:null,children:new Map}}function ML(t,e,n){if(Se(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ce(e);t.children.has(r)||t.children.set(r,kg());const i=t.children.get(r);e=tt(e),ML(i,e,n)}}function VE(t,e,n){t.value!==null?n(e,t.value):hq(t,(r,i)=>{const s=new Je(e.toString()+"/"+r);VE(i,s,n)})}function hq(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_r(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=10*1e3,pq=30*1e3,mq=5*60*1e3;class gq{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new fq(e);const r=Jx+(pq-Jx)*Math.random();qd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;_r(e,(i,s)=>{s>0&&bi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),qd(this.reportStats_.bind(this),Math.floor(Math.random()*2*mq))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(gi||(gi={}));function LL(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Rb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xb(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=gi.ACK_USER_WRITE,this.source=LL()}operationForChild(e){if(Se(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Je(e));return new Ng(Ve(),n,this.revert)}}else return j(Ce(this.path)===e,"operationForChild called for unrelated child."),new Ng(tt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.source=e,this.path=n,this.type=gi.LISTEN_COMPLETE}operationForChild(e){return Se(this.path)?new Vh(this.source,Ve()):new Vh(this.source,tt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=gi.OVERWRITE}operationForChild(e){return Se(this.path)?new el(this.source,Ve(),this.snap.getImmediateChild(e)):new el(this.source,tt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=gi.MERGE}operationForChild(e){if(Se(this.path)){const n=this.children.subtree(new Je(e));return n.isEmpty()?null:n.value?new el(this.source,Ve(),n.value):new Uh(this.source,Ve(),n)}else return j(Ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Uh(this.source,tt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Se(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yq(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(lq(o.childName,o.snapshotNode))}),td(t,i,"child_removed",e,r,n),td(t,i,"child_added",e,r,n),td(t,i,"child_moved",s,r,n),td(t,i,"child_changed",e,r,n),td(t,i,"value",e,r,n),i}function td(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>wq(t,a,l)),o.forEach(a=>{const l=vq(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function vq(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function wq(t,e,n){if(e.childName==null||n.childName==null)throw Ec("Should only compare child_ events.");const r=new be(e.childName,e.snapshotNode),i=new be(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e){return{eventCache:t,serverCache:e}}function Hd(t,e,n,r){return ey(new Ao(e,n,r),t.serverCache)}function $L(t,e,n,r){return ey(t.eventCache,new Ao(e,n,r))}function Og(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function tl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H0;const Eq=()=>(H0||(H0=new Ui(oW)),H0);class lt{constructor(e,n=Eq()){this.value=e,this.children=n}static fromObject(e){let n=new lt(null);return _r(e,(r,i)=>{n=n.set(new Je(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ve(),value:this.value};if(Se(e))return null;{const r=Ce(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(tt(e),n);return s!=null?{path:Kt(new Je(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Se(e))return this;{const n=Ce(e),r=this.children.get(n);return r!==null?r.subtree(tt(e)):new lt(null)}}set(e,n){if(Se(e))return new lt(n,this.children);{const r=Ce(e),s=(this.children.get(r)||new lt(null)).set(tt(e),n),o=this.children.insert(r,s);return new lt(this.value,o)}}remove(e){if(Se(e))return this.children.isEmpty()?new lt(null):new lt(null,this.children);{const n=Ce(e),r=this.children.get(n);if(r){const i=r.remove(tt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new lt(null):new lt(this.value,s)}else return this}}get(e){if(Se(e))return this.value;{const n=Ce(e),r=this.children.get(n);return r?r.get(tt(e)):null}}setTree(e,n){if(Se(e))return n;{const r=Ce(e),s=(this.children.get(r)||new lt(null)).setTree(tt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new lt(this.value,o)}}fold(e){return this.fold_(Ve(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Kt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ve(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Se(e))return null;{const s=Ce(e),o=this.children.get(s);return o?o.findOnPath_(tt(e),Kt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ve(),n)}foreachOnPath_(e,n,r){if(Se(e))return this;{this.value&&r(n,this.value);const i=Ce(e),s=this.children.get(i);return s?s.foreachOnPath_(tt(e),Kt(n,i),r):new lt(null)}}foreach(e){this.foreach_(Ve(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Kt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.writeTree_=e}static empty(){return new wi(new lt(null))}}function Gd(t,e,n){if(Se(e))return new wi(new lt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=jn(i,e);return s=s.updateChild(o,n),new wi(t.writeTree_.set(i,s))}else{const i=new lt(n),s=t.writeTree_.setTree(e,i);return new wi(s)}}}function Zx(t,e,n){let r=t;return _r(n,(i,s)=>{r=Gd(r,Kt(e,i),s)}),r}function eA(t,e){if(Se(e))return wi.empty();{const n=t.writeTree_.setTree(e,new lt(null));return new wi(n)}}function UE(t,e){return Il(t,e)!=null}function Il(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(jn(n.path,e)):null}function tA(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(xt,(r,i)=>{e.push(new be(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new be(r,i.value))}),e}function yo(t,e){if(Se(e))return t;{const n=Il(t,e);return n!=null?new wi(new lt(n)):new wi(t.writeTree_.subtree(e))}}function jE(t){return t.writeTree_.isEmpty()}function Qu(t,e){return FL(Ve(),t.writeTree_,e)}function FL(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(j(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=FL(Kt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Kt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e){return BL(e,t)}function Iq(t,e,n,r,i){j(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Gd(t.visibleWrites,e,n)),t.lastWriteId=r}function Tq(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function bq(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);j(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Sq(a,r.path)?i=!1:mi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Cq(t),!0;if(r.snap)t.visibleWrites=eA(t.visibleWrites,r.path);else{const a=r.children;_r(a,l=>{t.visibleWrites=eA(t.visibleWrites,Kt(r.path,l))})}return!0}else return!1}function Sq(t,e){if(t.snap)return mi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mi(Kt(t.path,n),e))return!0;return!1}function Cq(t){t.visibleWrites=VL(t.allWrites,Rq,Ve()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Rq(t){return t.visible}function VL(t,e,n){let r=wi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)mi(n,o)?(a=jn(n,o),r=Gd(r,a,s.snap)):mi(o,n)&&(a=jn(o,n),r=Gd(r,Ve(),s.snap.getChild(a)));else if(s.children){if(mi(n,o))a=jn(n,o),r=Zx(r,a,s.children);else if(mi(o,n))if(a=jn(o,n),Se(a))r=Zx(r,Ve(),s.children);else{const l=Hu(s.children,Ce(a));if(l){const u=l.getChild(tt(a));r=Gd(r,Ve(),u)}}}else throw Ec("WriteRecord should have .snap or .children")}}return r}function UL(t,e,n,r,i){if(!r&&!i){const s=Il(t.visibleWrites,e);if(s!=null)return s;{const o=yo(t.visibleWrites,e);if(jE(o))return n;if(n==null&&!UE(o,Ve()))return null;{const a=n||de.EMPTY_NODE;return Qu(o,a)}}}else{const s=yo(t.visibleWrites,e);if(!i&&jE(s))return n;if(!i&&n==null&&!UE(s,Ve()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(mi(u.path,e)||mi(e,u.path))},a=VL(t.allWrites,o,e),l=n||de.EMPTY_NODE;return Qu(a,l)}}}function xq(t,e,n){let r=de.EMPTY_NODE;const i=Il(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(xt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=yo(t.visibleWrites,e);return n.forEachChild(xt,(o,a)=>{const l=Qu(yo(s,new Je(o)),a);r=r.updateImmediateChild(o,l)}),tA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=yo(t.visibleWrites,e);return tA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Aq(t,e,n,r,i){j(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Kt(e,n);if(UE(t.visibleWrites,s))return null;{const o=yo(t.visibleWrites,s);return jE(o)?i.getChild(n):Qu(o,i.getChild(n))}}function Pq(t,e,n,r){const i=Kt(e,n),s=Il(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=yo(t.visibleWrites,i);return Qu(o,r.getNode().getImmediateChild(n))}else return null}function kq(t,e){return Il(t.visibleWrites,e)}function Nq(t,e,n,r,i,s,o){let a;const l=yo(t.visibleWrites,e),u=Il(l,Ve());if(u!=null)a=u;else if(n!=null)a=Qu(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const c=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&c.length<i;)d(f,r)!==0&&c.push(f),f=h.getNext();return c}else return[]}function Oq(){return{visibleWrites:wi.empty(),allWrites:[],lastWriteId:-1}}function Dg(t,e,n,r){return UL(t.writeTree,t.treePath,e,n,r)}function Ab(t,e){return xq(t.writeTree,t.treePath,e)}function nA(t,e,n,r){return Aq(t.writeTree,t.treePath,e,n,r)}function Mg(t,e){return kq(t.writeTree,Kt(t.treePath,e))}function Dq(t,e,n,r,i,s){return Nq(t.writeTree,t.treePath,e,n,r,i,s)}function Pb(t,e,n){return Pq(t.writeTree,t.treePath,e,n)}function jL(t,e){return BL(Kt(t.treePath,e),t.writeTree)}function BL(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;j(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),j(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,$h(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Lh(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ku(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,$h(r,e.snapshotNode,i.oldSnap));else throw Ec("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const zL=new Lq;class kb{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ao(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Pb(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:tl(this.viewCache_),s=Dq(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(t){return{filter:t}}function Fq(t,e){j(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),j(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Vq(t,e,n,r,i){const s=new Mq;let o,a;if(n.type===gi.OVERWRITE){const u=n;u.source.fromUser?o=BE(t,e,u.path,u.snap,r,i,s):(j(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Se(u.path),o=Lg(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===gi.MERGE){const u=n;u.source.fromUser?o=jq(t,e,u.path,u.children,r,i,s):(j(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=zE(t,e,u.path,u.children,r,i,a,s))}else if(n.type===gi.ACK_USER_WRITE){const u=n;u.revert?o=Wq(t,e,u.path,r,i,s):o=Bq(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===gi.LISTEN_COMPLETE)o=zq(t,e,n.path,r,s);else throw Ec("Unknown operation type: "+n.type);const l=s.getChanges();return Uq(e,o,l),{viewCache:o,changes:l}}function Uq(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Og(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(DL(Og(e)))}}function WL(t,e,n,r,i,s){const o=e.eventCache;if(Mg(r,n)!=null)return e;{let a,l;if(Se(n))if(j(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=tl(e),c=u instanceof de?u:de.EMPTY_NODE,d=Ab(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Dg(r,tl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Ce(n);if(u===".priority"){j(xo(n)===1,"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const d=nA(r,n,c,l);d!=null?a=t.filter.updatePriority(c,d):a=o.getNode()}else{const c=tt(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const h=nA(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(u).updateChild(c,h):d=o.getNode().getImmediateChild(u)}else d=Pb(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,c,i,s):a=o.getNode()}}return Hd(e,a,o.isFullyInitialized()||Se(n),t.filter.filtersNodes())}}function Lg(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(Se(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),f,null)}else{const f=Ce(n);if(!l.isCompleteForPath(n)&&xo(n)>1)return e;const p=tt(n),v=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?u=c.updatePriority(l.getNode(),v):u=c.updateChild(l.getNode(),f,v,p,zL,null)}const d=$L(e,u,l.isFullyInitialized()||Se(n),c.filtersNodes()),h=new kb(i,d,s);return WL(t,d,n,i,h,a)}function BE(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new kb(i,e,s);if(Se(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Hd(e,u,!0,t.filter.filtersNodes());else{const d=Ce(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=Hd(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=tt(n),f=a.getNode().getImmediateChild(d);let p;if(Se(h))p=r;else{const g=c.getCompleteChild(d);g!=null?bL(h)===".priority"&&g.getChild(CL(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=de.EMPTY_NODE}if(f.equals(p))l=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,c,o);l=Hd(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function rA(t,e){return t.eventCache.isCompleteForChild(e)}function jq(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=Kt(n,l);rA(e,Ce(c))&&(a=BE(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=Kt(n,l);rA(e,Ce(c))||(a=BE(t,a,c,u,i,s,o))}),a}function iA(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function zE(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Se(n)?u=r:u=new lt(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=iA(t,f,h);l=Lg(t,l,new Je(d),p,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!c.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=iA(t,p,h);l=Lg(t,l,new Je(d),g,i,s,o,a)}}),l}function Bq(t,e,n,r,i,s,o){if(Mg(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Se(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Lg(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Se(n)){let u=new lt(null);return l.getNode().forEachChild(Ru,(c,d)=>{u=u.set(new Je(c),d)}),zE(t,e,n,u,i,s,a,o)}else return e}else{let u=new lt(null);return r.foreach((c,d)=>{const h=Kt(n,c);l.isCompleteForPath(h)&&(u=u.set(c,l.getNode().getChild(h)))}),zE(t,e,n,u,i,s,a,o)}}function zq(t,e,n,r,i){const s=e.serverCache,o=$L(e,s.getNode(),s.isFullyInitialized()||Se(n),s.isFiltered());return WL(t,o,n,r,zL,i)}function Wq(t,e,n,r,i,s){let o;if(Mg(r,n)!=null)return e;{const a=new kb(r,e,i),l=e.eventCache.getNode();let u;if(Se(n)||Ce(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=Dg(r,tl(e));else{const d=e.serverCache.getNode();j(d instanceof de,"serverChildren would be complete if leaf node"),c=Ab(r,d)}c=c,u=t.filter.updateFullNode(l,c,s)}else{const c=Ce(n);let d=Pb(r,c,e.serverCache);d==null&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),d!=null?u=t.filter.updateChild(l,c,d,tt(n),a,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,de.EMPTY_NODE,tt(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Dg(r,tl(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Mg(r,Ve())!=null,Hd(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Sb(r.getIndex()),s=cq(r);this.processor_=$q(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(de.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(de.EMPTY_NODE,a.getNode(),null),c=new Ao(l,o.isFullyInitialized(),i.filtersNodes()),d=new Ao(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=ey(d,c),this.eventGenerator_=new _q(this.query_)}get query(){return this.query_}}function Hq(t){return t.viewCache_.serverCache.getNode()}function Gq(t){return Og(t.viewCache_)}function Kq(t,e){const n=tl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Se(e)&&!n.getImmediateChild(Ce(e)).isEmpty())?n.getChild(e):null}function sA(t){return t.eventRegistrations_.length===0}function Qq(t,e){t.eventRegistrations_.push(e)}function oA(t,e,n){const r=[];if(n){j(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function aA(t,e,n,r){e.type===gi.MERGE&&e.source.queryId!==null&&(j(tl(t.viewCache_),"We should always have a full cache before handling merges"),j(Og(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Vq(t.processor_,i,e,n,r);return Fq(t.processor_,s.viewCache),j(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,qL(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Yq(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xt,(s,o)=>{r.push(Ku(s,o))}),n.isFullyInitialized()&&r.push(DL(n.getNode())),qL(t,r,n.getNode(),e)}function qL(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return yq(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g;class HL{constructor(){this.views=new Map}}function Xq(t){j(!$g,"__referenceConstructor has already been defined"),$g=t}function Jq(){return j($g,"Reference.ts has not been loaded"),$g}function Zq(t){return t.views.size===0}function Nb(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return j(s!=null,"SyncTree gave us an op for an invalid query."),aA(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(aA(o,e,n,r));return s}}function GL(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Dg(n,i?r:null),l=!1;a?l=!0:r instanceof de?(a=Ab(n,r),l=!1):(a=de.EMPTY_NODE,l=!1);const u=ey(new Ao(a,l,!1),new Ao(r,i,!1));return new qq(e,u)}return o}function e8(t,e,n,r,i,s){const o=GL(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Qq(o,n),Yq(o,n)}function t8(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Po(t);if(i==="default")for(const[l,u]of t.views.entries())o=o.concat(oA(u,n,r)),sA(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(oA(l,n,r)),sA(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Po(t)&&s.push(new(Jq())(e._repo,e._path)),{removed:s,events:o}}function KL(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function vo(t,e){let n=null;for(const r of t.views.values())n=n||Kq(r,e);return n}function QL(t,e){if(e._queryParams.loadsAllData())return ny(t);{const r=e._queryIdentifier;return t.views.get(r)}}function YL(t,e){return QL(t,e)!=null}function Po(t){return ny(t)!=null}function ny(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg;function n8(t){j(!Fg,"__referenceConstructor has already been defined"),Fg=t}function r8(){return j(Fg,"Reference.ts has not been loaded"),Fg}let i8=1;class lA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lt(null),this.pendingWriteTree_=Oq(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function XL(t,e,n,r,i){return Iq(t.pendingWriteTree_,e,n,r,i),i?jf(t,new el(LL(),e,n)):[]}function Ra(t,e,n=!1){const r=Tq(t.pendingWriteTree_,e);if(bq(t.pendingWriteTree_,e)){let s=new lt(null);return r.snap!=null?s=s.set(Ve(),!0):_r(r.children,o=>{s=s.set(new Je(o),!0)}),jf(t,new Ng(r.path,s,n))}else return[]}function Uf(t,e,n){return jf(t,new el(Rb(),e,n))}function s8(t,e,n){const r=lt.fromObject(n);return jf(t,new Uh(Rb(),e,r))}function o8(t,e){return jf(t,new Vh(Rb(),e))}function a8(t,e,n){const r=Db(t,n);if(r){const i=Mb(r),s=i.path,o=i.queryId,a=jn(s,e),l=new Vh(xb(o),a);return Lb(t,s,l)}else return[]}function JL(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||YL(o,e))){const l=t8(o,e,n,r);Zq(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const c=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>Po(f));if(c&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=d8(h);for(let p=0;p<f.length;++p){const g=f[p],v=g.query,m=n2(t,g);t.listenProvider_.startListening(Kd(v),jh(t,v),m.hashFn,m.onComplete)}}}!d&&u.length>0&&!r&&(c?t.listenProvider_.stopListening(Kd(e),null):u.forEach(h=>{const f=t.queryToTagMap.get(ry(h));t.listenProvider_.stopListening(Kd(h),f)}))}h8(t,u)}return a}function ZL(t,e,n,r){const i=Db(t,r);if(i!=null){const s=Mb(i),o=s.path,a=s.queryId,l=jn(o,e),u=new el(xb(a),l,n);return Lb(t,o,u)}else return[]}function l8(t,e,n,r){const i=Db(t,r);if(i){const s=Mb(i),o=s.path,a=s.queryId,l=jn(o,e),u=lt.fromObject(n),c=new Uh(xb(a),l,u);return Lb(t,o,c)}else return[]}function u8(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{const p=jn(h,i);s=s||vo(f,p),o=o||Po(f)});let a=t.syncPointTree_.get(i);a?(o=o||Po(a),s=s||vo(a,Ve())):(a=new HL,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=de.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{const g=vo(p,Ve());g&&(s=s.updateImmediateChild(f,g))}));const u=YL(a,e);if(!u&&!e._queryParams.loadsAllData()){const h=ry(e);j(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=f8();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const c=ty(t.pendingWriteTree_,i);let d=e8(a,e,n,c,s,l);if(!u&&!o&&!r){const h=QL(a,e);d=d.concat(p8(t,e,h))}return d}function Ob(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=jn(o,e),u=vo(a,l);if(u)return u});return UL(i,e,s,n,!0)}function c8(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,c)=>{const d=jn(u,n);r=r||vo(c,d)});let i=t.syncPointTree_.get(n);i?r=r||vo(i,Ve()):(i=new HL,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Ao(r,!0,!1):null,a=ty(t.pendingWriteTree_,e._path),l=GL(i,e,a,s?o.getNode():de.EMPTY_NODE,s);return Gq(l)}function jf(t,e){return e2(e,t.syncPointTree_,null,ty(t.pendingWriteTree_,Ve()))}function e2(t,e,n,r){if(Se(t.path))return t2(t,e,n,r);{const i=e.get(Ve());n==null&&i!=null&&(n=vo(i,Ve()));let s=[];const o=Ce(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=jL(r,o);s=s.concat(e2(a,l,u,c))}return i&&(s=s.concat(Nb(i,t,r,n))),s}}function t2(t,e,n,r){const i=e.get(Ve());n==null&&i!=null&&(n=vo(i,Ve()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=jL(r,o),c=t.operationForChild(o);c&&(s=s.concat(t2(c,a,l,u)))}),i&&(s=s.concat(Nb(i,t,r,n))),s}function n2(t,e){const n=e.query,r=jh(t,n);return{hashFn:()=>(Hq(e)||de.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?a8(t,n._path,r):o8(t,n._path);{const s=uW(i,n);return JL(t,n,null,s)}}}}function jh(t,e){const n=ry(e);return t.queryToTagMap.get(n)}function ry(t){return t._path.toString()+"$"+t._queryIdentifier}function Db(t,e){return t.tagToQueryMap.get(e)}function Mb(t){const e=t.indexOf("$");return j(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Je(t.substr(0,e))}}function Lb(t,e,n){const r=t.syncPointTree_.get(e);j(r,"Missing sync point for query tag that we're tracking");const i=ty(t.pendingWriteTree_,e);return Nb(r,n,i,null)}function d8(t){return t.fold((e,n,r)=>{if(n&&Po(n))return[ny(n)];{let i=[];return n&&(i=KL(n)),_r(r,(s,o)=>{i=i.concat(o)}),i}})}function Kd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(r8())(t._repo,t._path):t}function h8(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=ry(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function f8(){return i8++}function p8(t,e,n){const r=e._path,i=jh(t,e),s=n2(t,n),o=t.listenProvider_.startListening(Kd(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)j(!Po(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,c,d)=>{if(!Se(u)&&c&&Po(c))return[ny(c).query];{let h=[];return c&&(h=h.concat(KL(c).map(f=>f.query))),_r(d,(f,p)=>{h=h.concat(p)}),h}});for(let u=0;u<l.length;++u){const c=l[u];t.listenProvider_.stopListening(Kd(c),jh(t,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new $b(n)}node(){return this.node_}}class Fb{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Kt(this.path_,e);return new Fb(this.syncTree_,n)}node(){return Ob(this.syncTree_,this.path_)}}const m8=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},uA=function(t,e,n){if(!t||typeof t!="object")return t;if(j(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return g8(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _8(t[".sv"],e);j(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},g8=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:j(!1,"Unexpected server value: "+t)}},_8=function(t,e,n){t.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&j(!1,"Unexpected increment value: "+r);const i=e.node();if(j(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},y8=function(t,e,n,r){return Vb(e,new Fb(n,t),r)},r2=function(t,e,n){return Vb(t,new $b(e),n)};function Vb(t,e,n){const r=t.getPriority().val(),i=uA(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=uA(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Zt(a,rn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Zt(i))),o.forEachChild(xt,(a,l)=>{const u=Vb(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function jb(t,e){let n=e instanceof Je?e:new Je(e),r=t,i=Ce(n);for(;i!==null;){const s=Hu(r.node.children,i)||{children:{},childCount:0};r=new Ub(i,r,s),n=tt(n),i=Ce(n)}return r}function Sc(t){return t.node.value}function i2(t,e){t.node.value=e,WE(t)}function s2(t){return t.node.childCount>0}function v8(t){return Sc(t)===void 0&&!s2(t)}function iy(t,e){_r(t.node.children,(n,r)=>{e(new Ub(n,t,r))})}function o2(t,e,n,r){n&&!r&&e(t),iy(t,i=>{o2(i,e,!0,r)}),n&&r&&e(t)}function w8(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Bf(t){return new Je(t.parent===null?t.name:Bf(t.parent)+"/"+t.name)}function WE(t){t.parent!==null&&E8(t.parent,t.name,t)}function E8(t,e,n){const r=v8(n),i=bi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,WE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,WE(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=/[\[\].#$\/\u0000-\u001F\u007F]/,T8=/[\[\].#$\u0000-\u001F\u007F]/,G0=10*1024*1024,a2=function(t){return typeof t=="string"&&t.length!==0&&!I8.test(t)},l2=function(t){return typeof t=="string"&&t.length!==0&&!T8.test(t)},b8=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),l2(t)},u2=function(t,e,n,r){r&&e===void 0||Bb(gb(t,"value"),e,n)},Bb=function(t,e,n){const r=n instanceof Je?new BW(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+da(r));if(typeof e=="function")throw new Error(t+"contains a function "+da(r)+" with contents = "+e.toString());if(rL(e))throw new Error(t+"contains "+e.toString()+" "+da(r));if(typeof e=="string"&&e.length>G0/3&&Y_(e)>G0)throw new Error(t+"contains a string greater than "+G0+" utf8 bytes "+da(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(_r(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!a2(o)))throw new Error(t+" contains an invalid key ("+o+") "+da(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);zW(r,o),Bb(t,a,r),WW(r)}),i&&s)throw new Error(t+' contains ".value" child '+da(r)+" in addition to actual children.")}},c2=function(t,e,n,r){if(!(r&&n===void 0)&&!l2(n))throw new Error(gb(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},S8=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),c2(t,e,n,r)},d2=function(t,e){if(Ce(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},C8=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!a2(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!b8(n))throw new Error(gb(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function h2(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!RL(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ji(t,e,n){h2(t,n),x8(t,r=>mi(r,e)||mi(e,r))}function x8(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(A8(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function A8(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Fa&&Pn("event: "+n.toString()),bc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8="repo_interrupt",k8=25;class N8{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new R8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kg(),this.transactionQueueTree_=new Ub,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function O8(t,e,n){if(t.stats_=Eb(t.repoInfo_),t.forceRestClient_||fW())t.server_=new Pg(t.repoInfo_,(r,i,s,o)=>{cA(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>dA(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new vs(t.repoInfo_,e,(r,i,s,o)=>{cA(t,r,i,s,o)},r=>{dA(t,r)},r=>{D8(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=yW(t.repoInfo_,()=>new gq(t.stats_,t.server_)),t.infoData_=new dq,t.infoSyncTree_=new lA({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Uf(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Wb(t,"connected",!1),t.serverSyncTree_=new lA({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Ji(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function f2(t){const n=t.infoData_.getNode(new Je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zb(t){return m8({timestamp:f2(t)})}function cA(t,e,n,r,i){t.dataUpdateCount++;const s=new Je(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=bg(n,u=>rn(u));o=l8(t.serverSyncTree_,s,l,i)}else{const l=rn(n);o=ZL(t.serverSyncTree_,s,l,i)}else if(r){const l=bg(n,u=>rn(u));o=s8(t.serverSyncTree_,s,l)}else{const l=rn(n);o=Uf(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=oy(t,s)),Ji(t.eventQueue_,a,o)}function dA(t,e){Wb(t,"connected",e),e===!1&&$8(t)}function D8(t,e){_r(e,(n,r)=>{Wb(t,n,r)})}function Wb(t,e,n){const r=new Je("/.info/"+e),i=rn(n);t.infoData_.updateSnapshot(r,i);const s=Uf(t.infoSyncTree_,r,i);Ji(t.eventQueue_,r,s)}function p2(t){return t.nextWriteId_++}function M8(t,e,n){const r=c8(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=rn(i).withIndex(e._queryParams.getIndex());u8(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Uf(t.serverSyncTree_,e._path,s);else{const a=jh(t.serverSyncTree_,e);o=ZL(t.serverSyncTree_,e._path,s,a)}return Ji(t.eventQueue_,e._path,o),JL(t.serverSyncTree_,e,n,null,!0),s},i=>(sy(t,"get for query "+Gt(e)+" failed: "+i),Promise.reject(new Error(i))))}function L8(t,e,n,r,i){sy(t,"set",{path:e.toString(),value:n,priority:r});const s=zb(t),o=rn(n,r),a=Ob(t.serverSyncTree_,e),l=r2(o,a,s),u=p2(t),c=XL(t.serverSyncTree_,e,l,u,!0);h2(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||fr("set at "+e+" failed: "+h);const g=Ra(t.serverSyncTree_,u,!p);Ji(t.eventQueue_,e,g),V8(t,i,h,f)});const d=v2(t,e);oy(t,d),Ji(t.eventQueue_,d,[])}function $8(t){sy(t,"onDisconnectEvents");const e=zb(t),n=kg();VE(t.onDisconnect_,Ve(),(i,s)=>{const o=y8(i,s,t.serverSyncTree_,e);ML(n,i,o)});let r=[];VE(n,Ve(),(i,s)=>{r=r.concat(Uf(t.serverSyncTree_,i,s));const o=v2(t,i);oy(t,o)}),t.onDisconnect_=kg(),Ji(t.eventQueue_,Ve(),r)}function F8(t){t.persistentConnection_&&t.persistentConnection_.interrupt(P8)}function sy(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Pn(n,...e)}function V8(t,e,n,r){e&&bc(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function m2(t,e,n){return Ob(t.serverSyncTree_,e,n)||de.EMPTY_NODE}function qb(t,e=t.transactionQueueTree_){if(e||ay(t,e),Sc(e)){const n=_2(t,e);j(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&U8(t,Bf(e),n)}else s2(e)&&iy(e,n=>{qb(t,n)})}function U8(t,e,n){const r=n.map(u=>u.currentWriteId),i=m2(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];j(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=jn(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{sy(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,c=c.concat(Ra(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();ay(t,jb(t.transactionQueueTree_,e)),qb(t,t.transactionQueueTree_),Ji(t.eventQueue_,e,c);for(let h=0;h<d.length;h++)bc(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{fr("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}oy(t,e)}},o)}function oy(t,e){const n=g2(t,e),r=Bf(n),i=_2(t,n);return j8(t,i,r),r}function j8(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=jn(n,l.path);let c=!1,d;if(j(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,d=l.abortReason,i=i.concat(Ra(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=k8)c=!0,d="maxretry",i=i.concat(Ra(t.serverSyncTree_,l.currentWriteId,!0));else{const h=m2(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){Bb("transaction failed: Data returned ",f,l.path);let p=rn(f);typeof f=="object"&&f!=null&&bi(f,".priority")||(p=p.updatePriority(h.getPriority()));const v=l.currentWriteId,m=zb(t),_=r2(p,h,m);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=_,l.currentWriteId=p2(t),o.splice(o.indexOf(v),1),i=i.concat(XL(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Ra(t.serverSyncTree_,v,!0))}else c=!0,d="nodata",i=i.concat(Ra(t.serverSyncTree_,l.currentWriteId,!0))}Ji(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}ay(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)bc(r[a]);qb(t,t.transactionQueueTree_)}function g2(t,e){let n,r=t.transactionQueueTree_;for(n=Ce(e);n!==null&&Sc(r)===void 0;)r=jb(r,n),e=tt(e),n=Ce(e);return r}function _2(t,e){const n=[];return y2(t,e,n),n.sort((r,i)=>r.order-i.order),n}function y2(t,e,n){const r=Sc(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);iy(e,i=>{y2(t,i,n)})}function ay(t,e){const n=Sc(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,i2(e,n.length>0?n:void 0)}iy(e,r=>{ay(t,r)})}function v2(t,e){const n=Bf(g2(t,e)),r=jb(t.transactionQueueTree_,e);return w8(r,i=>{K0(t,i)}),K0(t,r),o2(r,i=>{K0(t,i)}),n}function K0(t,e){const n=Sc(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(j(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(j(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ra(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?i2(e,void 0):n.length=s+1,Ji(t.eventQueue_,Bf(e),i);for(let o=0;o<r.length;o++)bc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function z8(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fr(`Invalid query segment '${n}' in query '${t}'`)}return e}const hA=function(t,e){const n=W8(t),r=n.namespace;n.domain==="firebase.com"&&Rs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Rs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||iW();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new mL(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Je(n.pathString)}},W8=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(i=B8(t.substring(c,d)));const h=z8(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",q8=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=fA.charAt(n%64),n=Math.floor(n/64);j(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=fA.charAt(e[i]);return j(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Gt(this.snapshot.exportVal())}}class G8{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return j(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Se(this._path)?null:bL(this._path)}get ref(){return new Ds(this._repo,this._path)}get _queryIdentifier(){const e=Xx(this._queryParams),n=vb(e);return n==="{}"?"default":n}get _queryObject(){return Xx(this._queryParams)}isEqual(e){if(e=te(e),!(e instanceof Hb))return!1;const n=this._repo===e._repo,r=RL(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+jW(this._path)}}class Ds extends Hb{constructor(e,n){super(e,n,new Cb,!1)}get parent(){const e=CL(this._path);return e===null?null:new Ds(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Bh{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Je(e),r=zh(this.ref,e);return new Bh(this._node.getChild(n),r,xt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Bh(i,zh(this.ref,r),xt)))}hasChild(e){const n=new Je(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function qE(t,e){return t=te(t),t._checkNotDeleted("ref"),e!==void 0?zh(t._root,e):t._root}function zh(t,e){return t=te(t),Ce(t._path)===null?S8("child","path",e,!1):c2("child","path",e,!1),new Ds(t._repo,Kt(t._path,e))}function Q8(t,e){t=te(t),d2("push",t._path),u2("push",e,t._path,!0);const n=f2(t._repo),r=q8(n),i=zh(t,r),s=zh(t,r);let o;return e!=null?o=Y8(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Y8(t,e){t=te(t),d2("set",t._path),u2("set",e,t._path,!1);const n=new K_;return L8(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function w2(t){t=te(t);const e=new K8(()=>{}),n=new Gb(e);return M8(t._repo,t,n).then(r=>new Bh(r,new Ds(t._repo,t._path),t._queryParams.getIndex()))}class Gb{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new H8("value",this,new Bh(e.snapshotNode,new Ds(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new G8(this,e,n):null}matches(e){return e instanceof Gb?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}Xq(Ds);n8(Ds);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8="FIREBASE_DATABASE_EMULATOR_HOST",HE={};let J8=!1;function Z8(t,e,n,r){t.repoInfo_=new mL(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function eH(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Rs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=hA(s,i),a=o.repoInfo,l,u;typeof process<"u"&&Ox&&(u=Ox[X8]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=hA(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new Cu(Cu.OWNER):new mW(t.name,t.options,e);C8("Invalid Firebase Database URL",o),Se(o.path)||Rs("Database URL must point to the root of a Firebase Database (not including a child path).");const d=nH(a,t,c,new pW(t.name,n));return new rH(d,t)}function tH(t,e){const n=HE[e];(!n||n[t.key]!==t)&&Rs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),F8(t),delete n[t.key]}function nH(t,e,n,r){let i=HE[e.name];i||(i={},HE[e.name]=i);let s=i[t.toURLString()];return s&&Rs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new N8(t,J8,n,r),i[t.toURLString()]=s,s}class rH{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(O8(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ds(this._repo,Ve())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Rs("Cannot call "+e+" on a deleted database.")}}function iH(t=J_(),e){const n=Ic(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=$M("database");r&&sH(n,...r)}return n}function sH(t,e,n,r={}){t=te(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Rs("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Rs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Cu(Cu.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:fb(r.mockUserToken,t.app.options.projectId);s=new Cu(o)}Z8(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t){Z9(rs),Xi(new ei("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return eH(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Wn(Dx,Mx,t),Wn(Dx,Mx,"esm2017")}vs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};vs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};oH();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="firebasestorage.googleapis.com",I2="storageBucket",aH=2*60*1e3,lH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends kn{constructor(e,n,r=0){super(Q0(e),`Firebase Storage: ${n} (${Q0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Q0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var At;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(At||(At={}));function Q0(t){return"storage/"+t}function Kb(){const t="An unknown error occurred, please check the error payload for server response.";return new Ot(At.UNKNOWN,t)}function uH(t){return new Ot(At.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cH(t){return new Ot(At.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(At.UNAUTHENTICATED,t)}function hH(){return new Ot(At.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fH(t){return new Ot(At.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function pH(){return new Ot(At.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mH(){return new Ot(At.CANCELED,"User canceled the upload/download.")}function gH(t){return new Ot(At.INVALID_URL,"Invalid URL '"+t+"'.")}function _H(t){return new Ot(At.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yH(){return new Ot(At.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+I2+"' property when initializing the app?")}function vH(){return new Ot(At.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wH(){return new Ot(At.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EH(t){return new Ot(At.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function GE(t){return new Ot(At.INVALID_ARGUMENT,t)}function T2(){return new Ot(At.APP_DELETED,"The Firebase app was deleted.")}function IH(t){return new Ot(At.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qd(t,e){return new Ot(At.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function nd(t){throw new Ot(At.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rr.makeFromUrl(e,n)}catch{return new Rr(e,"")}if(r.path==="")return r;throw _H(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${c}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},g=n===E2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",m=new RegExp(`^https?://${g}/${i}/${v}`,"i"),y=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:m,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<y.length;E++){const b=y[E],C=b.regex.exec(e);if(C){const T=C[b.indices.bucket];let A=C[b.indices.path];A||(A=""),r=new Rr(T,A),b.postModify(r);break}}if(r==null)throw gH(e);return r}}class TH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...v){u||(u=!0,e.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,t(f,l())},v)}function h(){s&&clearTimeout(s)}function f(v,...m){if(u){h();return}if(v){h(),c.call(null,v,...m);return}if(l()||o){h(),c.call(null,v,...m);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,d(y)}let p=!1;function g(v){p||(p=!0,h(),!u&&(i!==null?(v||(a=2),clearTimeout(i),d(0)):v||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function SH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(t){return t!==void 0}function RH(t){return typeof t=="object"&&!Array.isArray(t)}function Qb(t){return typeof t=="string"||t instanceof String}function pA(t){return Yb()&&t instanceof Blob}function Yb(){return typeof Blob<"u"}function mA(t,e,n,r){if(r<e)throw GE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw GE(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function b2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Va;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Va||(Va={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e,n,r,i,s,o,a,l,u,c,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Gp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Va.NO_ERROR,l=s.getStatus();if(!a||xH(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Va.ABORT;r(!1,new Gp(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Gp(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());CH(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Kb();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?T2():mH();o(l)}else{const l=pH();o(l)}};this.canceled_?n(!1,new Gp(!1,null,!0)):this.backoffId_=bH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function PH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function OH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DH(t,e,n,r,i,s,o=!0){const a=b2(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return NH(u,e),PH(u,n),kH(u,s),OH(u,r),new AH(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LH(...t){const e=MH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Yb())return new Blob(t);throw new Ot(At.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $H(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FH(t){if(typeof atob>"u")throw EH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Y0{constructor(e,n){this.data=e,this.contentType=n||null}}function VH(t,e){switch(t){case ji.RAW:return new Y0(S2(e));case ji.BASE64:case ji.BASE64URL:return new Y0(C2(t,e));case ji.DATA_URL:return new Y0(jH(e),BH(e))}throw Kb()}function S2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function UH(t){let e;try{e=decodeURIComponent(t)}catch{throw Qd(ji.DATA_URL,"Malformed data URL.")}return S2(e)}function C2(t,e){switch(t){case ji.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Qd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ji.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Qd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FH(e)}catch(i){throw i.message.includes("polyfill")?i:Qd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class R2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qd(ji.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=zH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function jH(t){const e=new R2(t);return e.base64?C2(ji.BASE64,e.rest):UH(e.rest)}function BH(t){return new R2(t).contentType}function zH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){let r=0,i="";pA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(pA(this.data_)){const r=this.data_,i=$H(r,e,n);return i===null?null:new Zs(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Zs(r,!0)}}static getBlob(...e){if(Yb()){const n=e.map(r=>r instanceof Zs?r.data_:r);return new Zs(LH.apply(null,n))}else{const n=e.map(o=>Qb(o)?VH(ji.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Zs(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){let e;try{e=JSON.parse(t)}catch{return null}return RH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function qH(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function A2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(t,e){return e}class $n{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||HH}}let Kp=null;function GH(t){return!Qb(t)||t.length<2?t:A2(t)}function P2(){if(Kp)return Kp;const t=[];t.push(new $n("bucket")),t.push(new $n("generation")),t.push(new $n("metageneration")),t.push(new $n("name","fullPath",!0));function e(s,o){return GH(o)}const n=new $n("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new $n("size");return i.xform=r,t.push(i),t.push(new $n("timeCreated")),t.push(new $n("updated")),t.push(new $n("md5Hash",null,!0)),t.push(new $n("cacheControl",null,!0)),t.push(new $n("contentDisposition",null,!0)),t.push(new $n("contentEncoding",null,!0)),t.push(new $n("contentLanguage",null,!0)),t.push(new $n("contentType",null,!0)),t.push(new $n("metadata","customMetadata",!0)),Kp=t,Kp}function KH(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Rr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function QH(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return KH(r,t),r}function k2(t,e,n){const r=x2(e);return r===null?null:QH(t,r,n)}function YH(t,e,n,r){const i=x2(e);if(i===null||!Qb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,d=t.fullPath,h="/b/"+o(c)+"/o/"+o(d),f=Xb(h,n,r),p=b2({alt:"media",token:u});return f+p})[0]}function XH(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class N2{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t){if(!t)throw Kb()}function JH(t,e){function n(r,i){const s=k2(t,i,e);return O2(s!==null),s}return n}function ZH(t,e){function n(r,i){const s=k2(t,i,e);return O2(s!==null),YH(s,i,t.host,t._protocol)}return n}function D2(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=hH():i=dH():n.getStatus()===402?i=cH(t.bucket):n.getStatus()===403?i=fH(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function eG(t){const e=D2(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=uH(t.path)),s.serverResponse=i.serverResponse,s}return n}function tG(t,e,n){const r=e.fullServerUrl(),i=Xb(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new N2(i,s,ZH(t,n),o);return a.errorHandler=eG(e),a}function nG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function rG(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=nG(null,e)),r}function iG(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let E=0;E<2;E++)y=y+Math.random().toString().slice(2);return y}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=rG(e,r,i),c=XH(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=Zs.getBlob(d,r,h);if(f===null)throw vH();const p={name:u.fullPath},g=Xb(s,t.host,t._protocol),v="POST",m=t.maxUploadRetryTime,_=new N2(g,v,JH(t,n),m);return _.urlParams=p,_.headers=o,_.body=f.uploadData(),_.errorHandler=D2(e),_}class sG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Va.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Va.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Va.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw nd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class oG extends sG{initXhr(){this.xhr_.responseType="text"}}function M2(){return new oG}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly=class KE{constructor(e,n){this._service=e,n instanceof Rr?this._location=n:this._location=Rr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new KE(e,n)}get root(){const e=new Rr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return A2(this._location.path)}get storage(){return this._service}get parent(){const e=WH(this._location.path);if(e===null)return null;const n=new Rr(this._location.bucket,e);return new KE(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw IH(e)}};function aG(t,e,n){t._throwIfRoot("uploadBytes");const r=iG(t.storage,t._location,P2(),new Zs(e,!0),n);return t.storage.makeRequestWithTokens(r,M2).then(i=>({metadata:i,ref:t}))}function lG(t){t._throwIfRoot("getDownloadURL");const e=tG(t.storage,t._location,P2());return t.storage.makeRequestWithTokens(e,M2).then(n=>{if(n===null)throw wH();return n})}function uG(t,e){const n=qH(t._location.path,e),r=new Rr(t._location.bucket,n);return new ly(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(t){return/^[A-Za-z]+:\/\//.test(t)}function dG(t,e){return new ly(t,e)}function L2(t,e){if(t instanceof Jb){const n=t;if(n._bucket==null)throw yH();const r=new ly(n,n._bucket);return e!=null?L2(r,e):r}else return e!==void 0?uG(t,e):t}function hG(t,e){if(e&&cG(e)){if(t instanceof Jb)return dG(t,e);throw GE("To use ref(service, url), the first argument must be a Storage instance.")}else return L2(t,e)}function gA(t,e){const n=e==null?void 0:e[I2];return n==null?null:Rr.makeFromBucketSpec(n,t)}function fG(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:fb(i,t.app.options.projectId))}class Jb{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=E2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aH,this._maxUploadRetryTime=lH,this._requests=new Set,i!=null?this._bucket=Rr.makeFromBucketSpec(i,this._host):this._bucket=gA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rr.makeFromBucketSpec(this._url,e):this._bucket=gA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ly(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new TH(T2());{const o=DH(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const _A="@firebase/storage",yA="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="storage";function pG(t,e,n){return t=te(t),aG(t,e,n)}function mG(t){return t=te(t),lG(t)}function gG(t,e){return t=te(t),hG(t,e)}function _G(t=J_(),e){t=te(t);const r=Ic(t,$2).getImmediate({identifier:e}),i=$M("storage");return i&&yG(r,...i),r}function yG(t,e,n,r={}){fG(t,e,n,r)}function vG(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Jb(n,r,i,e,rs)}function wG(){Xi(new ei($2,vG,"PUBLIC").setMultipleInstances(!0)),Wn(_A,yA,""),Wn(_A,yA,"esm2017")}wG();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e,n){this._delegate=e,this.firebase=n,Cg(e,new ei("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),QM(this._delegate)))}_getService(e,n=Co){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Co){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Cg(this._delegate,e)}_addOrOverwriteComponent(e){KM(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},vA=new wl("app-compat","Firebase",IG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TG(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Wn,setLogLevel:XM,onLog:YM,apps:null,SDK_VERSION:rs,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:Y9}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Co,!bi(e,u))throw vA.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const d=X_(u,c);if(bi(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,d=c.replace("-compat","");if(Xi(u)&&u.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw vA.create("invalid-app-argument",{appName:c});return f[d]()};u.serviceProps!==void 0&&Ph(h,u.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,c).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[d]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(){const t=TG(EG);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:F2,extendNamespace:e,createSubscribe:WM,ErrorFactory:wl,deepExtend:Ph});function e(n){Ph(t,n)}return t}const bG=F2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Lf("@firebase/app-compat"),SG="@firebase/app-compat",CG="0.2.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(t){Wn(SG,CG,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(P3()&&self.firebase!==void 0){wA.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&wA.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const uy=bG;RG();function Zb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const rd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Fl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function V2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AG=xG,PG=V2,U2=new wl("auth","Firebase",V2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=new Lf("@firebase/auth");function kG(t,...e){Vg.logLevel<=Te.WARN&&Vg.warn(`Auth (${rs}): ${t}`,...e)}function xm(t,...e){Vg.logLevel<=Te.ERROR&&Vg.error(`Auth (${rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw eS(t,...e)}function In(t,...e){return eS(t,...e)}function j2(t,e,n){const r=Object.assign(Object.assign({},PG()),{[e]:n});return new wl("auth","Firebase",r).create(e,{appName:t.name})}function Cc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&an(t,"argument-error"),j2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function eS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return U2.create(t,...e)}function V(t,e,...n){if(!t)throw eS(e,...n)}function Bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xm(e),new Error(e)}function Si(t,e){t||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tS(){return EA()==="http:"||EA()==="https:"}function EA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tS()||UM()||"connection"in navigator)?navigator.onLine:!0}function OG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=pb()||Q_()}get(){return NG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e){Si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG=new zf(3e4,6e4);function Dt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mt(t,e,n,r,i={}){return z2(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=El(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),B2.fetch()(W2(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function z2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},DG),e);try{const i=new $G(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rd(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw j2(t,c,u);an(t,c)}}catch(i){if(i instanceof kn)throw i;an(t,"network-request-failed",{message:String(i)})}}async function Ms(t,e,n,r,i={}){const s=await Mt(t,e,n,r,i);return"mfaPendingCredential"in s&&an(t,"multi-factor-auth-required",{_serverResponse:s}),s}function W2(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?nS(t.config,i):`${t.config.apiScheme}://${i}`}function LG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $G{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(In(this.auth,"network-request-failed")),MG.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=In(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){return t!==void 0&&t.getResponse!==void 0}function TA(t){return t!==void 0&&t.enterprise!==void 0}class FG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LG(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VG(t){return(await Mt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function UG(t,e){return Mt(t,"GET","/v2/recaptchaConfig",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jG(t,e){return Mt(t,"POST","/v1/accounts:delete",e)}async function BG(t,e){return Mt(t,"POST","/v1/accounts:update",e)}async function zG(t,e){return Mt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WG(t,e=!1){const n=te(t),r=await n.getIdToken(e),i=cy(r);V(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yd(X0(i.auth_time)),issuedAtTime:Yd(X0(i.iat)),expirationTime:Yd(X0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function X0(t){return Number(t)*1e3}function cy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Tg(n);return i?JSON.parse(i):(xm("Failed to decode base64 JWT payload"),null)}catch(i){return xm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qG(t){const e=cy(t);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kn&&HG(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yd(this.lastLoginAt),this.creationTime=Yd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await xs(t,zG(n,{idToken:r}));V(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YG(s.providerUserInfo):[],a=QG(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new q2(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function KG(t){const e=te(t);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QG(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YG(t){return t.map(e=>{var{providerId:n}=e,r=Zb(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XG(t,e){const n=await z2(t,{},async()=>{const r=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=W2(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",B2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JG(t,e){return Mt(t,"POST","/v2/accounts:revokeToken",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qG(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return V(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await XG(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hh;return r&&(V(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(V(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(V(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hh,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t,e){V(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ua{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Zb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new q2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await xs(this,this.stsTokenManager.getToken(this.auth,e));return V(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WG(this,e)}reload(){return KG(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ua(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await xs(this,jG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=n.createdAt)!==null&&u!==void 0?u:void 0,_=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:E,isAnonymous:b,providerData:C,stsTokenManager:T}=n;V(y&&T,e,"internal-error");const A=Hh.fromJSON(this.name,T);V(typeof y=="string",e,"internal-error"),zs(d,e.name),zs(h,e.name),V(typeof E=="boolean",e,"internal-error"),V(typeof b=="boolean",e,"internal-error"),zs(f,e.name),zs(p,e.name),zs(g,e.name),zs(v,e.name),zs(m,e.name),zs(_,e.name);const M=new Ua({uid:y,auth:e,email:h,emailVerified:E,displayName:d,isAnonymous:b,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:A,createdAt:m,lastLoginAt:_});return C&&Array.isArray(C)&&(M.providerData=C.map(P=>Object.assign({},P))),v&&(M._redirectEventId=v),M}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hh;i.updateFromServerResponse(n);const s=new Ua({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=new Map;function xr(t){Si(t instanceof Function,"Expected a class definition");let e=bA.get(t);return e?(Si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H2.type="NONE";const Yu=H2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t,e,n){return`firebase:${t}:${e}:${n}`}class xu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ja(this.userKey,i.apiKey,s),this.fullPersistenceKey=ja("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ua._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xu(xr(Yu),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||xr(Yu);const o=ja(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=Ua._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new xu(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new xu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y2(e))return"Blackberry";if(X2(e))return"Webos";if(rS(e))return"Safari";if((e.includes("chrome/")||K2(e))&&!e.includes("edge/"))return"Chrome";if(Wf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function G2(t=Tt()){return/firefox\//i.test(t)}function rS(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K2(t=Tt()){return/crios\//i.test(t)}function Q2(t=Tt()){return/iemobile/i.test(t)}function Wf(t=Tt()){return/android/i.test(t)}function Y2(t=Tt()){return/blackberry/i.test(t)}function X2(t=Tt()){return/webos/i.test(t)}function Rc(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZG(t=Tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function eK(t=Tt()){var e;return Rc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tK(){return jM()&&document.documentMode===10}function J2(t=Tt()){return Rc(t)||Wf(t)||X2(t)||Y2(t)||/windows phone/i.test(t)||Q2(t)}function nK(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e=[]){let n;switch(t){case"Browser":n=SA(Tt());break;case"Worker":n=`${SA(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iK(t,e={}){return Mt(t,"GET","/v2/passwordPolicy",Dt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sK=6;class oK{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sK,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CA(this),this.idTokenSubscription=new CA(this),this.beforeStateQueue=new rK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await xu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?te(e):null;return n&&V(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iK(this),n=new oK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JG(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xr(e)||this._popupRedirectResolver;V(n,this,"argument-error"),this.redirectPersistenceManager=await xu.create(this,[xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(V(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&kG(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pt(t){return te(t)}class CA{constructor(e){this.auth=e,this.observer=null,this.addObserver=WM(n=>this.observer=n)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function iS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=In("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",lK().appendChild(r)})}function e$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const uK="https://www.google.com/recaptcha/enterprise.js?render=",cK="recaptcha-enterprise",dK="NO_RECAPTCHA";class hK{constructor(e){this.type=cK,this.auth=Pt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{UG(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new FG(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;TA(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(dK)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&TA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}iS(uK+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function RA(t,e,n,r=!1){const i=new hK(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Gh(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await RA(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await RA(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fK(t,e){const n=Ic(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Sg(s,e??{}))return i;an(i,"already-initialized")}return n.initialize({options:e})}function pK(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function t$(t,e,n){const r=Pt(t);V(r._canInitEmulator,r,"emulator-config-failed"),V(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=n$(e),{host:o,port:a}=mK(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||gK()}function n$(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mK(t){const e=n$(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:xA(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:xA(o)}}}function xA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gK(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,n){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r$(t,e){return Mt(t,"POST","/v1/accounts:resetPassword",Dt(t,e))}async function _K(t,e){return Mt(t,"POST","/v1/accounts:update",e)}async function yK(t,e){return Mt(t,"POST","/v1/accounts:signUp",e)}async function vK(t,e){return Mt(t,"POST","/v1/accounts:update",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wK(t,e){return Ms(t,"POST","/v1/accounts:signInWithPassword",Dt(t,e))}async function dy(t,e){return Mt(t,"POST","/v1/accounts:sendOobCode",Dt(t,e))}async function EK(t,e){return dy(t,e)}async function IK(t,e){return dy(t,e)}async function TK(t,e){return dy(t,e)}async function bK(t,e){return dy(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SK(t,e){return Ms(t,"POST","/v1/accounts:signInWithEmailLink",Dt(t,e))}async function CK(t,e){return Ms(t,"POST","/v1/accounts:signInWithEmailLink",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends xc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Kh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gh(e,n,"signInWithPassword",wK);case"emailLink":return SK(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gh(e,r,"signUpPassword",yK);case"emailLink":return CK(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t,e){return Ms(t,"POST","/v1/accounts:signInWithIdp",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK="http://localhost";class Zi extends xc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Zb(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Zi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ws(e,n)}buildRequest(){const e={requestUri:RK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=El(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xK(t,e){return Mt(t,"POST","/v1/accounts:sendVerificationCode",Dt(t,e))}async function AK(t,e){return Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,e))}async function PK(t,e){const n=await Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,e));if(n.temporaryProof)throw Rd(t,"account-exists-with-different-credential",n);return n}const kK={USER_NOT_FOUND:"user-not-found"};async function NK(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,n),kK)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends xc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ba({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ba({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return AK(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return PK(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return NK(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ba({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DK(t){const e=mu(Sd(t)).link,n=e?mu(Sd(e)).deep_link_id:null,r=mu(Sd(t)).deep_link_id;return(r?mu(Sd(r)).link:null)||r||n||e||t}class hy{constructor(e){var n,r,i,s,o,a;const l=mu(Sd(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=OK((i=l.mode)!==null&&i!==void 0?i:null);V(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=DK(e);try{return new hy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,n){return Kh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=hy.parseLink(n);return V(r,"argument-error"),Kh._fromEmailAndCode(e,r.code,r.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends Ls{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Au extends Ac{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return V("providerId"in n&&"signInMethod"in n,"argument-error"),Zi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return V(e.idToken||e.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Au.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Au.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Au(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Ac{constructor(){super("facebook.com")}static credential(e){return Zi._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zi._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Li.credential(n,r)}catch{return null}}}Li.GOOGLE_SIGN_IN_METHOD="google.com";Li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Ac{constructor(){super("github.com")}static credential(e){return Zi._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com";$i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK="http://localhost";class Xu extends xc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ws(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Xu(r,s)}static _create(e,n){return new Xu(e,n)}buildRequest(){return{requestUri:MK,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK="saml.";class Ug extends Ls{constructor(e){V(e.startsWith(LK),"argument-error"),super(e)}static credentialFromResult(e){return Ug.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ug.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Xu.fromJSON(e);return V(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Xu._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Ac{constructor(){super("twitter.com")}static credential(e,n){return Zi._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Fi.credential(n,r)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i$(t,e){return Ms(t,"POST","/v1/accounts:signUp",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ua._fromIdTokenResponse(e,r,i),o=AA(r);return new ti({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=AA(r);return new ti({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function AA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $K(t){var e;const n=Pt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ti({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await i$(n,{returnSecureToken:!0}),i=await ti._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends kn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new jg(e,n,r,i)}}function s$(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jg._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FK(t,e){const n=te(t);await fy(!0,n,e);const{providerUserInfo:r}=await BG(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=o$(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function sS(t,e,n=!1){const r=await xs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ti._forOperation(t,"link",r)}async function fy(t,e,n){await qh(e);const r=o$(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";V(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await xs(t,s$(r,i,e,t),n);V(s.idToken,r,"internal-error");const o=cy(s.idToken);V(o,r,"internal-error");const{sub:a}=o;return V(t.uid===a,r,"user-mismatch"),ti._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&an(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l$(t,e,n=!1){const r="signIn",i=await s$(t,r,e),s=await ti._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function py(t,e){return l$(Pt(t),e)}async function u$(t,e){const n=te(t);return await fy(!1,n,e.providerId),sS(n,e)}async function c$(t,e){return a$(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VK(t,e){return Ms(t,"POST","/v1/accounts:signInWithCustomToken",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UK(t,e){const n=Pt(t),r=await VK(n,{token:e,returnSecureToken:!0}),i=await ti._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?oS._fromServerResponse(e,n):"totpInfo"in n?aS._fromServerResponse(e,n):an(e,"internal-error")}}class oS extends qf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new oS(n)}}class aS extends qf{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new aS(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e,n){var r;V(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),V(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(V(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(V(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(t){const e=Pt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jK(t,e,n){const r=Pt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&my(r,i,n),await Gh(r,i,"getOobCode",IK)}async function BK(t,e,n){await r$(te(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lS(t),r})}async function zK(t,e){await vK(te(t),{oobCode:e})}async function d$(t,e){const n=te(t),r=await r$(n,{oobCode:e}),i=r.requestType;switch(V(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(r.mfaInfo,n,"internal-error");default:V(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=qf._fromServerResponse(Pt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function WK(t,e){const{data:n}=await d$(te(t),e);return n.email}async function h$(t,e,n){const r=Pt(t),o=await Gh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",i$).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&lS(t),l}),a=await ti._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function f$(t,e,n){return py(te(t),Qo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qK(t,e,n){const r=Pt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){V(a.handleCodeInApp,r,"argument-error"),a&&my(r,o,a)}s(i,n),await Gh(r,i,"getOobCode",TK)}function HK(t,e){const n=hy.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function GK(t,e,n){const r=te(t),i=Qo.credentialWithLink(e,n||Wh());return V(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),py(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KK(t,e){return Mt(t,"POST","/v1/accounts:createAuthUri",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QK(t,e){const n=tS()?Wh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await KK(te(t),r);return i||[]}async function YK(t,e){const n=te(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&my(n.auth,i,e);const{email:s}=await EK(n.auth,i);s!==t.email&&await t.reload()}async function XK(t,e,n){const r=te(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&my(r.auth,s,n);const{email:o}=await bK(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JK(t,e){return Mt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZK(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=te(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await xs(r,JK(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function e7(t,e){return p$(te(t),e,null)}function t7(t,e){return p$(te(t),null,e)}async function p$(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await xs(t,_K(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=cy(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Pu(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new r7(s,i);case"github.com":return new i7(s,i);case"google.com":return new s7(s,i);case"twitter.com":return new o7(s,i,t.screenName||null);case"custom":case"anonymous":return new Pu(s,null);default:return new Pu(s,r,i)}}class Pu{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class m$ extends Pu{constructor(e,n,r,i){super(e,n,r),this.username=i}}class r7 extends Pu{constructor(e,n){super(e,"facebook.com",n)}}class i7 extends m${constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class s7 extends Pu{constructor(e,n){super(e,"google.com",n)}}class o7 extends m${constructor(e,n,r){super(e,"twitter.com",n,r)}}function a7(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:n7(n)}function l7(t,e,n,r){return te(t).onIdTokenChanged(e,n,r)}function u7(t,e,n){return te(t).beforeAuthStateChanged(e,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new xa("enroll",e,n)}static _fromMfaPendingCredential(e){return new xa("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return xa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return xa._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Pt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>qf._fromServerResponse(r,a));V(i.mfaPendingCredential,r,"internal-error");const o=xa._fromMfaPendingCredential(i.mfaPendingCredential);return new uS(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await ti._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return V(n.user,r,"internal-error"),ti._forOperation(n.user,n.operationType,u);default:an(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function c7(t,e){var n;const r=te(t),i=e;return V(e.customData.operationType,r,"argument-error"),V((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),uS._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:start",Dt(t,e))}function h7(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(t,e))}function f7(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Dt(t,e))}class cS{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>qf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new cS(e)}async getSession(){return xa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await xs(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await xs(this.user,f7(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const J0=new WeakMap;function p7(t){const e=te(t);return J0.has(e)||J0.set(e,cS._fromUser(e)),J0.get(e)}const Bg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bg,"1"),this.storage.removeItem(Bg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(){const t=Tt();return rS(t)||Rc(t)}const g7=1e3,_7=10;class _$ extends g${constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=m7()&&nK(),this.fallbackToPolling=J2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);tK()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},g7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_$.type="LOCAL";const gy=_$;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y$ extends g${constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}y$.type="SESSION";const ko=y$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _y(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await y7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_y.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Hf("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return window}function w7(t){jt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){return typeof jt().WorkerGlobalScope<"u"&&typeof jt().importScripts=="function"}async function E7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function T7(){return dS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$="firebaseLocalStorageDb",b7=1,zg="firebaseLocalStorage",w$="fbase_key";class Gf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yy(t,e){return t.transaction([zg],e?"readwrite":"readonly").objectStore(zg)}function S7(){const t=indexedDB.deleteDatabase(v$);return new Gf(t).toPromise()}function QE(){const t=indexedDB.open(v$,b7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zg,{keyPath:w$})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zg)?e(r):(r.close(),await S7(),e(await QE()))})})}async function PA(t,e,n){const r=yy(t,!0).put({[w$]:e,value:n});return new Gf(r).toPromise()}async function C7(t,e){const n=yy(t,!1).get(e),r=await new Gf(n).toPromise();return r===void 0?null:r.value}function kA(t,e){const n=yy(t,!0).delete(e);return new Gf(n).toPromise()}const R7=800,x7=3;class E${constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await QE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>x7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_y._getInstance(T7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await E7(),!this.activeServiceWorker)return;this.sender=new v7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await QE();return await PA(e,Bg,"1"),await kA(e,Bg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>PA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>C7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=yy(i,!1).getAll();return new Gf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}E$.type="LOCAL";const Ju=E$;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(t,e){return Mt(t,"POST","/v2/accounts/mfaSignIn:start",Dt(t,e))}function P7(t,e){return Mt(t,"POST","/v2/accounts/mfaSignIn:finalize",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=500,N7=6e4,Qp=1e12;class O7{constructor(e){this.auth=e,this.counter=Qp,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new D7(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Qp;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Qp;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Qp;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class D7{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;V(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=M7(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},N7)},k7))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function M7(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=e$("rcb"),L7=new zf(3e4,6e4),$7="https://www.google.com/recaptcha/api.js?";class F7{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=jt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return V(V7(n),e,"argument-error"),this.shouldResolveImmediately(n)&&IA(jt().grecaptcha)?Promise.resolve(jt().grecaptcha):new Promise((r,i)=>{const s=jt().setTimeout(()=>{i(In(e,"network-request-failed"))},L7.get());jt()[Z0]=()=>{jt().clearTimeout(s),delete jt()[Z0];const a=jt().grecaptcha;if(!a||!IA(a)){i(In(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const d=l(u,c);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${$7}?${El({onload:Z0,render:"explicit",hl:n})}`;iS(o).catch(()=>{clearTimeout(s),i(In(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=jt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function V7(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class U7{async load(e){return new O7(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$="recaptcha",j7={theme:"light",type:"image"};let B7=class{constructor(e,n,r=Object.assign({},j7)){this.parameters=r,this.type=I$,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(e),this.isInvisible=this.parameters.size==="invisible",V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;V(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new U7:new F7,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=jt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){V(tS()&&!dS(),this.auth,"internal-error"),await z7(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await VG(this.auth);V(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function z7(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ba._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function W7(t,e,n){const r=Pt(t),i=await vy(r,e,te(n));return new hS(i,s=>py(r,s))}async function q7(t,e,n){const r=te(t);await fy(!1,r,"phone");const i=await vy(r.auth,e,te(n));return new hS(i,s=>u$(r,s))}async function H7(t,e,n){const r=te(t),i=await vy(r.auth,e,te(n));return new hS(i,s=>c$(r,s))}async function vy(t,e,n){var r;const i=await n.verify();try{V(typeof i=="string",t,"argument-error"),V(n.type===I$,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return V(o.type==="enroll",t,"internal-error"),(await d7(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{V(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return V(a,t,"missing-multi-factor-info"),(await A7(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await xK(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function G7(t,e){await sS(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl=class Am{constructor(e){this.providerId=Am.PROVIDER_ID,this.auth=Pt(e)}verifyPhoneNumber(e,n){return vy(this.auth,e,te(n))}static credential(e,n){return Ba._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Am.credentialFromTaggedObject(n)}static credentialFromError(e){return Am.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ba._fromTokenResponse(n,r):null}};nl.PROVIDER_ID="phone";nl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e){return e?xr(e):(V(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS extends xc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K7(t){return l$(t.auth,new fS(t),t.bypassAuthState)}function Q7(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),a$(n,new fS(t),t.bypassAuthState)}async function Y7(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),sS(n,new fS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K7;case"linkViaPopup":case"linkViaRedirect":return Y7;case"reauthViaPopup":case"reauthViaRedirect":return Q7;default:an(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=new zf(2e3,1e4);async function J7(t,e,n){const r=Pt(t);Cc(t,e,Ls);const i=Tl(r,n);return new ps(r,"signInViaPopup",e,i).executeNotNull()}async function Z7(t,e,n){const r=te(t);Cc(r.auth,e,Ls);const i=Tl(r.auth,n);return new ps(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function eQ(t,e,n){const r=te(t);Cc(r.auth,e,Ls);const i=Tl(r.auth,n);return new ps(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ps extends T${constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ps.currentPopupAction&&ps.currentPopupAction.cancel(),ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return V(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(In(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X7.get())};e()}}ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQ="pendingRedirect",Xd=new Map;class nQ extends T${constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xd.get(this.auth._key());if(!e){try{const r=await rQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rQ(t,e){const n=S$(e),r=b$(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function pS(t,e){return b$(t)._set(S$(e),"true")}function iQ(){Xd.clear()}function mS(t,e){Xd.set(t._key(),e)}function b$(t){return xr(t._redirectPersistence)}function S$(t){return ja(tQ,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQ(t,e,n){return oQ(t,e,n)}async function oQ(t,e,n){const r=Pt(t);Cc(t,e,Ls),await r._initializationPromise;const i=Tl(r,n);return await pS(i,r),i._openRedirect(r,e,"signInViaRedirect")}function aQ(t,e,n){return lQ(t,e,n)}async function lQ(t,e,n){const r=te(t);Cc(r.auth,e,Ls),await r.auth._initializationPromise;const i=Tl(r.auth,n);await pS(i,r.auth);const s=await C$(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function uQ(t,e,n){return cQ(t,e,n)}async function cQ(t,e,n){const r=te(t);Cc(r.auth,e,Ls),await r.auth._initializationPromise;const i=Tl(r.auth,n);await fy(!1,r,e.providerId),await pS(i,r.auth);const s=await C$(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function dQ(t,e){return await Pt(t)._initializationPromise,wy(t,e,!1)}async function wy(t,e,n=!1){const r=Pt(t),i=Tl(r,e),o=await new nQ(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function C$(t){const e=Hf(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQ=10*60*1e3;class R${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fQ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!x$(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(In(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(NA(e))}saveEventToCache(e){this.cachedEventUids.add(NA(e)),this.lastProcessedEventTime=Date.now()}}function NA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function x$({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fQ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x$(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A$(t,e={}){return Mt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mQ=/^https?/;async function gQ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await A$(t);for(const n of e)try{if(_Q(n))return}catch{}an(t,"unauthorized-domain")}function _Q(t){const e=Wh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mQ.test(n))return!1;if(pQ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yQ=new zf(3e4,6e4);function OA(){const t=jt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vQ(t){return new Promise((e,n)=>{var r,i,s;function o(){OA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OA(),n(In(t,"network-request-failed"))},timeout:yQ.get()})}if(!((i=(r=jt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=jt().gapi)===null||s===void 0)&&s.load)o();else{const a=e$("iframefcb");return jt()[a]=()=>{gapi.load?o():n(In(t,"network-request-failed"))},iS(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Pm=null,e})}let Pm=null;function wQ(t){return Pm=Pm||vQ(t),Pm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ=new zf(5e3,15e3),IQ="__/auth/iframe",TQ="emulator/auth/iframe",bQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CQ(t){const e=t.config;V(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nS(e,TQ):`https://${t.config.authDomain}/${IQ}`,r={apiKey:e.apiKey,appName:t.name,v:rs},i=SQ.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${El(r).slice(1)}`}async function RQ(t){const e=await wQ(t),n=jt().gapi;return V(n,t,"internal-error"),e.open({where:document.body,url:CQ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bQ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=In(t,"network-request-failed"),a=jt().setTimeout(()=>{s(o)},EQ.get());function l(){jt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AQ=500,PQ=600,kQ="_blank",NQ="http://localhost";class DA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OQ(t,e,n,r=AQ,i=PQ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xQ),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Tt().toLowerCase();n&&(a=K2(u)?kQ:n),G2(u)&&(e=e||NQ,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(eK(u)&&a!=="_self")return DQ(e||"",a),new DA(null);const d=window.open(e||"",a,c);V(d,t,"popup-blocked");try{d.focus()}catch{}return new DA(d)}function DQ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MQ="__/auth/handler",LQ="emulator/auth/handler",$Q=encodeURIComponent("fac");async function YE(t,e,n,r,i,s){V(t.config.authDomain,t,"auth-domain-config-required"),V(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rs,eventId:i};if(e instanceof Ls){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof Ac){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${$Q}=${encodeURIComponent(l)}`:"";return`${FQ(t)}?${El(a).slice(1)}${u}`}function FQ({config:t}){return t.emulator?nS(t,LQ):`https://${t.authDomain}/${MQ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="webStorageSupport";class VQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ko,this._completeRedirectFn=wy,this._overrideRedirectResult=mS}async _openPopup(e,n,r,i){var s;Si((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await YE(e,n,r,Wh(),i);return OQ(e,o,Hf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await YE(e,n,r,Wh(),i);return w7(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Si(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await RQ(e),r=new R$(e);return n.register("authEvent",i=>(V(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ew,{type:ew},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ew];o!==void 0&&n(!!o),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gQ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J2()||rS()||Rc()}}const P$=VQ;class UQ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Bi("unexpected MultiFactorSessionType")}}}class gS extends UQ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new gS(e)}_finalizeEnroll(e,n,r){return h7(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return P7(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class k${constructor(){}static assertion(e){return gS._fromCredential(e)}}k$.FACTOR_ID="phone";var MA="@firebase/auth",LA="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function zQ(t){Xi(new ei("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;V(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z2(t)},u=new aK(r,i,s,l);return pK(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xi(new ei("auth-internal",e=>{const n=Pt(e.getProvider("auth").getImmediate());return(r=>new jQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(MA,LA,BQ(t)),Wn(MA,LA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WQ=5*60,qQ=VM("authIdTokenMaxAge")||WQ;let $A=null;const HQ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qQ)return;const i=n==null?void 0:n.token;$A!==i&&($A=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GQ(t=J_()){const e=Ic(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fK(t,{popupRedirectResolver:P$,persistence:[Ju,gy,ko]}),r=VM("authTokenSyncURL");if(r){const s=HQ(r);u7(n,s,()=>s(n.currentUser)),l7(n,o=>s(o))}const i=LM("auth");return i&&t$(n,`http://${i}`),n}zQ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KQ=2e3;async function QQ(t,e,n){var r;const{BuildInfo:i}=rl();Si(e.sessionId,"AuthEvent did not contain a session ID");const s=await eY(e.sessionId),o={};return Rc()?o.ibi=i.packageName:Wf()?o.apn=i.packageName:an(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,YE(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function YQ(t){const{BuildInfo:e}=rl(),n={};Rc()?n.iosBundleId=e.packageName:Wf()?n.androidPackageName=e.packageName:an(t,"operation-not-supported-in-this-environment"),await A$(t,n)}function XQ(t){const{cordova:e}=rl();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,ZG()?"_blank":"_system","location=yes"),n(i)})})}async function JQ(t,e,n){const{cordova:r}=rl();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(In(t,"redirect-cancelled-by-user"))},KQ))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),Wf()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function ZQ(t){var e,n,r,i,s,o,a,l,u,c;const d=rl();V(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V(typeof((c=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function eY(t){const e=tY(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function tY(t){if(Si(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nY=20;class rY extends R${constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function iY(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:aY(),postBody:null,tenantId:t.tenantId,error:In(t,"no-auth-event")}}function sY(t,e){return XE()._set(JE(t),e)}async function FA(t){const e=await XE()._get(JE(t));return e&&await XE()._remove(JE(t)),e}function oY(t,e){var n,r;const i=uY(e);if(i.includes("/__/auth/callback")){const s=km(i),o=s.firebaseError?lY(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?In(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function aY(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<nY;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function XE(){return xr(gy)}function JE(t){return ja("authEvent",t.config.apiKey,t.name)}function lY(t){try{return JSON.parse(t)}catch{return null}}function uY(t){const e=km(t),n=e.link?decodeURIComponent(e.link):void 0,r=km(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return km(i).link||i||r||n||t}function km(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return mu(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cY=500;class dY{constructor(){this._redirectPersistence=ko,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wy,this._overrideRedirectResult=mS}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new rY(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){an(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){ZQ(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),iQ(),await this._originValidation(e);const o=iY(e,r,i);await sY(e,o);const a=await QQ(e,o,n),l=await XQ(a);return JQ(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YQ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=rl(),o=setTimeout(async()=>{await FA(e),n.onEvent(VA())},cY),a=async c=>{clearTimeout(o);const d=await FA(e);let h=null;d&&(c!=null&&c.url)&&(h=oY(d,c.url)),n.onEvent(h||VA())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;rl().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(d){console.error(d)}}}}const hY=dY;function VA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:In("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(t,e){Pt(t)._logFramework(e)}var pY="@firebase/auth-compat",mY="0.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY=1e3;function Jd(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function _Y(){return Jd()==="http:"||Jd()==="https:"}function N$(t=Tt()){return!!((Jd()==="file:"||Jd()==="ionic:"||Jd()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function yY(){return Q_()||mb()}function vY(){return jM()&&(document==null?void 0:document.documentMode)===11}function wY(t=Tt()){return/Edge\/\d+/.test(t)}function EY(t=Tt()){return vY()||wY(t)}function O$(){try{const t=self.localStorage,e=Hf();if(t)return t.setItem(e,"1"),t.removeItem(e),EY()?kh():!0}catch{return _S()&&kh()}return!1}function _S(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tw(){return(_Y()||UM()||N$())&&!yY()&&O$()&&!_S()}function D$(){return N$()&&typeof document<"u"}async function IY(){return D$()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},gY);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function TY(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr={LOCAL:"local",NONE:"none",SESSION:"session"},id=V,M$="persistence";function bY(t,e){if(id(Object.values(Tr).includes(e),t,"invalid-persistence-type"),Q_()){id(e!==Tr.SESSION,t,"unsupported-persistence-type");return}if(mb()){id(e===Tr.NONE,t,"unsupported-persistence-type");return}if(_S()){id(e===Tr.NONE||e===Tr.LOCAL&&kh(),t,"unsupported-persistence-type");return}id(e===Tr.NONE||O$(),t,"unsupported-persistence-type")}async function ZE(t){await t._initializationPromise;const e=L$(),n=ja(M$,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function SY(t,e){const n=L$();if(!n)return[];const r=ja(M$,t,e);switch(n.getItem(r)){case Tr.NONE:return[Yu];case Tr.LOCAL:return[Ju,ko];case Tr.SESSION:return[ko];default:return[]}}function L$(){var t;try{return((t=TY())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CY=V;class so{constructor(){this.browserResolver=xr(P$),this.cordovaResolver=xr(hY),this.underlyingResolver=null,this._redirectPersistence=ko,this._completeRedirectFn=wy,this._overrideRedirectResult=mS}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return D$()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return CY(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await IY();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(t){return t.unwrap()}function RY(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xY(t){return F$(t)}function AY(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new PY(t,c7(t,e))}else if(r){const i=F$(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function F$(t){const{_tokenResponse:e}=t instanceof kn?t.customData:t;if(!e)return null;if(!(t instanceof kn)&&"temporaryProof"in e&&"phoneNumber"in e)return nl.credentialFromResult(t);const n=e.providerId;if(!n||n===rd.PASSWORD)return null;let r;switch(n){case rd.GOOGLE:r=Li;break;case rd.FACEBOOK:r=Mi;break;case rd.GITHUB:r=$i;break;case rd.TWITTER:r=Fi;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Xu._create(n,a):Zi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Au(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof kn?r.credentialFromError(t):r.credentialFromResult(t)}function tr(t,e){return e.catch(n=>{throw n instanceof kn&&AY(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:xY(n),additionalUserInfo:a7(n),user:Ey.getOrCreate(i)}})}async function eI(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>tr(t,n.confirm(r))}}class PY{constructor(e,n){this.resolver=n,this.auth=RY(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return tr($$(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ey=class xd{constructor(e){this._delegate=e,this.multiFactor=p7(e)}static getOrCreate(e){return xd.USER_MAP.has(e)||xd.USER_MAP.set(e,new xd(e)),xd.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return tr(this.auth,u$(this._delegate,e))}async linkWithPhoneNumber(e,n){return eI(this.auth,q7(this._delegate,e,n))}async linkWithPopup(e){return tr(this.auth,eQ(this._delegate,e,so))}async linkWithRedirect(e){return await ZE(Pt(this.auth)),uQ(this._delegate,e,so)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return tr(this.auth,c$(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return eI(this.auth,H7(this._delegate,e,n))}reauthenticateWithPopup(e){return tr(this.auth,Z7(this._delegate,e,so))}async reauthenticateWithRedirect(e){return await ZE(Pt(this.auth)),aQ(this._delegate,e,so)}sendEmailVerification(e){return YK(this._delegate,e)}async unlink(e){return await FK(this._delegate,e),this}updateEmail(e){return e7(this._delegate,e)}updatePassword(e){return t7(this._delegate,e)}updatePhoneNumber(e){return G7(this._delegate,e)}updateProfile(e){return ZK(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return XK(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Ey.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=V;class tI{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;sd(r,"invalid-api-key",{appName:e.name}),sd(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?so:void 0;this._delegate=n.initialize({options:{persistence:kY(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(AG),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ey.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){t$(this._delegate,e,n)}applyActionCode(e){return zK(this._delegate,e)}checkActionCode(e){return d$(this._delegate,e)}confirmPasswordReset(e,n){return BK(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return tr(this._delegate,h$(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return QK(this._delegate,e)}isSignInWithEmailLink(e){return HK(this._delegate,e)}async getRedirectResult(){sd(tw(),this._delegate,"operation-not-supported-in-this-environment");const e=await dQ(this._delegate,so);return e?tr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){fY(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=UA(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=UA(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return qK(this._delegate,e,n)}sendPasswordResetEmail(e,n){return jK(this._delegate,e,n||void 0)}async setPersistence(e){bY(this._delegate,e);let n;switch(e){case Tr.SESSION:n=ko;break;case Tr.LOCAL:n=await xr(Ju)._isAvailable()?Ju:gy;break;case Tr.NONE:n=Yu;break;default:return an("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return tr(this._delegate,$K(this._delegate))}signInWithCredential(e){return tr(this._delegate,py(this._delegate,e))}signInWithCustomToken(e){return tr(this._delegate,UK(this._delegate,e))}signInWithEmailAndPassword(e,n){return tr(this._delegate,f$(this._delegate,e,n))}signInWithEmailLink(e,n){return tr(this._delegate,GK(this._delegate,e,n))}signInWithPhoneNumber(e,n){return eI(this._delegate,W7(this._delegate,e,n))}async signInWithPopup(e){return sd(tw(),this._delegate,"operation-not-supported-in-this-environment"),tr(this._delegate,J7(this._delegate,e,so))}async signInWithRedirect(e){return sd(tw(),this._delegate,"operation-not-supported-in-this-environment"),await ZE(this._delegate),sQ(this._delegate,e,so)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return WK(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}tI.Persistence=Tr;function UA(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Ey.getOrCreate(o)),error:e,complete:n}}function kY(t,e){const n=SY(t,e);if(typeof self<"u"&&!n.includes(Ju)&&n.push(Ju),typeof window<"u")for(const r of[gy,ko])n.includes(r)||n.push(r);return n.includes(Yu)||n.push(Yu),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.providerId="phone",this._delegate=new nl($$(uy.auth()))}static credential(e,n){return nl.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}yS.PHONE_SIGN_IN_METHOD=nl.PHONE_SIGN_IN_METHOD;yS.PROVIDER_ID=nl.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NY=V;class OY{constructor(e,n,r=uy.app()){var i;NY((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new B7(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY="auth-compat";function MY(t){t.INTERNAL.registerComponent(new ei(DY,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new tI(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fl.EMAIL_SIGNIN,PASSWORD_RESET:Fl.PASSWORD_RESET,RECOVER_EMAIL:Fl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Fl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Fl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Fl.VERIFY_EMAIL}},EmailAuthProvider:Qo,FacebookAuthProvider:Mi,GithubAuthProvider:$i,GoogleAuthProvider:Li,OAuthProvider:Au,SAMLAuthProvider:Ug,PhoneAuthProvider:yS,PhoneMultiFactorGenerator:k$,RecaptchaVerifier:OY,TwitterAuthProvider:Fi,Auth:tI,AuthCredential:xc,Error:kn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(pY,mY)}MY(uy);var LY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q,vS=vS||{},ge=LY||self;function Iy(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Kf(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function $Y(t){return Object.prototype.hasOwnProperty.call(t,nw)&&t[nw]||(t[nw]=++FY)}var nw="closure_uid_"+(1e9*Math.random()>>>0),FY=0;function VY(t,e,n){return t.call.apply(t.bind,arguments)}function UY(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Nn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Nn=VY:Nn=UY,Nn.apply(null,arguments)}function Yp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function un(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Yo(){this.s=this.s,this.o=this.o}var jY=0;Yo.prototype.s=!1;Yo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),jY!=0)&&$Y(this)};Yo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const V$=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function wS(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function jA(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Iy(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function On(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}On.prototype.h=function(){this.defaultPrevented=!0};var BY=function(){if(!ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};ge.addEventListener("test",n,e),ge.removeEventListener("test",n,e)}catch{}return t}();function Qh(t){return/^[\s\xa0]*$/.test(t)}function Ty(){var t=ge.navigator;return t&&(t=t.userAgent)?t:""}function Vi(t){return Ty().indexOf(t)!=-1}function ES(t){return ES[" "](t),t}ES[" "]=function(){};function zY(t,e){var n=MX;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var WY=Vi("Opera"),Zu=Vi("Trident")||Vi("MSIE"),U$=Vi("Edge"),nI=U$||Zu,j$=Vi("Gecko")&&!(Ty().toLowerCase().indexOf("webkit")!=-1&&!Vi("Edge"))&&!(Vi("Trident")||Vi("MSIE"))&&!Vi("Edge"),qY=Ty().toLowerCase().indexOf("webkit")!=-1&&!Vi("Edge");function B$(){var t=ge.document;return t?t.documentMode:void 0}var rI;e:{var rw="",iw=function(){var t=Ty();if(j$)return/rv:([^\);]+)(\)|;)/.exec(t);if(U$)return/Edge\/([\d\.]+)/.exec(t);if(Zu)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qY)return/WebKit\/(\S+)/.exec(t);if(WY)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(iw&&(rw=iw?iw[1]:""),Zu){var sw=B$();if(sw!=null&&sw>parseFloat(rw)){rI=String(sw);break e}}rI=rw}var iI;if(ge.document&&Zu){var BA=B$();iI=BA||parseInt(rI,10)||void 0}else iI=void 0;var HY=iI;function Yh(t,e){if(On.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(j$){e:{try{ES(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:GY[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yh.$.h.call(this)}}un(Yh,On);var GY={2:"touch",3:"pen",4:"mouse"};Yh.prototype.h=function(){Yh.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Qf="closure_listenable_"+(1e6*Math.random()|0),KY=0;function QY(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++KY,this.fa=this.ia=!1}function by(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function IS(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function YY(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function z$(t){const e={};for(const n in t)e[n]=t[n];return e}const zA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W$(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<zA.length;s++)n=zA[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Sy(t){this.src=t,this.g={},this.h=0}Sy.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=oI(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new QY(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function sI(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=V$(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(by(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function oI(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var TS="closure_lm_"+(1e6*Math.random()|0),ow={};function q$(t,e,n,r,i){if(r&&r.once)return G$(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)q$(t,e[s],n,r,i);return null}return n=CS(n),t&&t[Qf]?t.O(e,n,Kf(r)?!!r.capture:!!r,i):H$(t,e,n,!1,r,i)}function H$(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Kf(i)?!!i.capture:!!i,a=SS(t);if(a||(t[TS]=a=new Sy(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=XY(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)BY||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Q$(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function XY(){function t(n){return e.call(t.src,t.listener,n)}const e=JY;return t}function G$(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)G$(t,e[s],n,r,i);return null}return n=CS(n),t&&t[Qf]?t.P(e,n,Kf(r)?!!r.capture:!!r,i):H$(t,e,n,!0,r,i)}function K$(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)K$(t,e[s],n,r,i);else r=Kf(r)?!!r.capture:!!r,n=CS(n),t&&t[Qf]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=oI(s,n,r,i),-1<n&&(by(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=SS(t))&&(e=t.g[e.toString()],t=-1,e&&(t=oI(e,n,r,i)),(n=-1<t?e[t]:null)&&bS(n))}function bS(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Qf])sI(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Q$(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=SS(e))?(sI(n,t),n.h==0&&(n.src=null,e[TS]=null)):by(t)}}}function Q$(t){return t in ow?ow[t]:ow[t]="on"+t}function JY(t,e){if(t.fa)t=!0;else{e=new Yh(e,this);var n=t.listener,r=t.la||t.src;t.ia&&bS(t),t=n.call(r,e)}return t}function SS(t){return t=t[TS],t instanceof Sy?t:null}var aw="__closure_events_fn_"+(1e9*Math.random()>>>0);function CS(t){return typeof t=="function"?t:(t[aw]||(t[aw]=function(e){return t.handleEvent(e)}),t[aw])}function ln(){Yo.call(this),this.i=new Sy(this),this.S=this,this.J=null}un(ln,Yo);ln.prototype[Qf]=!0;ln.prototype.removeEventListener=function(t,e,n,r){K$(this,t,e,n,r)};function Tn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new On(e,t);else if(e instanceof On)e.target=e.target||t;else{var i=e;e=new On(r,t),W$(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Xp(o,r,!0,e)&&i}if(o=e.g=t,i=Xp(o,r,!0,e)&&i,i=Xp(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Xp(o,r,!1,e)&&i}ln.prototype.N=function(){if(ln.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)by(n[r]);delete t.g[e],t.h--}}this.J=null};ln.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ln.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Xp(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&sI(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var RS=ge.JSON.stringify;class ZY{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function eX(){var t=xS;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class tX{constructor(){this.h=this.g=null}add(e,n){const r=Y$.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Y$=new ZY(()=>new nX,t=>t.reset());class nX{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function rX(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function iX(t){ge.setTimeout(()=>{throw t},0)}let Xh,Jh=!1,xS=new tX,X$=()=>{const t=ge.Promise.resolve(void 0);Xh=()=>{t.then(sX)}};var sX=()=>{for(var t;t=eX();){try{t.h.call(t.g)}catch(n){iX(n)}var e=Y$;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Jh=!1};function Cy(t,e){ln.call(this),this.h=t||1,this.g=e||ge,this.j=Nn(this.qb,this),this.l=Date.now()}un(Cy,ln);Q=Cy.prototype;Q.ga=!1;Q.T=null;Q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tn(this,"tick"),this.ga&&(AS(this),this.start()))}};Q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function AS(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Q.N=function(){Cy.$.N.call(this),AS(this),delete this.g};function PS(t,e,n){if(typeof t=="function")n&&(t=Nn(t,n));else if(t&&typeof t.handleEvent=="function")t=Nn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ge.setTimeout(t,e||0)}function J$(t){t.g=PS(()=>{t.g=null,t.i&&(t.i=!1,J$(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class oX extends Yo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:J$(this)}N(){super.N(),this.g&&(ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zh(t){Yo.call(this),this.h=t,this.g={}}un(Zh,Yo);var WA=[];function Z$(t,e,n,r){Array.isArray(n)||(n&&(WA[0]=n.toString()),n=WA);for(var i=0;i<n.length;i++){var s=q$(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function eF(t){IS(t.g,function(e,n){this.g.hasOwnProperty(n)&&bS(e)},t),t.g={}}Zh.prototype.N=function(){Zh.$.N.call(this),eF(this)};Zh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ry(){this.g=!0}Ry.prototype.Ea=function(){this.g=!1};function aX(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function lX(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function _u(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+cX(t,n)+(r?" "+r:"")})}function uX(t,e){t.info(function(){return"TIMEOUT: "+e})}Ry.prototype.info=function(){};function cX(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return RS(n)}catch{return e}}var bl={},qA=null;function xy(){return qA=qA||new ln}bl.Ta="serverreachability";function tF(t){On.call(this,bl.Ta,t)}un(tF,On);function ef(t){const e=xy();Tn(e,new tF(e))}bl.STAT_EVENT="statevent";function nF(t,e){On.call(this,bl.STAT_EVENT,t),this.stat=e}un(nF,On);function Bn(t){const e=xy();Tn(e,new nF(e,t))}bl.Ua="timingevent";function rF(t,e){On.call(this,bl.Ua,t),this.size=e}un(rF,On);function Yf(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ge.setTimeout(function(){t()},e)}var Ay={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},iF={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function kS(){}kS.prototype.h=null;function HA(t){return t.h||(t.h=t.i())}function sF(){}var Xf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function NS(){On.call(this,"d")}un(NS,On);function OS(){On.call(this,"c")}un(OS,On);var aI;function Py(){}un(Py,kS);Py.prototype.g=function(){return new XMLHttpRequest};Py.prototype.i=function(){return{}};aI=new Py;function Jf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Zh(this),this.P=dX,t=nI?125:void 0,this.V=new Cy(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new oF}function oF(){this.i=null,this.g="",this.h=!1}var dX=45e3,aF={},lI={};Q=Jf.prototype;Q.setTimeout=function(t){this.P=t};function uI(t,e,n){t.L=1,t.A=Ny(As(e)),t.u=n,t.S=!0,lF(t,null)}function lF(t,e){t.G=Date.now(),Zf(t),t.B=As(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),gF(n.i,"t",r),t.o=0,n=t.l.J,t.h=new oF,t.g=$F(t.l,n?e:null,!t.u),0<t.O&&(t.M=new oX(Nn(t.Pa,t,t.g),t.O)),Z$(t.U,t.g,"readystatechange",t.nb),e=t.I?z$(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ef(),aX(t.j,t.v,t.B,t.m,t.W,t.u)}Q.nb=function(t){t=t.target;const e=this.M;e&&zi(t)==3?e.l():this.Pa(t)};Q.Pa=function(t){try{if(t==this.g)e:{const c=zi(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||nI||this.g&&(this.h.h||this.g.ja()||YA(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?ef(3):ef(2)),ky(this);var n=this.g.da();this.ca=n;t:if(uF(this)){var r=YA(this.g);t="";var i=r.length,s=zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Aa(this),Zd(this);var o="";break t}this.h.i=new ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,lX(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qh(a)){var u=a;break t}}u=null}if(n=u)_u(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cI(this,n);else{this.i=!1,this.s=3,Bn(12),Aa(this),Zd(this);break e}}this.S?(cF(this,c,o),nI&&this.i&&c==3&&(Z$(this.U,this.V,"tick",this.mb),this.V.start())):(_u(this.j,this.m,o,null),cI(this,o)),c==4&&Aa(this),this.i&&!this.J&&(c==4?OF(this.l,this):(this.i=!1,Zf(this)))}else NX(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Bn(12)):(this.s=0,Bn(13)),Aa(this),Zd(this)}}}catch{}finally{}};function uF(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function cF(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=hX(t,n),i==lI){e==4&&(t.s=4,Bn(14),r=!1),_u(t.j,t.m,null,"[Incomplete Response]");break}else if(i==aF){t.s=4,Bn(15),_u(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else _u(t.j,t.m,i,null),cI(t,i);uF(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Bn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),VS(e),e.M=!0,Bn(11))):(_u(t.j,t.m,n,"[Invalid Chunked Response]"),Aa(t),Zd(t))}Q.mb=function(){if(this.g){var t=zi(this.g),e=this.g.ja();this.o<e.length&&(ky(this),cF(this,t,e),this.i&&t!=4&&Zf(this))}};function hX(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?lI:(n=Number(e.substring(n,r)),isNaN(n)?aF:(r+=1,r+n>e.length?lI:(e=e.slice(r,r+n),t.o=r+n,e)))}Q.cancel=function(){this.J=!0,Aa(this)};function Zf(t){t.Y=Date.now()+t.P,dF(t,t.P)}function dF(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Yf(Nn(t.lb,t),e)}function ky(t){t.C&&(ge.clearTimeout(t.C),t.C=null)}Q.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(uX(this.j,this.B),this.L!=2&&(ef(),Bn(17)),Aa(this),this.s=2,Zd(this)):dF(this,this.Y-t)};function Zd(t){t.l.H==0||t.J||OF(t.l,t)}function Aa(t){ky(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,AS(t.V),eF(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function cI(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||dI(n.i,t))){if(!t.K&&dI(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Hg(n),Ly(n);else break e;FS(n),Bn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Yf(Nn(n.ib,n),6e3));if(1>=vF(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Pa(n,11)}else if((t.K||n.g==t)&&Hg(n),!Qh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(DS(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,ut(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=LF(r,r.J?r.pa:null,r.Y),o.K){wF(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ky(a),Zf(a)),r.g=o}else kF(r);0<n.j.length&&$y(n)}else u[0]!="stop"&&u[0]!="close"||Pa(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Pa(n,7):$S(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ef(4)}catch{}}function fX(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Iy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function pX(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Iy(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function hF(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Iy(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=pX(t),r=fX(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var fF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mX(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function za(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof za){this.h=t.h,Wg(this,t.j),this.s=t.s,this.g=t.g,qg(this,t.m),this.l=t.l;var e=t.i,n=new tf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),GA(this,n),this.o=t.o}else t&&(e=String(t).match(fF))?(this.h=!1,Wg(this,e[1]||"",!0),this.s=Ad(e[2]||""),this.g=Ad(e[3]||"",!0),qg(this,e[4]),this.l=Ad(e[5]||"",!0),GA(this,e[6]||"",!0),this.o=Ad(e[7]||"")):(this.h=!1,this.i=new tf(null,this.h))}za.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Pd(e,KA,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Pd(e,KA,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Pd(n,n.charAt(0)=="/"?yX:_X,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Pd(n,wX)),t.join("")};function As(t){return new za(t)}function Wg(t,e,n){t.j=n?Ad(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function qg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function GA(t,e,n){e instanceof tf?(t.i=e,EX(t.i,t.h)):(n||(e=Pd(e,vX)),t.i=new tf(e,t.h))}function ut(t,e,n){t.i.set(e,n)}function Ny(t){return ut(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ad(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pd(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,gX),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gX(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var KA=/[#\/\?@]/g,_X=/[#\?:]/g,yX=/[#\?]/g,vX=/[#\?@]/g,wX=/#/g;function tf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xo(t){t.g||(t.g=new Map,t.h=0,t.i&&mX(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Q=tf.prototype;Q.add=function(t,e){Xo(this),this.i=null,t=Pc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function pF(t,e){Xo(t),e=Pc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function mF(t,e){return Xo(t),e=Pc(t,e),t.g.has(e)}Q.forEach=function(t,e){Xo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Q.ta=function(){Xo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Q.Z=function(t){Xo(this);let e=[];if(typeof t=="string")mF(this,t)&&(e=e.concat(this.g.get(Pc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Q.set=function(t,e){return Xo(this),this.i=null,t=Pc(this,t),mF(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function gF(t,e,n){pF(t,e),0<n.length&&(t.i=null,t.g.set(Pc(t,e),wS(n)),t.h+=n.length)}Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Pc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function EX(t,e){e&&!t.j&&(Xo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(pF(this,r),gF(this,i,n))},t)),t.j=e}var IX=class{constructor(t,e){this.g=t,this.map=e}};function _F(t){this.l=t||TX,ge.PerformanceNavigationTiming?(t=ge.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ge.g&&ge.g.Ka&&ge.g.Ka()&&ge.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var TX=10;function yF(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function vF(t){return t.h?1:t.g?t.g.size:0}function dI(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function DS(t,e){t.g?t.g.add(e):t.h=e}function wF(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}_F.prototype.cancel=function(){if(this.i=EF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function EF(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return wS(t.i)}var bX=class{stringify(t){return ge.JSON.stringify(t,void 0)}parse(t){return ge.JSON.parse(t,void 0)}};function SX(){this.g=new bX}function CX(t,e,n){const r=n||"";try{hF(t,function(i,s){let o=i;Kf(i)&&(o=RS(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function RX(t,e){const n=new Ry;if(ge.Image){const r=new Image;r.onload=Yp(Jp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Yp(Jp,n,r,"TestLoadImage: error",!1,e),r.onabort=Yp(Jp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yp(Jp,n,r,"TestLoadImage: timeout",!1,e),ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Jp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Oy(t){this.l=t.ec||null,this.j=t.ob||!1}un(Oy,kS);Oy.prototype.g=function(){return new Dy(this.l,this.j)};Oy.prototype.i=function(t){return function(){return t}}({});function Dy(t,e){ln.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=MS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}un(Dy,ln);var MS=0;Q=Dy.prototype;Q.open=function(t,e){if(this.readyState!=MS)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,nf(this)};Q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ep(this)),this.readyState=MS};Q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,nf(this)),this.g&&(this.readyState=3,nf(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;IF(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function IF(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ep(this):nf(this),this.readyState==3&&IF(this)}};Q.Za=function(t){this.g&&(this.response=this.responseText=t,ep(this))};Q.Ya=function(t){this.g&&(this.response=t,ep(this))};Q.ka=function(){this.g&&ep(this)};function ep(t){t.readyState=4,t.l=null,t.j=null,t.A=null,nf(t)}Q.setRequestHeader=function(t,e){this.v.append(t,e)};Q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function nf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Dy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var xX=ge.JSON.parse;function kt(t){ln.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=TF,this.L=this.M=!1}un(kt,ln);var TF="",AX=/^https?$/i,PX=["POST","PUT"];Q=kt.prototype;Q.Oa=function(t){this.M=t};Q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():aI.g(),this.C=this.u?HA(this.u):HA(aI),this.g.onreadystatechange=Nn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){QA(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ge.FormData&&t instanceof ge.FormData,!(0<=V$(PX,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{CF(this),0<this.B&&((this.L=kX(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nn(this.ua,this)):this.A=PS(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){QA(this,s)}};function kX(t){return Zu&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Q.ua=function(){typeof vS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tn(this,"timeout"),this.abort(8))};function QA(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,bF(t),My(t)}function bF(t){t.F||(t.F=!0,Tn(t,"complete"),Tn(t,"error"))}Q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tn(this,"complete"),Tn(this,"abort"),My(this))};Q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),My(this,!0)),kt.$.N.call(this)};Q.La=function(){this.s||(this.G||this.v||this.l?SF(this):this.kb())};Q.kb=function(){SF(this)};function SF(t){if(t.h&&typeof vS<"u"&&(!t.C[1]||zi(t)!=4||t.da()!=2)){if(t.v&&zi(t)==4)PS(t.La,0,t);else if(Tn(t,"readystatechange"),zi(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(fF)[1]||null;!i&&ge.self&&ge.self.location&&(i=ge.self.location.protocol.slice(0,-1)),r=!AX.test(i?i.toLowerCase():"")}n=r}if(n)Tn(t,"complete"),Tn(t,"success");else{t.m=6;try{var s=2<zi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",bF(t)}}finally{My(t)}}}}function My(t,e){if(t.g){CF(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Tn(t,"ready");try{n.onreadystatechange=r}catch{}}}function CF(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ge.clearTimeout(t.A),t.A=null)}Q.isActive=function(){return!!this.g};function zi(t){return t.g?t.g.readyState:0}Q.da=function(){try{return 2<zi(this)?this.g.status:-1}catch{return-1}};Q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),xX(e)}};function YA(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case TF:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function NX(t){const e={};t=(t.g&&2<=zi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Qh(t[r]))continue;var n=rX(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}YY(e,function(r){return r.join(", ")})}Q.Ia=function(){return this.m};Q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function RF(t){let e="";return IS(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function LS(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=RF(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ut(t,e,n))}function od(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xF(t){this.Ga=0,this.j=[],this.l=new Ry,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=od("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=od("baseRetryDelayMs",5e3,t),this.hb=od("retryDelaySeedMs",1e4,t),this.eb=od("forwardChannelMaxRetries",2,t),this.xa=od("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new _F(t&&t.concurrentRequestLimit),this.Ja=new SX,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Q=xF.prototype;Q.ra=8;Q.H=1;function $S(t){if(AF(t),t.H==3){var e=t.W++,n=As(t.I);if(ut(n,"SID",t.K),ut(n,"RID",e),ut(n,"TYPE","terminate"),tp(t,n),e=new Jf(t,t.l,e),e.L=2,e.A=Ny(As(n)),n=!1,ge.navigator&&ge.navigator.sendBeacon)try{n=ge.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ge.Image&&(new Image().src=e.A,n=!0),n||(e.g=$F(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Zf(e)}MF(t)}function Ly(t){t.g&&(VS(t),t.g.cancel(),t.g=null)}function AF(t){Ly(t),t.u&&(ge.clearTimeout(t.u),t.u=null),Hg(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ge.clearTimeout(t.m),t.m=null)}function $y(t){if(!yF(t.i)&&!t.m){t.m=!0;var e=t.Na;Xh||X$(),Jh||(Xh(),Jh=!0),xS.add(e,t),t.C=0}}function OX(t,e){return vF(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Yf(Nn(t.Na,t,e),DF(t,t.C)),t.C++,!0)}Q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Jf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=z$(s),W$(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=PF(this,i,e),n=As(this.I),ut(n,"RID",t),ut(n,"CVER",22),this.F&&ut(n,"X-HTTP-Session-Id",this.F),tp(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(RF(s)))+"&"+e:this.o&&LS(n,this.o,s)),DS(this.i,i),this.bb&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",e),ut(n,"SID","null"),i.aa=!0,uI(i,n,null)):uI(i,n,e),this.H=2}}else this.H==3&&(t?XA(this,t):this.j.length==0||yF(this.i)||XA(this))};function XA(t,e){var n;e?n=e.m:n=t.W++;const r=As(t.I);ut(r,"SID",t.K),ut(r,"RID",n),ut(r,"AID",t.V),tp(t,r),t.o&&t.s&&LS(r,t.o,t.s),n=new Jf(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=PF(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),DS(t.i,n),uI(n,r,e)}function tp(t,e){t.na&&IS(t.na,function(n,r){ut(e,r,n)}),t.h&&hF({},function(n,r){ut(e,r,n)})}function PF(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Nn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{CX(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function kF(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Xh||X$(),Jh||(Xh(),Jh=!0),xS.add(e,t),t.A=0}}function FS(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Yf(Nn(t.Ma,t),DF(t,t.A)),t.A++,!0)}Q.Ma=function(){if(this.u=null,NF(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Yf(Nn(this.jb,this),t)}};Q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bn(10),Ly(this),NF(this))};function VS(t){t.B!=null&&(ge.clearTimeout(t.B),t.B=null)}function NF(t){t.g=new Jf(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=As(t.wa);ut(e,"RID","rpc"),ut(e,"SID",t.K),ut(e,"AID",t.V),ut(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ut(e,"TO",t.qa),ut(e,"TYPE","xmlhttp"),tp(t,e),t.o&&t.s&&LS(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ny(As(e)),n.u=null,n.S=!0,lF(n,t)}Q.ib=function(){this.v!=null&&(this.v=null,Ly(this),FS(this),Bn(19))};function Hg(t){t.v!=null&&(ge.clearTimeout(t.v),t.v=null)}function OF(t,e){var n=null;if(t.g==e){Hg(t),VS(t),t.g=null;var r=2}else if(dI(t.i,e))n=e.F,wF(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=xy(),Tn(r,new rF(r,n)),$y(t)}else kF(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&OX(t,e)||r==2&&FS(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Pa(t,5);break;case 4:Pa(t,10);break;case 3:Pa(t,6);break;default:Pa(t,2)}}}function DF(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Pa(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Nn(t.pb,t);n||(n=new za("//www.google.com/images/cleardot.gif"),ge.location&&ge.location.protocol=="http"||Wg(n,"https"),Ny(n)),RX(n.toString(),r)}else Bn(2);t.H=0,t.h&&t.h.za(e),MF(t),AF(t)}Q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Bn(2)):(this.l.info("Failed to ping google.com"),Bn(1))};function MF(t){if(t.H=0,t.ma=[],t.h){const e=EF(t.i);(e.length!=0||t.j.length!=0)&&(jA(t.ma,e),jA(t.ma,t.j),t.i.i.length=0,wS(t.j),t.j.length=0),t.h.ya()}}function LF(t,e,n){var r=n instanceof za?As(n):new za(n);if(r.g!="")e&&(r.g=e+"."+r.g),qg(r,r.m);else{var i=ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new za(null);r&&Wg(s,r),e&&(s.g=e),i&&qg(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ut(r,n,e),ut(r,"VER",t.ra),tp(t,r),r}function $F(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new kt(new Oy({ob:n})):new kt(t.va),e.Oa(t.J),e}Q.isActive=function(){return!!this.h&&this.h.isActive(this)};function FF(){}Q=FF.prototype;Q.Ba=function(){};Q.Aa=function(){};Q.za=function(){};Q.ya=function(){};Q.isActive=function(){return!0};Q.Va=function(){};function Gg(){if(Zu&&!(10<=Number(HY)))throw Error("Environmental error: no available transport.")}Gg.prototype.g=function(t,e){return new Dr(t,e)};function Dr(t,e){ln.call(this),this.g=new xF(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Qh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qh(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new kc(this)}un(Dr,ln);Dr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Bn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=LF(t,null,t.Y),$y(t)};Dr.prototype.close=function(){$S(this.g)};Dr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=RS(t),t=n);e.j.push(new IX(e.fb++,t)),e.H==3&&$y(e)};Dr.prototype.N=function(){this.g.h=null,delete this.j,$S(this.g),delete this.g,Dr.$.N.call(this)};function VF(t){NS.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}un(VF,NS);function UF(){OS.call(this),this.status=1}un(UF,OS);function kc(t){this.g=t}un(kc,FF);kc.prototype.Ba=function(){Tn(this.g,"a")};kc.prototype.Aa=function(t){Tn(this.g,new VF(t))};kc.prototype.za=function(t){Tn(this.g,new UF)};kc.prototype.ya=function(){Tn(this.g,"b")};function DX(){this.blockSize=-1}function Ci(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}un(Ci,DX);Ci.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function lw(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Ci.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)lw(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){lw(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){lw(this,r),i=0;break}}this.h=i,this.i+=e};Ci.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ge(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var MX={};function US(t){return-128<=t&&128>t?zY(t,function(e){return new Ge([e|0],0>e?-1:0)}):new Ge([t|0],0>t?-1:0)}function Wi(t){if(isNaN(t)||!isFinite(t))return ku;if(0>t)return vn(Wi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=hI;return new Ge(e,0)}function jF(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return vn(jF(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Wi(Math.pow(e,8)),r=ku,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Wi(Math.pow(e,s)),r=r.R(s).add(Wi(o))):(r=r.R(n),r=r.add(Wi(o)))}return r}var hI=4294967296,ku=US(0),fI=US(1),JA=US(16777216);Q=Ge.prototype;Q.ea=function(){if(Hr(this))return-vn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:hI+r)*e,e*=hI}return t};Q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ms(this))return"0";if(Hr(this))return"-"+vn(this).toString(t);for(var e=Wi(Math.pow(t,6)),n=this,r="";;){var i=Qg(n,e).g;n=Kg(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ms(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};Q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ms(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Hr(t){return t.h==-1}Q.X=function(t){return t=Kg(this,t),Hr(t)?-1:ms(t)?0:1};function vn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ge(n,~t.h).add(fI)}Q.abs=function(){return Hr(this)?vn(this):this};Q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ge(n,n[n.length-1]&-2147483648?-1:0)};function Kg(t,e){return t.add(vn(e))}Q.R=function(t){if(ms(this)||ms(t))return ku;if(Hr(this))return Hr(t)?vn(this).R(vn(t)):vn(vn(this).R(t));if(Hr(t))return vn(this.R(vn(t)));if(0>this.X(JA)&&0>t.X(JA))return Wi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Zp(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Zp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Zp(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Zp(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ge(n,0)};function Zp(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ad(t,e){this.g=t,this.h=e}function Qg(t,e){if(ms(e))throw Error("division by zero");if(ms(t))return new ad(ku,ku);if(Hr(t))return e=Qg(vn(t),e),new ad(vn(e.g),vn(e.h));if(Hr(e))return e=Qg(t,vn(e)),new ad(vn(e.g),e.h);if(30<t.g.length){if(Hr(t)||Hr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=fI,r=e;0>=r.X(t);)n=ZA(n),r=ZA(r);var i=Vl(n,1),s=Vl(r,1);for(r=Vl(r,2),n=Vl(n,2);!ms(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Vl(r,1),n=Vl(n,1)}return e=Kg(t,i.R(e)),new ad(i,e)}for(i=ku;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Wi(n),o=s.R(e);Hr(o)||0<o.X(t);)n-=r,s=Wi(n),o=s.R(e);ms(s)&&(s=fI),i=i.add(s),t=Kg(t,o)}return new ad(i,t)}Q.gb=function(t){return Qg(this,t).h};Q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ge(n,this.h&t.h)};Q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ge(n,this.h|t.h)};Q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ge(n,this.h^t.h)};function ZA(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ge(n,t.h)}function Vl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ge(i,t.h)}Gg.prototype.createWebChannel=Gg.prototype.g;Dr.prototype.send=Dr.prototype.u;Dr.prototype.open=Dr.prototype.m;Dr.prototype.close=Dr.prototype.close;Ay.NO_ERROR=0;Ay.TIMEOUT=8;Ay.HTTP_ERROR=6;iF.COMPLETE="complete";sF.EventType=Xf;Xf.OPEN="a";Xf.CLOSE="b";Xf.ERROR="c";Xf.MESSAGE="d";ln.prototype.listen=ln.prototype.O;kt.prototype.listenOnce=kt.prototype.P;kt.prototype.getLastError=kt.prototype.Sa;kt.prototype.getLastErrorCode=kt.prototype.Ia;kt.prototype.getStatus=kt.prototype.da;kt.prototype.getResponseJson=kt.prototype.Wa;kt.prototype.getResponseText=kt.prototype.ja;kt.prototype.send=kt.prototype.ha;kt.prototype.setWithCredentials=kt.prototype.Oa;Ci.prototype.digest=Ci.prototype.l;Ci.prototype.reset=Ci.prototype.reset;Ci.prototype.update=Ci.prototype.j;Ge.prototype.add=Ge.prototype.add;Ge.prototype.multiply=Ge.prototype.R;Ge.prototype.modulo=Ge.prototype.gb;Ge.prototype.compare=Ge.prototype.X;Ge.prototype.toNumber=Ge.prototype.ea;Ge.prototype.toString=Ge.prototype.toString;Ge.prototype.getBits=Ge.prototype.D;Ge.fromNumber=Wi;Ge.fromString=jF;var LX=function(){return new Gg},$X=function(){return xy()},uw=Ay,FX=iF,VX=bl,eP={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},em=sF,UX=kt,jX=Ci,Nu=Ge,BX={};const tP="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new Lf("@firebase/firestore");function Xl(){return No.logLevel}function zX(t){No.setLogLevel(t)}function D(t,...e){if(No.logLevel<=Te.DEBUG){const n=e.map(jS);No.debug(`Firestore (${Nc}): ${t}`,...n)}}function $t(t,...e){if(No.logLevel<=Te.ERROR){const n=e.map(jS);No.error(`Firestore (${Nc}): ${t}`,...n)}}function Ri(t,...e){if(No.logLevel<=Te.WARN){const n=e.map(jS);No.warn(`Firestore (${Nc}): ${t}`,...n)}}function jS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${Nc}) INTERNAL ASSERTION FAILED: `+t;throw $t(e),new Error(e)}function ie(t,e){t||J()}function WX(t,e){t||J()}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class HX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GX{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new on;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new on,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new on)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new BF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new nn(e)}}class KX{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class QX{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new KX(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YX{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string"),this.R=n.token,new YX(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=JX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function ec(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function WF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new _t(0,0))}static max(){return new ae(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends rf{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new O(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const ZX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends rf{construct(e,n,r){return new mt(e,n,r)}static isValidIdentifier(e){return ZX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new O(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new O(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new O(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(Le.fromString(e))}static fromName(e){return new H(Le.fromString(e).popFirst(5))}static empty(){return new H(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new Le(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function pI(t){return t.fields.find(e=>e.kind===2)}function ha(t){return t.fields.filter(e=>e.kind!==2)}Yg.UNKNOWN_ID=-1;class Nm{constructor(e,n){this.fieldPath=e,this.kind=n}}class sf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new sf(0,Mr.min())}}function qF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new Mr(i,H.empty(),e)}function HF(t){return new Mr(t.readTime,t.key,-1)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(ae.min(),H.empty(),-1)}static max(){return new Mr(ae.max(),H.empty(),-1)}}function BS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==GF)throw t;D("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new R((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):R.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):R.reject(n)}static resolve(e){return new R((n,r)=>{n(e)})}static reject(e){return new R((n,r)=>{r(e)})}static waitFor(e){return new R((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=R.resolve(!1);for(const r of e)n=n.next(i=>i?R.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new R((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new R((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new on,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new eh(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=zS(r.target.error);this.V.reject(new eh(e,i))}}static open(e,n,r,i){try{return new Fy(n,e.transaction(i,r))}catch(s){throw new eh(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tJ(n)}}class _i{constructor(e,n,r){this.name=e,this.version=n,this.p=r,_i.S(Tt())===12.2&&$t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),ya(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!kh())return!1;if(_i.C())return!0;const e=Tt(),n=_i.S(e),r=0<n&&n<10,i=_i.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=BX)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(D("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new eh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new O(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new O(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new eh(e,o))},i.onupgradeneeded=s=>{D("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{D("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Fy.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),R.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(D("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class eJ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ya(this.k.delete())}}class eh extends O{constructor(e,n){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Zo(t){return t.name==="IndexedDbTransactionError"}class tJ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ya(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),ya(this.store.add(e))}get(e){return ya(this.store.get(e)).next(n=>(n===void 0&&(n=null),D("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),ya(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),ya(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new R((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new R((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){D("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new R((r,i)=>{n.onerror=s=>{const o=zS(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new R((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new eJ(a),u=n(a.primaryKey,a.value,l);if(u instanceof R){const c=u.catch(d=>(l.done(),R.reject(d)));r.push(c)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>R.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ya(t){return new R((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=zS(r.target.error);n(i)}})}let nP=!1;function zS(t){const e=_i.S(Tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nP||(nP=!0,setTimeout(()=>{throw r},0)),r}}return t}class nJ{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){D("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{D("IndexBackiller",`Documents written: ${await this.X.te()}`)}catch(n){Zo(n)?D("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Jo(n)}await this.ee(6e4)})}}class rJ{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const r=new Set;let i=n,s=!0;return R.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return D("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(D("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=HF(s);BS(o,r)>0&&(r=o)}),new Mr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}ar._e=-1;function np(t){return t==null}function of(t){return t===0&&1/t==-1/0}function QF(t){return typeof t=="number"&&Number.isInteger(t)&&!of(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rP(e)),e=iJ(t.get(n),e);return rP(e)}function iJ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function rP(t){return t+""}function qi(t){const e=t.length;if(ie(e>=2),e===2)return ie(t.charAt(0)===""&&t.charAt(1)===""),Le.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&J(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:J()}s=o+2}return new Le(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t,e){return[t,qn(e)]}function YF(t,e,n){return[t,qn(e),n]}const sJ={},oJ=["prefixPath","collectionGroup","readTime","documentId"],aJ=["prefixPath","collectionGroup","documentId"],lJ=["collectionGroup","readTime","prefixPath","documentId"],uJ=["canonicalId","targetId"],cJ=["targetId","path"],dJ=["path","targetId"],hJ=["collectionId","parent"],fJ=["indexId","uid"],pJ=["uid","sequenceNumber"],mJ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gJ=["indexId","uid","orderedDocumentKey"],_J=["userId","collectionPath","documentId"],yJ=["userId","collectionPath","largestBatchId"],vJ=["userId","collectionGroup","largestBatchId"],XF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wJ=[...XF,"documentOverlays"],JF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZF=JF,EJ=[...ZF,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends KF{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function cn(t,e){const n=K(t);return _i.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tm(this.root,e,this.comparator,!1)}getReverseIterator(){return new tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tm(this.root,e,this.comparator,!0)}}class tm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_n.RED,this.left=i??_n.EMPTY,this.right=s??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _n(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oP(this.data.getIterator())}getIteratorFrom(e){return new oP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class oP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ul(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new lr([])}unionWith(e){let n=new Ye(mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new lr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tV("Invalid base64 string: "+s):s}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const TJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(t){if(ie(!!t),typeof t=="string"){let e=0;const n=TJ.exec(t);if(ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(t.seconds),nanos:Rt(t.nanos)}}function Rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Do(t){return typeof t=="string"?Yt.fromBase64String(t):Yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function WS(t){const e=t.mapValue.fields.__previous_value__;return Vy(e)?WS(e):e}function af(t){const e=Oo(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Mo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dm={nullValue:"NULL_VALUE"};function il(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vy(t)?4:nV(t)?9007199254740991:10:J()}function es(t,e){if(t===e)return!0;const n=il(t);if(n!==il(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return af(t).isEqual(af(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Oo(i.timestampValue),a=Oo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Do(i.bytesValue).isEqual(Do(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Rt(i.geoPointValue.latitude)===Rt(s.geoPointValue.latitude)&&Rt(i.geoPointValue.longitude)===Rt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Rt(i.integerValue)===Rt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Rt(i.doubleValue),a=Rt(s.doubleValue);return o===a?of(o)===of(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ec(t.arrayValue.values||[],e.arrayValue.values||[],es);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(sP(o)!==sP(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!es(o[l],a[l])))return!1;return!0}(t,e);default:return J()}}function lf(t,e){return(t.values||[]).find(n=>es(n,e))!==void 0}function Lo(t,e){if(t===e)return 0;const n=il(t),r=il(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Rt(s.integerValue||s.doubleValue),l=Rt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return aP(t.timestampValue,e.timestampValue);case 4:return aP(af(t),af(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Do(s),l=Do(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=_e(a[u],l[u]);if(c!==0)return c}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=_e(Rt(s.latitude),Rt(o.latitude));return a!==0?a:_e(Rt(s.longitude),Rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=Lo(a[u],l[u]);if(c)return c}return _e(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===oo.mapValue&&o===oo.mapValue)return 0;if(s===oo.mapValue)return 1;if(o===oo.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const h=_e(l[d],c[d]);if(h!==0)return h;const f=Lo(a[l[d]],u[c[d]]);if(f!==0)return f}return _e(l.length,c.length)}(t.mapValue,e.mapValue);default:throw J()}}function aP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Oo(t),r=Oo(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function tc(t){return gI(t)}function gI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Oo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Do(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=gI(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${gI(n.fields[o])}`;return i+"}"}(t.mapValue):J()}function sl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _I(t){return!!t&&"integerValue"in t}function uf(t){return!!t&&"arrayValue"in t}function lP(t){return!!t&&"nullValue"in t}function uP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mm(t){return!!t&&"mapValue"in t}function th(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=th(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=th(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function SJ(t){return"nullValue"in t?Dm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?sl(Mo.empty(),H.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:J()}function CJ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?sl(Mo.empty(),H.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?oo:J()}function cP(t,e){const n=Lo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function dP(t,e){const n=Lo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=th(n)}setAll(e){let n=mt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=th(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Mm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return es(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Sl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wn(th(this.value))}}function rV(t){const e=[];return Sl(t.fields,(n,r)=>{const i=new mt([n]);if(Mm(r)){const s=rV(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ct(e,0,ae.min(),ae.min(),ae.min(),wn.empty(),0)}static newFoundDocument(e,n,r,i){return new ct(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new ct(e,2,n,ae.min(),ae.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,ae.min(),ae.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this.position=e,this.inclusive=n}}function hP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Lo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!es(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n="asc"){this.field=e,this.dir=n}}function RJ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{}class Re extends iV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xJ(e,n,r):n==="array-contains"?new kJ(e,r):n==="in"?new cV(e,r):n==="not-in"?new NJ(e,r):n==="array-contains-any"?new OJ(e,r):new Re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AJ(e,r):new PJ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Lo(n,this.value)):n!==null&&il(this.value)===il(n)&&this.matchesComparison(Lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qe extends iV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new qe(e,n)}matches(e){return nc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function nc(t){return t.op==="and"}function yI(t){return t.op==="or"}function qS(t){return sV(t)&&nc(t)}function sV(t){for(const e of t.filters)if(e instanceof qe)return!1;return!0}function vI(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+tc(t.value);if(qS(t))return t.filters.map(e=>vI(e)).join(",");{const e=t.filters.map(n=>vI(n)).join(",");return`${t.op}(${e})`}}function oV(t,e){return t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&es(r.value,i.value)}(t,e):t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&oV(o,i.filters[a]),!0):!1}(t,e):void J()}function aV(t,e){const n=t.filters.concat(e);return qe.create(n,t.op)}function lV(t){return t instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${tc(n.value)}`}(t):t instanceof qe?function(n){return n.op.toString()+" {"+n.getFilters().map(lV).join(" ,")+"}"}(t):"Filter"}class xJ extends Re{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class AJ extends Re{constructor(e,n){super(e,"in",n),this.keys=uV("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PJ extends Re{constructor(e,n){super(e,"not-in",n),this.keys=uV("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uV(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class kJ extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uf(n)&&lf(n.arrayValue,this.value)}}class cV extends Re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lf(this.value.arrayValue,n)}}class NJ extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!lf(this.value.arrayValue,n)}}class OJ extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DJ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function wI(t,e=null,n=[],r=[],i=null,s=null,o=null){return new DJ(t,e,n,r,i,s,o)}function ol(t){const e=K(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),np(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>tc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>tc(r)).join(",")),e.ce=n}return e.ce}function rp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RJ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fP(t.startAt,e.startAt)&&fP(t.endAt,e.endAt)}function Xg(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Jg(t,e){return t.filters.filter(n=>n instanceof Re&&n.field.isEqual(e))}function pP(t,e,n){let r=Dm,i=!0;for(const s of Jg(t,e)){let o=Dm,a=!0;switch(s.op){case"<":case"<=":o=SJ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Dm}cP({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];cP({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function mP(t,e,n){let r=oo,i=!0;for(const s of Jg(t,e)){let o=oo,a=!0;switch(s.op){case">=":case">":o=CJ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=oo}dP({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];dP({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function dV(t,e,n,r,i,s,o,a){return new $s(t,e,n,r,i,s,o,a)}function Oc(t){return new $s(t)}function gP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HS(t){return t.collectionGroup!==null}function Ou(t){const e=K(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ye(mt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new cf(s,r))}),n.has(mt.keyField().canonicalString())||e.le.push(new cf(mt.keyField(),r))}return e.le}function Hn(t){const e=K(t);return e.he||(e.he=MJ(e,Ou(t))),e.he}function MJ(t,e){if(t.limitType==="F")return wI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new cf(i.field,s)});const n=t.endAt?new $o(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $o(t.startAt.position,t.startAt.inclusive):null;return wI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function EI(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zg(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ip(t,e){return rp(Hn(t),Hn(e))&&t.limitType===e.limitType}function hV(t){return`${ol(Hn(t))}|lt:${t.limitType}`}function Jl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lV(i)).join(", ")}]`),np(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>tc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>tc(i)).join(",")),`Target(${r})`}(Hn(t))}; limitType=${t.limitType})`}function sp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ou(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=hP(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Ou(r),i)||r.endAt&&!function(o,a,l){const u=hP(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Ou(r),i))}(t,e)}function fV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pV(t){return(e,n)=>{let r=!1;for(const i of Ou(t)){const s=LJ(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function LJ(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Lo(l,u):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $J=new rt(H.comparator);function ur(){return $J}const mV=new rt(H.comparator);function kd(...t){let e=mV;for(const n of t)e=e.insert(n.key,n);return e}function gV(t){let e=mV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return nh()}function _V(){return nh()}function nh(){return new ea(t=>t.toString(),(t,e)=>t.isEqual(e))}const FJ=new rt(H.comparator),VJ=new Ye(H.comparator);function ye(...t){let e=VJ;for(const n of t)e=e.add(n);return e}const UJ=new Ye(_e);function GS(){return UJ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:of(e)?"-0":e}}function vV(t){return{integerValue:""+t}}function wV(t,e){return QF(e)?vV(e):yV(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this._=void 0}}function jJ(t,e,n){return t instanceof rc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Vy(s)&&(s=WS(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof al?IV(t,e):t instanceof ll?TV(t,e):function(i,s){const o=EV(i,s),a=_P(o)+_P(i.Ie);return _I(o)&&_I(i.Ie)?vV(a):yV(i.serializer,a)}(t,e)}function BJ(t,e,n){return t instanceof al?IV(t,e):t instanceof ll?TV(t,e):n}function EV(t,e){return t instanceof ic?function(r){return _I(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class rc extends Uy{}class al extends Uy{constructor(e){super(),this.elements=e}}function IV(t,e){const n=bV(e);for(const r of t.elements)n.some(i=>es(i,r))||n.push(r);return{arrayValue:{values:n}}}class ll extends Uy{constructor(e){super(),this.elements=e}}function TV(t,e){let n=bV(e);for(const r of t.elements)n=n.filter(i=>!es(i,r));return{arrayValue:{values:n}}}class ic extends Uy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function _P(t){return Rt(t.integerValue||t.doubleValue)}function bV(t){return uf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){this.field=e,this.transform=n}}function zJ(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof al&&i instanceof al||r instanceof ll&&i instanceof ll?ec(r.elements,i.elements,es):r instanceof ic&&i instanceof ic?es(r.Ie,i.Ie):r instanceof rc&&i instanceof rc}(t.transform,e.transform)}class WJ{constructor(e,n){this.version=e,this.transformResults=n}}class gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jy{}function SV(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mc(t.key,gt.none()):new Dc(t.key,t.data,gt.none());{const n=t.data,r=wn.empty();let i=new Ye(mt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fs(t.key,r,new lr(i.toArray()),gt.none())}}function qJ(t,e,n){t instanceof Dc?function(i,s,o){const a=i.value.clone(),l=vP(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Fs?function(i,s,o){if(!Lm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=vP(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(CV(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function rh(t,e,n,r){return t instanceof Dc?function(s,o,a,l){if(!Lm(s.precondition,o))return a;const u=s.value.clone(),c=wP(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fs?function(s,o,a,l){if(!Lm(s.precondition,o))return a;const u=wP(s.fieldTransforms,l,o),c=o.data;return c.setAll(CV(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Lm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function HJ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=EV(r.transform,i||null);s!=null&&(n===null&&(n=wn.empty()),n.set(r.field,s))}return n||null}function yP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ec(r,i,(s,o)=>zJ(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dc extends jy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fs extends jy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vP(t,e,n){const r=new Map;ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,BJ(o,a,n[i]))}return r}function wP(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,jJ(s,o,e))}return r}class Mc extends jy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KS extends jy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qJ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=rh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=rh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_V();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=SV(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(n,r)=>yP(n,r))&&ec(this.baseMutations,e.baseMutations,(n,r)=>yP(n,r))}}class YS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ie(e.mutations.length===r.length);let i=function(){return FJ}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new YS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GJ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Me;function RV(t){switch(t){default:return J();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function xV(t){if(t===void 0)return $t("GRPC error has no .code"),k.UNKNOWN;switch(t){case Ut.OK:return k.OK;case Ut.CANCELLED:return k.CANCELLED;case Ut.UNKNOWN:return k.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return k.INTERNAL;case Ut.UNAVAILABLE:return k.UNAVAILABLE;case Ut.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Ut.NOT_FOUND:return k.NOT_FOUND;case Ut.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Ut.ABORTED:return k.ABORTED;case Ut.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Ut.DATA_LOSS:return k.DATA_LOSS;default:return J()}}(Me=Ut||(Ut={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KJ=new Nu([4294967295,4294967295],0);function EP(t){const e=AV().encode(t),n=new jX;return n.update(e),new Uint8Array(n.digest())}function IP(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Nu([n,r],0),new Nu([i,s],0)]}class JS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nd(`Invalid padding: ${n}`);if(r<0)throw new Nd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nd(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Nu.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Nu.fromNumber(r)));return i.compare(KJ)===1&&(i=new Nu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=EP(e),[r,i]=IP(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new JS(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=EP(e),[r,i]=IP(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,lp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ap(ae.min(),i,new rt(_e),ur(),ye())}}class lp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lp(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class PV{constructor(e,n){this.targetId=e,this.fe=n}}class kV{constructor(e,n,r=Yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TP{constructor(){this.ge=0,this.pe=SP(),this.ye=Yt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ye(),n=ye(),r=ye();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new lp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=SP()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ie(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class QJ{constructor(e){this.Le=e,this.ke=new Map,this.qe=ur(),this.Qe=bP(),this.Ke=new rt(_e)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Xg(s))if(r===0){const o=new H(s.path);this.We(n,o,ct.newNoDocument(o,ae.min()))}else ie(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Do(r).toUint8Array()}catch(l){if(l instanceof tV)return Ri("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new JS(o,i,s)}catch(l){return Ri(l instanceof Nd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Xg(a.target)){const l=new H(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,ct.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=ye();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new ap(e,n,this.Ke,this.qe,r);return this.qe=ur(),this.Qe=bP(),this.Ke=new rt(_e),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new TP,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ye(_e),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new TP),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function bP(){return new rt(H.comparator)}function SP(){return new rt(H.comparator)}const YJ={asc:"ASCENDING",desc:"DESCENDING"},XJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JJ={and:"AND",or:"OR"};class ZJ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function II(t,e){return t.useProto3Json||np(e)?e:{value:e}}function sc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eZ(t,e){return sc(t,e.toTimestamp())}function Ft(t){return ie(!!t),ae.fromTimestamp(function(n){const r=Oo(n);return new _t(r.seconds,r.nanos)}(t))}function ZS(t,e){return function(r){return new Le(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function OV(t){const e=Le.fromString(t);return ie(BV(e)),e}function df(t,e){return ZS(t.databaseId,e.path)}function Qi(t,e){const n=OV(e);if(n.get(1)!==t.databaseId.projectId)throw new O(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(MV(n))}function TI(t,e){return ZS(t.databaseId,e)}function DV(t){const e=OV(t);return e.length===4?Le.emptyPath():MV(e)}function hf(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MV(t){return ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function CP(t,e,n){return{name:df(t,e),fields:n.value.mapValue.fields}}function LV(t,e,n){const r=Qi(t,e.name),i=Ft(e.updateTime),s=e.createTime?Ft(e.createTime):ae.min(),o=new wn({mapValue:{fields:e.fields}}),a=ct.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function tZ(t,e){return"found"in e?function(r,i){ie(!!i.found),i.found.name,i.found.updateTime;const s=Qi(r,i.found.name),o=Ft(i.found.updateTime),a=i.found.createTime?Ft(i.found.createTime):ae.min(),l=new wn({mapValue:{fields:i.found.fields}});return ct.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ie(!!i.missing),ie(!!i.readTime);const s=Qi(r,i.missing),o=Ft(i.readTime);return ct.newNoDocument(s,o)}(t,e):J()}function nZ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ie(c===void 0||typeof c=="string"),Yt.fromBase64String(c||"")):(ie(c===void 0||c instanceof Uint8Array),Yt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?k.UNKNOWN:xV(u.code);return new O(c,u.message||"")}(o);n=new kV(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qi(t,r.document.name),s=Ft(r.document.updateTime),o=r.document.createTime?Ft(r.document.createTime):ae.min(),a=new wn({mapValue:{fields:r.document.fields}}),l=ct.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new $m(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Qi(t,r.document),s=r.readTime?Ft(r.readTime):ae.min(),o=ct.newNoDocument(i,s),a=r.removedTargetIds||[];n=new $m([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Qi(t,r.document),s=r.removedTargetIds||[];n=new $m([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new GJ(i,s),a=r.targetId;n=new PV(a,o)}}return n}function ff(t,e){let n;if(e instanceof Dc)n={update:CP(t,e.key,e.value)};else if(e instanceof Mc)n={delete:df(t,e.key)};else if(e instanceof Fs)n={update:CP(t,e.key,e.data),updateMask:lZ(e.fieldMask)};else{if(!(e instanceof KS))return J();n={verify:df(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof rc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof al)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ic)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eZ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function bI(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?gt.updateTime(Ft(s.updateTime)):s.exists!==void 0?gt.exists(s.exists):gt.none()}(e.currentDocument):gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ie(a.setToServerValue==="REQUEST_TIME"),l=new rc;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new al(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new ll(c)}else"increment"in a?l=new ic(o,a.increment):J();const u=mt.fromServerFormat(a.fieldPath);return new op(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Qi(t,e.update.name),s=new wn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new lr(u.map(c=>mt.fromServerFormat(c)))}(e.updateMask);return new Fs(i,s,o,n,r)}return new Dc(i,s,n,r)}if(e.delete){const i=Qi(t,e.delete);return new Mc(i,n)}if(e.verify){const i=Qi(t,e.verify);return new KS(i,n)}return J()}function rZ(t,e){return t&&t.length>0?(ie(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ft(i.updateTime):Ft(s);return o.isEqual(ae.min())&&(o=Ft(s)),new WJ(o,i.transformResults||[])}(n,e))):[]}function $V(t,e){return{documents:[TI(t,e.path)]}}function FV(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=TI(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=TI(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return jV(qe.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:Zl(d.field),direction:sZ(d.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=II(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function VV(t){let e=DV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ie(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const h=UV(d);return h instanceof qe&&qS(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new cf(eu(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,np(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new $o(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,f=d.values||[];return new $o(f,h)}(n.endAt)),dV(e,i,o,s,a,"F",l,u)}function iZ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UV(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=eu(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=eu(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=eu(n.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eu(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return Re.create(eu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qe.create(n.compositeFilter.filters.map(r=>UV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function sZ(t){return YJ[t]}function oZ(t){return XJ[t]}function aZ(t){return JJ[t]}function Zl(t){return{fieldPath:t.canonicalString()}}function eu(t){return mt.fromServerFormat(t.fieldPath)}function jV(t){return t instanceof Re?function(n){if(n.op==="=="){if(uP(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NAN"}};if(lP(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uP(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NOT_NAN"}};if(lP(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zl(n.field),op:oZ(n.op),value:n.value}}}(t):t instanceof qe?function(n){const r=n.getFilters().map(i=>jV(i));return r.length===1?r[0]:{compositeFilter:{op:aZ(n.op),filters:r}}}(t):J()}function lZ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=Yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.ut=e}}function uZ(t,e){let n;if(e.document)n=LV(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=H.fromSegments(e.noDocument.path),i=cl(e.noDocument.readTime);n=ct.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return J();{const r=H.fromSegments(e.unknownDocument.path),i=cl(e.unknownDocument.version);n=ct.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new _t(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function RP(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:e_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:df(s,o.key),fields:o.data.value.mapValue.fields,updateTime:sc(s,o.version.toTimestamp()),createTime:sc(s,o.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ul(e.version)};else{if(!e.isUnknownDocument())return J();r.unknownDocument={path:n.path.toArray(),version:ul(e.version)}}return r}function e_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ul(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cl(t){const e=new _t(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function va(t,e){const n=(e.baseMutations||[]).map(s=>bI(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>bI(t.ut,s)),i=_t.fromMillis(e.localWriteTimeMs);return new QS(e.batchId,i,n,r)}function Od(t){const e=cl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?cl(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ie(s.documents.length===1),Hn(Oc(DV(s.documents[0])))}(t.query):function(s){return Hn(VV(s))}(t.query),new gs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Yt.fromBase64String(t.resumeToken))}function WV(t,e){const n=ul(e.snapshotVersion),r=ul(e.lastLimboFreeSnapshotVersion);let i;i=Xg(e.target)?$V(t.ut,e.target):FV(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ol(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eC(t){const e=VV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zg(e,e.limit,"L"):e}function cw(t,e){return new XS(e.largestBatchId,bI(t.ut,e.overlayMutation))}function xP(t,e){const n=e.path.lastSegment();return[t,qn(e.path.popLast()),n]}function AP(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:ul(r.readTime),documentKey:qn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{getBundleMetadata(e,n){return PP(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:cl(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return PP(e).put(function(i){return{bundleId:i.id,createTime:ul(Ft(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return kP(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:eC(s.bundledQuery),readTime:cl(s.readTime)}}(r)})}saveNamedQuery(e,n){return kP(e).put(function(i){return{name:i.name,readTime:ul(Ft(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function PP(t){return cn(t,"bundles")}function kP(t){return cn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){const r=n.uid||"";return new By(e,r)}getOverlay(e,n){return ld(e).get(xP(this.userId,n)).next(r=>r?cw(this.serializer,r):null)}getOverlays(e,n){const r=Hi();return R.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new XS(n,o);i.push(this.lt(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(qn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ld(e).H("collectionPathOverlayIndex",a))}),R.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Hi(),s=qn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ld(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=cw(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Hi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ld(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const d=cw(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}lt(e,n){return ld(e).put(function(i,s,o){const[a,l,u]=xP(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ff(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function ld(t){return cn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Rt(e.integerValue));else if("doubleValue"in e){const r=Rt(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),of(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Do(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?nV(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):J()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),H.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}wa.St=new wa;function dZ(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function NP(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=dZ(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class hZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=NP(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=NP(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class fZ{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class pZ{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class ud{constructor(){this.Wt=new hZ,this.Gt=new fZ(this.Wt),this.zt=new pZ(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ea(this.indexId,this.documentKey,this.arrayValue,r)}}function Ws(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=OP(t.arrayValue,e.arrayValue),n!==0?n:(n=OP(t.directionalValue,e.directionalValue),n!==0?n:H.comparator(t.documentKey,e.documentKey)))}function OP(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.Jt=new Ye((n,r)=>mt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(ie(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=pI(e);if(n!==void 0&&!this.tn(n))return!1;const r=ha(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.nn(a,l)||!this.rn(this.Yt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ye(mt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Nm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Nm(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Nm(r.field,r.dir==="asc"?0:1)));return new Yg(Yg.UNKNOWN_ID,this.collectionId,n,sf.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){var e,n;if(ie(t instanceof Re||t instanceof qe),t instanceof Re){if(t instanceof cV){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Re.create(t.field,"==",s)))||[];return qe.create(i,"or")}return t}const r=t.filters.map(i=>qV(i));return qe.create(r,t.op)}function mZ(t){if(t.getFilters().length===0)return[];const e=RI(qV(t));return ie(HV(e)),SI(e)||CI(e)?[e]:e.getFilters()}function SI(t){return t instanceof Re}function CI(t){return t instanceof qe&&qS(t)}function HV(t){return SI(t)||CI(t)||function(n){if(n instanceof qe&&yI(n)){for(const r of n.getFilters())if(!SI(r)&&!CI(r))return!1;return!0}return!1}(t)}function RI(t){if(ie(t instanceof Re||t instanceof qe),t instanceof Re)return t;if(t.filters.length===1)return RI(t.filters[0]);const e=t.filters.map(r=>RI(r));let n=qe.create(e,t.op);return n=t_(n),HV(n)?n:(ie(n instanceof qe),ie(nc(n)),ie(n.filters.length>1),n.filters.reduce((r,i)=>tC(r,i)))}function tC(t,e){let n;return ie(t instanceof Re||t instanceof qe),ie(e instanceof Re||e instanceof qe),n=t instanceof Re?e instanceof Re?function(i,s){return qe.create([i,s],"and")}(t,e):MP(t,e):e instanceof Re?MP(e,t):function(i,s){if(ie(i.filters.length>0&&s.filters.length>0),nc(i)&&nc(s))return aV(i,s.getFilters());const o=yI(i)?i:s,a=yI(i)?s:i,l=o.filters.map(u=>tC(u,a));return qe.create(l,"or")}(t,e),t_(n)}function MP(t,e){if(nc(e))return aV(e,t.getFilters());{const n=e.filters.map(r=>tC(t,r));return qe.create(n,"or")}}function t_(t){if(ie(t instanceof Re||t instanceof qe),t instanceof Re)return t;const e=t.getFilters();if(e.length===1)return t_(e[0]);if(sV(t))return t;const n=e.map(i=>t_(i)),r=[];return n.forEach(i=>{i instanceof Re?r.push(i):i instanceof qe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:qe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(){this.on=new nC}addToCollectionParentIndex(e,n){return this.on.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(Mr.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}}class nC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new Uint8Array(0);class _Z{constructor(e,n){this.user=e,this.databaseId=n,this._n=new nC,this.an=new ea(r=>ol(r),(r,i)=>rp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:qn(i)};return LP(e).put(s)}return R.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[WF(n),""],!1,!0);return LP(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(qi(o.parent))}return r})}addFieldIndex(e,n){const r=cd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Bl(e);return s.next(a=>{o.put(AP(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=cd(e),i=Bl(e),s=jl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=cd(e),r=jl(e),i=Bl(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return R.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new DP(r).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=jl(e);let i=!0;const s=new Map;return R.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ye();const a=[];return R.forEach(s,(l,u)=>{D("IndexedDbIndexManager",`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(E=>`${E.fieldPath}:${E.kind}`).join(",")}`}(l)} to execute ${ol(n)}`);const c=function(y,E){const b=pI(E);if(b===void 0)return null;for(const C of Jg(y,b.fieldPath))switch(C.op){case"array-contains-any":return C.value.arrayValue.values||[];case"array-contains":return[C.value]}return null}(u,l),d=function(y,E){const b=new Map;for(const C of ha(E))for(const T of Jg(y,C.fieldPath))switch(T.op){case"==":case"in":b.set(C.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return b.set(C.fieldPath.canonicalString(),T.value),Array.from(b.values())}return null}(u,l),h=function(y,E){const b=[];let C=!0;for(const T of ha(E)){const A=T.kind===0?pP(y,T.fieldPath,y.startAt):mP(y,T.fieldPath,y.startAt);b.push(A.value),C&&(C=A.inclusive)}return new $o(b,C)}(u,l),f=function(y,E){const b=[];let C=!0;for(const T of ha(E)){const A=T.kind===0?mP(y,T.fieldPath,y.endAt):pP(y,T.fieldPath,y.endAt);b.push(A.value),C&&(C=A.inclusive)}return new $o(b,C)}(u,l),p=this.ln(l,u,h),g=this.ln(l,u,f),v=this.hn(l,u,d),m=this.Pn(l.indexId,c,p,h.inclusive,g,f.inclusive,v);return R.forEach(m,_=>r.j(_,n.limit).next(y=>{y.forEach(E=>{const b=H.fromSegments(E.documentKey);o.has(b)||(o=o.add(b),a.push(b))})}))}).next(()=>a)}return R.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=mZ(qe.create(e.filters,"and")).map(r=>wI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const h=n?this.In(n[d/u]):nm,f=this.Tn(e,h,r[d%u],i),p=this.En(e,h,s[d%u],o),g=a.map(v=>this.Tn(e,h,v,!0));c.push(...this.createRange(f,p,g))}return c}Tn(e,n,r,i){const s=new Ea(e,H.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new Ea(e,H.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new DP(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return R.forEach(i,s=>this.cn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ye(mt.comparator),c=!1;for(const d of l.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:u=u.add(h.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){const r=new ud;for(const i of ha(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.jt(i.kind);wa.St.ht(s,o)}return r.Ut()}In(e){const n=new ud;return wa.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new ud;return wa.St.ht(sl(this.databaseId,n),r.jt(function(s){const o=ha(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new ud);let s=0;for(const o of ha(e)){const a=r[s++];for(const l of i)if(this.Rn(n,o.fieldPath)&&uf(a))i=this.Vn(i,o,a);else{const u=l.jt(o.kind);wa.St.ht(a,u)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new ud;l.seed(a.Ut()),wa.St.ht(o,l.jt(n.kind)),s.push(l)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof Re&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=cd(e),i=Bl(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return R.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,d){const h=d?new sf(d.sequenceNumber,new Mr(cl(d.readTime),new H(qi(d.documentKey)),d.largestBatchId)):sf.empty(),f=c.fields.map(([p,g])=>new Nm(mt.fromServerFormat(p),g));return new Yg(c.indexId,c.collectionGroup,f,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:_e(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=cd(e),s=Bl(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>R.forEach(a,l=>s.put(AP(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return R.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,l=>this.gn(e,i,l).next(u=>{const c=this.pn(s,l);return u.isEqual(c)?R.resolve():this.yn(e,s,l,u,c)}))))})}wn(e,n,r,i){return jl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return jl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=jl(e);let s=new Ye(Ws);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Ea(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Ye(Ws);const i=this.dn(n,e);if(i==null)return r;const s=pI(n);if(s!=null){const o=e.data.field(s.fieldPath);if(uf(o))for(const a of o.arrayValue.values||[])r=r.add(new Ea(n.indexId,e.key,this.In(a),i))}else r=r.add(new Ea(n.indexId,e.key,nm,i));return r}yn(e,n,r,i,s){D("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,d,h){const f=l.getIterator(),p=u.getIterator();let g=Ul(f),v=Ul(p);for(;g||v;){let m=!1,_=!1;if(g&&v){const y=c(g,v);y<0?_=!0:y>0&&(m=!0)}else g!=null?_=!0:m=!0;m?(d(v),v=Ul(p)):_?(h(g),g=Ul(f)):(g=Ul(f),v=Ul(p))}}(i,s,Ws,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),R.waitFor(o)}fn(e){let n=1;return Bl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ws(o,a)).filter((o,a,l)=>!a||Ws(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ws(o,e),l=Ws(o,n);if(a===0)i[0]=e.Ht();else if(a>0&&l<0)i.push(o),i.push(o.Ht());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,nm,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,nm,[]];s.push(IDBKeyRange.bound(a,l))}return s}bn(e,n){return Ws(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($P)}getMinOffset(e,n){return R.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||J())).next($P)}}function LP(t){return cn(t,"collectionParents")}function jl(t){return cn(t,"indexEntries")}function cd(t){return cn(t,"indexConfiguration")}function Bl(t){return cn(t,"indexState")}function $P(t){ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;BS(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Mr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class nr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new nr(e,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},(c,d,h)=>(a++,h.delete()));s.push(l.next(()=>{ie(a===1)}));const u=[];for(const c of n.mutations){const d=YF(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return R.waitFor(s).next(()=>u)}function n_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw J();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(41943040,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);class zy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){ie(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new zy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=tu(e),o=qs(e);return o.add({}).next(a=>{ie(typeof a=="number");const l=new QS(a,n,r,i),u=function(f,p,g){const v=g.baseMutations.map(_=>ff(f.ut,_)),m=g.mutations.map(_=>ff(f.ut,_));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:m}}(this.serializer,this.userId,l),c=[];let d=new Ye((h,f)=>_e(h.canonicalString(),f.canonicalString()));for(const h of i){const f=YF(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,sJ))}return d.forEach(h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),R.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return qs(e).get(n).next(r=>r?(ie(r.userId===this.userId),va(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?R.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return qs(e).Y({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ie(a.batchId>=r),s=va(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qs(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).W("userMutationsIndex",n).next(r=>r.map(i=>va(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Om(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return tu(e).Y({range:i},(o,a,l)=>{const[u,c,d]=o,h=qi(c);if(u===this.userId&&n.path.isEqual(h))return qs(e).get(d).next(f=>{if(!f)throw J();ie(f.userId===this.userId),s.push(va(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(_e);const i=[];return n.forEach(s=>{const o=Om(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=tu(e).Y({range:a},(u,c,d)=>{const[h,f,p]=u,g=qi(f);h===this.userId&&s.path.isEqual(g)?r=r.add(p):d.done()});i.push(l)}),R.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Om(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ye(_e);return tu(e).Y({range:o},(l,u,c)=>{const[d,h,f]=l,p=qi(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):c.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(qs(e).get(s).next(o=>{if(o===null)throw J();ie(o.userId===this.userId),r.push(va(this.serializer,o))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return GV(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return tu(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=qi(s[1]);i.push(l)}else a.done()}).next(()=>{ie(i.length===0)})})}containsKey(e,n){return KV(e,this.userId,n)}Mn(e){return QV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function KV(t,e,n){const r=Om(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return tu(t).Y({range:s,J:!0},(a,l,u)=>{const[c,d,h]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function qs(t){return cn(t,"mutations")}function tu(t){return cn(t,"documentMutations")}function QV(t){return cn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new dl(0)}static Nn(){return new dl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new dl(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ae.fromTimestamp(new _t(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>zl(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(ie(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return zl(e).Y((o,a)=>{const l=Od(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>R.waitFor(s)).next(()=>i)}forEachTarget(e,n){return zl(e).Y((r,i)=>{const s=Od(i);n(s)})}Bn(e){return VP(e).get("targetGlobalKey").next(n=>(ie(n!==null),n))}Ln(e,n){return VP(e).put("targetGlobalKey",n)}kn(e,n){return zl(e).put(WV(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ol(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return zl(e).Y({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=Od(a);rp(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=eo(e);return n.forEach(o=>{const a=qn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),R.waitFor(i)}removeMatchingKeys(e,n,r){const i=eo(e);return R.forEach(n,s=>{const o=qn(s.path);return R.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=eo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=eo(e);let s=ye();return i.Y({range:r,J:!0},(o,a,l)=>{const u=qi(o[1]),c=new H(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=qn(n.path),i=IDBKeyRange.bound([r],[WF(r)],!1,!0);let s=0;return eo(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}_t(e,n){return zl(e).get(n).next(r=>r?Od(r):null)}}function zl(t){return cn(t,"targets")}function VP(t){return cn(t,"targetGlobal")}function eo(t){return cn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP([t,e],[n,r]){const i=_e(t,n);return i===0?_e(e,r):i}class vZ{constructor(e){this.Qn=e,this.buffer=new Ye(UP),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();UP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wZ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){D("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zo(n)?D("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Jo(n)}await this.Gn(3e5)})}}class EZ{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return R.resolve(ar._e);const r=new vZ(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(D("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(FP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FP):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Xl()<=Te.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function IZ(t,e){return new EZ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(e,n){this.db=e,this.garbageCollector=IZ(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return rm(e,r)}removeReference(e,n,r){return rm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return rm(e,n)}Xn(e,n){return function(i,s){let o=!1;return QV(i).Z(a=>KV(i,a,s).next(l=>(l&&(o=!0),R.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const l=this.Xn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),eo(e).delete(function(d){return[0,qn(d.path)]}(o))))});i.push(l)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return rm(e,n)}Zn(e,n){const r=eo(e);let i,s=ar._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==ar._e&&n(new H(qi(i)),s),s=u,i=l):s=ar._e}).next(()=>{s!==ar._e&&n(new H(qi(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rm(t,e){return eo(t).put(function(r,i){return{targetId:0,path:qn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this.changes=new ea(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return sa(e).put(r)}removeEntry(e,n,r){return sa(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],e_(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=ct.newInvalidDocument(n);return sa(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(dd(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:ct.newInvalidDocument(n)};return sa(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(dd(n))},(i,s)=>{r={document:this.tr(n,s),size:n_(s)}}).next(()=>r)}getEntries(e,n){let r=ur();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=ur(),i=new rt(H.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,n_(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return R.resolve();let i=new Ye(zP);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(dd(i.first()),dd(i.last())),o=i.getIterator();let a=o.getNext();return sa(e).Y({index:"documentKeyIndex",range:s},(l,u,c)=>{const d=H.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&zP(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.U(dd(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),e_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sa(e).W(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=ur();for(const d of u){const h=this.tr(H.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(sp(n,h)||i.has(h.key))&&(c=c.insert(h.key,h))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=ur();const o=BP(n,r),a=BP(n,Mr.max());return sa(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.tr(H.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new SZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return jP(e).get("remoteDocumentGlobalKey").next(n=>(ie(!!n),n))}er(e,n){return jP(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=uZ(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return ct.newInvalidDocument(e)}}function XV(t){return new bZ(t)}class SZ extends YV{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new ea(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ye((s,o)=>_e(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=RP(this._r.serializer,o);i=i.add(s.path.popLast());const u=n_(l);r+=u-a.size,n.push(this._r.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=RP(this._r.serializer,o.convertToNoDocument(ae.min()));n.push(this._r.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),R.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function jP(t){return cn(t,"remoteDocumentGlobal")}function sa(t){return cn(t,"remoteDocumentsV14")}function dd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BP(t,e){const n=e.documentKey.path.toArray();return[t,e_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zP(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=_e(n[s],r[s]),i)return i;return i=_e(n.length,r.length),i||(i=_e(n[n.length-2],r[r.length-2]),i||_e(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&rh(r.mutation,i,lr.empty(),_t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=Hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=kd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ur();const o=nh(),a=function(){return nh()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Fs)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),rh(c.mutation,u,c.mutation.getFieldMask(),_t.now())):o.set(u.key,lr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new CZ(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=nh();let i=new rt((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||lr.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||ye()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=_V();c.forEach(h=>{if(!s.has(h)){const f=SV(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):R.resolve(Hi());let a=-1,l=s;return o.next(u=>R.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?R.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ye())).next(c=>({batchId:a,changes:gV(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=kd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=kd();return this.indexManager.getCollectionParents(e,s).next(a=>R.forEach(a,l=>{const u=function(d,h){return new $s(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,ct.newInvalidDocument(c)))});let a=kd();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&rh(c.mutation,u,lr.empty(),_t.now()),sp(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RZ{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return R.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ft(i.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:eC(i.bundledQuery),readTime:Ft(i.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(){this.overlays=new rt(H.comparator),this.lr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return R.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),R.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){const i=Hi(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new rt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Hi(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Hi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return R.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XS(n,r));let s=this.lr.get(n);s===void 0&&(s=ye(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.hr=new Ye(en.Pr),this.Ir=new Ye(en.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new en(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new en(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new H(new Le([])),r=new en(n,e),i=new en(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new H(new Le([])),r=new en(n,e),i=new en(n,e+1);let s=ye();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new en(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return H.comparator(e.key,n.key)||_e(e.gr,n.gr)}static Tr(e,n){return _e(e.gr,n.gr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ye(en.Pr)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new QS(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new en(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,n){return R.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new en(n,0),i=new en(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(_e);return n.forEach(i=>{const s=new en(i,0),o=new en(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),R.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;H.isDocumentKey(s)||(s=s.child(""));const o=new en(new H(s),0);let a=new Ye(_e);return this.yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.gr)),!0)},o),R.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ie(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return R.forEach(n.mutations,i=>{const s=new en(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new en(n,0),i=this.yr.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(e){this.Cr=e,this.docs=function(){return new rt(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ct.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ur();const o=n.path,a=new H(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||BS(HF(c),r)<=0||(i.has(c.key)||sp(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}vr(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kZ(this)}getSize(e){return R.resolve(this.size)}}class kZ extends YV{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(e){this.persistence=e,this.Fr=new ea(n=>ol(n),rp),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Mr=0,this.Or=new rC,this.targetCount=0,this.Nr=dl.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),R.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new dl(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.kn(n),R.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),R.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n){this.Br={},this.overlays={},this.Lr=new ar(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new NZ(this),this.indexManager=new gZ,this.remoteDocumentCache=function(i){return new PZ(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new zV(n),this.Kr=new RZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new AZ(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);const i=new OZ(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return R.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class OZ extends KF{constructor(e){super(),this.currentSequenceNumber=e}}class Wy{constructor(e){this.persistence=e,this.Gr=new rC,this.zr=null}static jr(e){return new Wy(e)}get Hr(){if(this.zr)return this.zr;throw J()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Hr,r=>{const i=H.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return R.or([()=>R.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZ{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Fy("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iP,{unique:!0}),l.createObjectStore("documentMutations")}(e),WP(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=R.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),WP(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").W().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iP,{unique:!0});const d=u.store("mutations"),h=c.map(f=>d.put(f));return R.waitFor(h)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:_J});u.createIndex("collectionPathOverlayIndex",yJ,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",vJ,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:oJ});u.createIndex("documentKeyIndex",aJ),u.createIndex("collectionGroupIndex",lJ)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:fJ}).createIndex("sequenceNumberIndex",pJ,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:mJ}).createIndex("documentKeyIndex",gJ,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=n_(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>R.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>R.forEach(a,l=>{ie(l.userId===s.userId);const u=va(this.serializer,l);return GV(e,s.userId,u).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const l=new Le(o),u=function(d){return[0,qn(d)]}(l);s.push(n.get(u).next(c=>c?R.resolve():(d=>n.put({targetId:0,path:qn(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>R.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:hJ});const r=n.store("collectionParents"),i=new nC,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:qn(l)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new Le(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,l],u)=>{const c=qi(a);return s(c.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Od(i),o=WV(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new H(Le.fromString(d.document.name).popFirst(5)):d.noDocument?H.fromSegments(d.noDocument.path):d.unknownDocument?H.fromSegments(d.unknownDocument.path):J()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>R.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=XV(this.serializer),s=new ZV(Wy.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:ye();va(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),R.forEach(a,(l,u)=>{const c=new nn(u),d=By.ct(this.serializer,c),h=s.getIndexManager(c),f=zy.ct(c,this.serializer,h,s.referenceDelegate);return new JV(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new mI(n,ar._e),l).next()})})}}function WP(t){t.createObjectStore("targetDocuments",{keyPath:cJ}).createIndex("documentTargetsIndex",dJ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uJ,{unique:!0}),t.createObjectStore("targetGlobal")}const dw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iC{constructor(e,n,r,i,s,o,a,l,u,c,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=u,this._i=c,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!iC.D())throw new O(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new TZ(this,i),this.Ii=n+"main",this.serializer=new zV(l),this.Ti=new _i(this.Ii,this.ai,new DZ(this.serializer)),this.qr=new yZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XV(this.serializer),this.Kr=new cZ,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,c===!1&&$t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(k.FAILED_PRECONDITION,dw);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new ar(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(async()=>{this.started&&await this.di()}))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>im(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Zo(e))return D("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return D("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return hd(e).get("owner").next(n=>R.resolve(this.wi(n)))}Si(e){return im(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=cn(n,"clientMetadata");return r.W().next(i=>{const s=this.Ci(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return R.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(const n of e)this.Ei.removeItem(this.vi(n.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?R.resolve(!0):hd(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new O(k.FAILED_PRECONDITION,dw);return!1}}return!(!this.networkEnabled||!this.inForeground)||im(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&D("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new mI(e,ar._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>im(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return zy.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _Z(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return By.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){D("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?EJ:l===14?ZF:l===13?JF:l===12?wJ:l===11?XF:void J()}(this.ai);let o;return this.Ti.runTransaction(e,i,s,a=>(o=new mI(a,this.Lr?this.Lr.next():ar._e),n==="readwrite-primary"?this.fi(o).next(l=>!!l||this.gi(o)).next(l=>{if(!l)throw $t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new O(k.FAILED_PRECONDITION,GF);return r(o)}).next(l=>this.yi(o).next(()=>l)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return hd(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new O(k.FAILED_PRECONDITION,dw)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hd(e).put("owner",n)}static D(){return _i.D()}pi(e){const n=hd(e);return n.get("owner").next(r=>this.wi(r)?(D("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Di(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||($t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;k3()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return D("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){$t("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hd(t){return cn(t,"owner")}function im(t){return cn(t,"clientMetadata")}function sC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new oC(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new MZ;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Xl()<=Te.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",Jl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),R.resolve()):(Xl()<=Te.DEBUG&&D("QueryEngine","Query:",Jl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Xl()<=Te.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",Jl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(n))):R.resolve())}zi(e,n){if(gP(n))return R.resolve(null);let r=Hn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Zg(n,null,"F"),r=Hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Yi(n,a);return this.Zi(n,u,o,l.readTime)?this.zi(e,Zg(n,null,"F")):this.Xi(e,u,n,l)}))})))}ji(e,n,r,i){return gP(n)||i.isEqual(ae.min())?R.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?R.resolve(null):(Xl()<=Te.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jl(n)),this.Xi(e,o,n,qF(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ye(pV(e));return n.forEach((i,s)=>{sp(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Xl()<=Te.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",Jl(n)),this.Gi.getDocumentsMatchingQuery(e,n,Mr.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new rt(_e),this.ns=new ea(s=>ol(s),rp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JV(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function tU(t,e,n,r){return new LZ(t,e,n,r)}async function nU(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ye();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}function $Z(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,h=d.keys();let f=R.resolve();return h.forEach(p=>{f=f.next(()=>c.getEntry(l,p)).next(g=>{const v=u.docVersions.get(p);ie(v!==null),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),c.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rU(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function FZ(t,e){const n=K(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Yt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(g,v,m){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(h,f,c)&&a.push(n.qr.updateTargetData(s,f))});let l=ur(),u=ye();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(iU(s,o,e.documentUpdates).next(c=>{l=c.us,u=c.cs})),!r.isEqual(ae.min())){const c=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return R.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ts=i,s))}function iU(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ur();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{us:o,cs:i}})}function VZ(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oc(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new gs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}async function ac(t,e,n){const r=K(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Zo(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}function r_(t,e,n){const r=K(t);let i=ae.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=K(l),h=d.ns.get(c);return h!==void 0?R.resolve(d.ts.get(h)):d.qr.getTargetData(u,c)}(r,o,Hn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:ye())).next(a=>(aU(r,fV(e),a),{documents:a,ls:s})))}function sU(t,e){const n=K(t),r=K(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function oU(t,e){const n=K(t),r=n.rs.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,qF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(aU(n,e,i),i))}function aU(t,e,n){let r=t.rs.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}async function UZ(t,e,n,r){const i=K(t);let s=ye(),o=ur();for(const u of n){const c=e.hs(u.metadata.name);u.document&&(s=s.add(c));const d=e.Ps(u);d.setReadTime(e.Is(u.metadata.readTime)),o=o.insert(c,d)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await oc(i,function(c){return Hn(Oc(Le.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>iU(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.qr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.qr.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.us,c.cs)).next(()=>c.us)))}async function jZ(t,e,n=ye()){const r=await oc(t,Hn(eC(e.bundledQuery))),i=K(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ft(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Yt.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}function qP(t,e){return`firestore_clients_${t}_${e}`}function HP(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hw(t,e){return`firestore_targets_${t}_${e}`}class i_{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new O(i.error.code,i.error.message))),o?new i_(e,n,i.state,s):($t("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ih{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new O(r.error.code,r.error.message))),s?new ih(e,r.state,i):($t("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class s_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=GS();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=QF(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new s_(e,s):($t("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class aC{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new aC(n.clientId,n.onlineState):($t("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xI{constructor(){this.activeTargetIds=GS()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fw{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new rt(_e),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=qP(this.persistenceKey,this.Rs),this.ws=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new xI),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Rs)continue;const i=this.getItem(qP(this.persistenceKey,r));if(i){const s=s_.Ts(r,i);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();const n=this.storage.getItem(this.Cs);if(n){const r=this.Ms(n);r&&this.xs(r)}for(const r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(hw(this.persistenceKey,e));if(r){const i=ih.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hw(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return D("SharedClientState","READ",e,n),n}setItem(e,n){D("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){D("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const n=e;if(n.storageArea===this.storage){if(D("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void $t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){const r=this.Ks(n.key);return this.$s(r,null)}{const r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){const r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){const r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){const r=function(s){let o=ar._e;if(s!=null)try{const a=JSON.parse(s);ie(typeof a=="number"),o=a}catch(a){$t("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==ar._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){const r=this.Hs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)})}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new i_(this.currentUser,e,n,r),s=HP(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=HP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){const n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){const i=hw(this.persistenceKey,e),s=new ih(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return s_.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return i_.Ts(new nn(s),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return ih.Ts(i,n)}Ms(e){return aC.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);D("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=GS();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class lU{constructor(){this.eo=new xI,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new xI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BZ{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sm=null;function pw(){return sm===null?sm=function(){return 268435456+Math.round(2147483648*Math.random())}():sm++,"0x"+sm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class qZ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=pw(),l=this.So(n,r);D("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(n,l,u,i).then(c=>(D("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Ri("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){const i=zZ[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=pw();return new Promise((o,a)=>{const l=new UX;l.setWithCredentials(!0),l.listenOnce(FX.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case uw.NO_ERROR:const c=l.getResponseJson();D(Rn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case uw.TIMEOUT:D(Rn,`RPC '${e}' ${s} timed out`),a(new O(k.DEADLINE_EXCEEDED,"Request time out"));break;case uw.HTTP_ERROR:const d=l.getStatus();if(D(Rn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const p=function(v){const m=v.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(m)>=0?m:k.UNKNOWN}(f.status);a(new O(p,f.message))}else a(new O(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new O(k.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{D(Rn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);D(Rn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}vo(e,n,r){const i=pw(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LX(),a=$X(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");D(Rn,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let h=!1,f=!1;const p=new WZ({co:v=>{f?D(Rn,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(D(Rn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),D(Rn,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},lo:()=>d.close()}),g=(v,m,_)=>{v.listen(m,y=>{try{_(y)}catch(E){setTimeout(()=>{throw E},0)}})};return g(d,em.EventType.OPEN,()=>{f||D(Rn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,em.EventType.CLOSE,()=>{f||(f=!0,D(Rn,`RPC '${e}' stream ${i} transport closed`),p.Ro())}),g(d,em.EventType.ERROR,v=>{f||(f=!0,Ri(Rn,`RPC '${e}' stream ${i} transport errored:`,v),p.Ro(new O(k.UNAVAILABLE,"The operation could not be completed")))}),g(d,em.EventType.MESSAGE,v=>{var m;if(!f){const _=v.data[0];ie(!!_);const y=_,E=y.error||((m=y[0])===null||m===void 0?void 0:m.error);if(E){D(Rn,`RPC '${e}' stream ${i} received error:`,E);const b=E.status;let C=function(M){const P=Ut[M];if(P!==void 0)return xV(P)}(b),T=E.message;C===void 0&&(C=k.INTERNAL,T="Unknown error status: "+b+" with message "+E.message),f=!0,p.Ro(new O(C,T)),d.close()}else D(Rn,`RPC '${e}' stream ${i} received:`,_),p.Vo(_)}}),g(a,VX.STAT_EVENT,v=>{v.stat===eP.PROXY?D(Rn,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===eP.NOPROXY&&D(Rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(){return typeof window<"u"?window:null}function Fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){return new ZJ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,r,i,s,o,a,l){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new lC(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?($t(n.toString()),$t("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new O(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HZ extends cU{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=nZ(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Ft(o.readTime):ae.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=hf(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Xg(l)?{documents:$V(s,l)}:{query:FV(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=NV(s,o.resumeToken);const u=II(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=sc(s,o.snapshotVersion.toTimestamp());const u=II(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=iZ(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=hf(this.serializer),n.removeTarget=e,this.e_(n)}}class GZ extends cU{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=rZ(e.writeResults,e.commitTime),r=Ft(e.commitTime);return this.listener.I_(r,n)}return ie(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=hf(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ff(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new O(k.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new O(k.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(k.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class QZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?($t(n),this.f_=!1):D("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(async()=>{ta(this)&&(D("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=K(l);u.C_.add(4),await Lc(u),u.M_.set("Unknown"),u.C_.delete(4),await cp(u)}(this))})}),this.M_=new QZ(r,i)}}async function cp(t){if(ta(t))for(const e of t.v_)await e(!0)}async function Lc(t){for(const e of t.v_)await e(!1)}function qy(t,e){const n=K(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),dC(n)?cC(n):Fc(n).Ho()&&uC(n,e))}function pf(t,e){const n=K(t),r=Fc(n);n.D_.delete(e),r.Ho()&&dU(n,e),n.D_.size===0&&(r.Ho()?r.Zo():ta(n)&&n.M_.set("Unknown"))}function uC(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fc(t).u_(e)}function dU(t,e){t.x_.Oe(e),Fc(t).c_(e)}function cC(t){t.x_=new QJ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Fc(t).start(),t.M_.g_()}function dC(t){return ta(t)&&!Fc(t).jo()&&t.D_.size>0}function ta(t){return K(t).C_.size===0}function hU(t){t.x_=void 0}async function XZ(t){t.D_.forEach((e,n)=>{uC(t,e)})}async function JZ(t,e){hU(t),dC(t)?(t.M_.w_(e),cC(t)):t.M_.set("Unknown")}async function ZZ(t,e,n){if(t.M_.set("Online"),e instanceof kV&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await o_(t,r)}else if(e instanceof $m?t.x_.$e(e):e instanceof PV?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(ae.min()))try{const r=await rU(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.D_.get(u);c&&s.D_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.D_.get(l);if(!c)return;s.D_.set(l,c.withResumeToken(Yt.EMPTY_BYTE_STRING,c.snapshotVersion)),dU(s,l);const d=new gs(c.target,l,u,c.sequenceNumber);uC(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){D("RemoteStore","Failed to raise snapshot:",r),await o_(t,r)}}async function o_(t,e,n){if(!Zo(e))throw e;t.C_.add(1),await Lc(t),t.M_.set("Offline"),n||(n=()=>rU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{D("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await cp(t)})}function fU(t,e){return e().catch(n=>o_(t,n,e))}async function $c(t){const e=K(t),n=Fo(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;eee(e);)try{const i=await VZ(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,tee(e,i)}catch(i){await o_(e,i)}pU(e)&&mU(e)}function eee(t){return ta(t)&&t.b_.length<10}function tee(t,e){t.b_.push(e);const n=Fo(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function pU(t){return ta(t)&&!Fo(t).jo()&&t.b_.length>0}function mU(t){Fo(t).start()}async function nee(t){Fo(t).E_()}async function ree(t){const e=Fo(t);for(const n of t.b_)e.P_(n.mutations)}async function iee(t,e,n){const r=t.b_.shift(),i=YS.from(r,e,n);await fU(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $c(t)}async function see(t,e){e&&Fo(t).h_&&await async function(r,i){if(function(o){return RV(o)&&o!==k.ABORTED}(i.code)){const s=r.b_.shift();Fo(r).Yo(),await fU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $c(r)}}(t,e),pU(t)&&mU(t)}async function KP(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=ta(n);n.C_.add(3),await Lc(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await cp(n)}async function AI(t,e){const n=K(t);e?(n.C_.delete(2),await cp(n)):e||(n.C_.add(2),await Lc(n),n.M_.set("Unknown"))}function Fc(t){return t.O_||(t.O_=function(n,r,i){const s=K(n);return s.A_(),new HZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:XZ.bind(null,t),Io:JZ.bind(null,t),a_:ZZ.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),dC(t)?cC(t):t.M_.set("Unknown")):(await t.O_.stop(),hU(t))})),t.O_}function Fo(t){return t.N_||(t.N_=function(n,r,i){const s=K(n);return s.A_(),new GZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:nee.bind(null,t),Io:see.bind(null,t),T_:ree.bind(null,t),I_:iee.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await $c(t)):(await t.N_.stop(),t.b_.length>0&&(D("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new hC(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vc(t,e){if($t("AsyncQueue",`${e}: ${t}`),Zo(t))return new O(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=kd(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new Du(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Du)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Du;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.B_=new rt(H.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):J():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class lc{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new lc(e,n,Du.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oee{constructor(){this.k_=void 0,this.listeners=[]}}class aee{constructor(){this.queries=new ea(e=>hV(e),ip),this.onlineState="Unknown",this.q_=new Set}}async function fC(t,e){const n=K(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new oee),i)try{s.k_=await n.onListen(r)}catch(o){const a=Vc(o,`Initialization of query '${Jl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&mC(n)}async function pC(t,e){const n=K(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function lee(t,e){const n=K(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&mC(n)}function uee(t,e,n){const r=K(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function mC(t){t.q_.forEach(e=>{e.next()})}class gC{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cee{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.serializer=e}hs(e){return Qi(this.serializer,e)}Ps(e){return e.metadata.exists?LV(this.serializer,e.document,!1):ct.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Ft(e)}}class dee{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gU(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=Le.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new YP(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ye()).add(s);n.set(o,a)}}return n}async complete(){const e=await UZ(this.localStore,new YP(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(const r of this.queries)await jZ(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function gU(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.key=e}}class yU{constructor(e){this.key=e}}class vU{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ye(),this.mutatedKeys=ye(),this._a=pV(e),this.aa=new Du(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new QP,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=sp(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),v=!0):this.ha(h,f)||(r.track({type:2,doc:f}),v=!0,(l&&this._a(f,l)>0||u&&this._a(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),v=!0):h&&!f&&(r.track({type:1,doc:h}),v=!0,(l||u)&&(a=!0)),v&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((c,d)=>function(f,p){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return g(f)-g(p)}(c.type,d.type)||this._a(c.doc,d.doc)),this.Pa(r),i=i!=null&&i;const a=n&&!i?this.Ia():[],l=this.oa.size===0&&this.current&&!i?1:0,u=l!==this.sa;return this.sa=l,o.length!==0||u?{snapshot:new lc(this.query,e.aa,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new QP,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ye(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new yU(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new _U(r))}),n}da(e){this.ia=e.ls,this.oa=ye();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return lc.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class hee{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fee{constructor(e){this.key=e,this.Ra=!1}}class pee{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new ea(a=>hV(a),ip),this.fa=new Map,this.ga=new Set,this.pa=new rt(H.comparator),this.ya=new Map,this.wa=new rC,this.Sa={},this.ba=new Map,this.Da=dl.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function mee(t,e){const n=EC(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=await oc(n.localStore,Hn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await _C(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&qy(n.remoteStore,o)}return i}async function _C(t,e,n,r,i){t.va=(d,h,f)=>async function(g,v,m,_){let y=v.view.ca(m);y.Zi&&(y=await r_(g.localStore,v.query,!1).then(({documents:T})=>v.view.ca(T,y)));const E=_&&_.targetChanges.get(v.targetId),b=_&&_.targetMismatches.get(v.targetId)!=null,C=v.view.applyChanges(y,g.isPrimaryClient,E,b);return PI(g,v.targetId,C.Ta),C.snapshot}(t,d,h,f);const s=await r_(t.localStore,e,!0),o=new vU(e,s.ls),a=o.ca(s.documents),l=lp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);PI(t,n,u.Ta);const c=new hee(e,n,o);return t.ma.set(e,c),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),u.snapshot}async function gee(t,e){const n=K(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!ip(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ac(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),pf(n.remoteStore,r.targetId),uc(n,r.targetId)}).catch(Jo)):(uc(n,r.targetId),await ac(n.localStore,r.targetId,!0))}async function _ee(t,e,n){const r=IC(t);try{const i=await function(o,a){const l=K(o),u=_t.now(),c=a.reduce((f,p)=>f.add(p.key),ye());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=ur(),g=ye();return l.ss.getEntries(f,c).next(v=>{p=v,p.forEach((m,_)=>{_.isValidDocument()||(g=g.add(m))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(v=>{d=v;const m=[];for(const _ of a){const y=HJ(_,d.get(_.key).overlayedDocument);y!=null&&m.push(new Fs(_.key,y,rV(y.value.mapValue),gt.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,m,a)}).next(v=>{h=v;const m=v.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(f,v.batchId,m)})}).then(()=>({batchId:h.batchId,changes:gV(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Sa[o.currentUser.toKey()];u||(u=new rt(_e)),u=u.insert(a,l),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,n),await Vs(r,i.changes),await $c(r.remoteStore)}catch(i){const s=Vc(i,"Failed to persist write");n.reject(s)}}async function wU(t,e){const n=K(t);try{const r=await FZ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?ie(o.Ra):i.removedDocuments.size>0&&(ie(o.Ra),o.Ra=!1))}),await Vs(n,r,e)}catch(r){await Jo(r)}}function XP(t,e,n){const r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=K(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const h of d.listeners)h.Q_(a)&&(u=!0)}),u&&mC(l)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yee(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new rt(H.comparator);o=o.insert(s,ct.newNoDocument(s,ae.min()));const a=ye().add(s),l=new ap(ae.min(),new Map,new rt(_e),o,a);await wU(r,l),r.pa=r.pa.remove(s),r.ya.delete(e),wC(r)}else await ac(r.localStore,e,!1).then(()=>uc(r,e,n)).catch(Jo)}async function vee(t,e){const n=K(t),r=e.batch.batchId;try{const i=await $Z(n.localStore,e);vC(n,r,null),yC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vs(n,i)}catch(i){await Jo(i)}}async function wee(t,e,n){const r=K(t);try{const i=await function(o,a){const l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(ie(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);vC(r,e,n),yC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vs(r,i)}catch(i){await Jo(i)}}async function Eee(t,e){const n=K(t);ta(n.remoteStore)||D("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=K(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=Vc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function yC(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function vC(t,e,n){const r=K(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||EU(t,r)})}function EU(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);n!==null&&(pf(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),wC(t))}function PI(t,e,n){for(const r of n)r instanceof _U?(t.wa.addReference(r.key,e),Iee(t,r)):r instanceof yU?(D("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||EU(t,r.key)):J()}function Iee(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(D("SyncEngine","New document in limbo: "+n),t.ga.add(r),wC(t))}function wC(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new H(Le.fromString(e)),r=t.Da.next();t.ya.set(r,new fee(n)),t.pa=t.pa.insert(n,r),qy(t.remoteStore,new gs(Hn(Oc(n.path)),r,"TargetPurposeLimboResolution",ar._e))}}async function Vs(t,e,n){const r=K(t),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=oC.Qi(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.Va.a_(i),await async function(l,u){const c=K(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>R.forEach(u,h=>R.forEach(h.ki,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>R.forEach(h.qi,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Zo(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const f=c.ts.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);c.ts=c.ts.insert(h,g)}}}(r.localStore,s))}async function Tee(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=await nU(n.localStore,e);n.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(l=>{l.reject(new O(k.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vs(n,r._s)}}function bee(t,e){const n=K(t),r=n.ya.get(e);if(r&&r.Ra)return ye().add(r.key);{let i=ye();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}async function See(t,e){const n=K(t),r=await r_(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&PI(n,e.targetId,i.Ta),i}async function Cee(t,e){const n=K(t);return oU(n.localStore,e).then(r=>Vs(n,r))}async function Ree(t,e,n,r){const i=K(t),s=await function(a,l){const u=K(a),c=K(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.Cn(d,l).next(h=>h?u.localDocuments.getDocuments(d,h):R.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await $c(i.remoteStore):n==="acknowledged"||n==="rejected"?(vC(i,e,r||null),yC(i,e),function(a,l){K(K(a).mutationQueue).Fn(l)}(i.localStore,e)):J(),await Vs(i,s)):D("SyncEngine","Cannot apply mutation batch with id: "+e)}async function xee(t,e){const n=K(t);if(EC(n),IC(n),e===!0&&n.Ca!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await JP(n,r.toArray());n.Ca=!0,await AI(n.remoteStore,!0);for(const s of i)qy(n.remoteStore,s)}else if(e===!1&&n.Ca!==!1){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(uc(n,o),ac(n.localStore,o,!0))),pf(n.remoteStore,o)}),await i,await JP(n,r),function(o){const a=K(o);a.ya.forEach((l,u)=>{pf(a.remoteStore,u)}),a.wa.Vr(),a.ya=new Map,a.pa=new rt(H.comparator)}(n),n.Ca=!1,await AI(n.remoteStore,!1)}}async function JP(t,e,n){const r=K(t),i=[],s=[];for(const o of e){let a;const l=r.fa.get(o);if(l&&l.length!==0){a=await oc(r.localStore,Hn(l[0]));for(const u of l){const c=r.ma.get(u),d=await See(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await sU(r.localStore,o);a=await oc(r.localStore,u),await _C(r,IU(u),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}function IU(t){return dV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Aee(t){return function(n){return K(K(n).persistence).Bi()}(K(t).localStore)}async function Pee(t,e,n,r){const i=K(t);if(i.Ca)return void D("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await oU(i.localStore,fV(s[0])),a=ap.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Yt.EMPTY_BYTE_STRING);await Vs(i,o,a);break}case"rejected":await ac(i.localStore,e,!0),uc(i,e,r);break;default:J()}}async function kee(t,e,n){const r=EC(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){D("SyncEngine","Adding an already active target "+i);continue}const s=await sU(r.localStore,i),o=await oc(r.localStore,s);await _C(r,IU(s),o.targetId,!1,o.resumeToken),qy(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&await ac(r.localStore,i,!1).then(()=>{pf(r.remoteStore,i),uc(r,i)}).catch(Jo)}}function EC(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yee.bind(null,e),e.Va.a_=lee.bind(null,e.eventManager),e.Va.Fa=uee.bind(null,e.eventManager),e}function IC(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wee.bind(null,e),e}function Nee(t,e,n){const r=K(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(f,p){const g=K(f),v=Ft(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",m=>g.Kr.getBundleMetadata(m,p.id)).then(m=>!!m&&m.createTime.compareTo(v)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(gU(l));const u=new dee(l,s.localStore,o.serializer);let c=await o.Ma();for(;c;){const h=await u.ea(c);h&&a._updateProgress(h),c=await o.Ma()}const d=await u.complete();return await Vs(s,d.ra,void 0),await function(f,p){const g=K(f);return g.persistence.runTransaction("Save bundle","readwrite",v=>g.Kr.saveBundleMetadata(v,p))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.na)}catch(l){return Ri("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class kI{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=up(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tU(this.persistence,new eU,e.initialUser,this.serializer)}createPersistence(e){return new ZV(Wy.jr,this.serializer)}createSharedClientState(e){return new lU}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class TU extends kI{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await IC(this.xa.syncEngine),await $c(this.xa.remoteStore),await this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return tU(this.persistence,new eU,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new wZ(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new rJ(n,this.persistence);return new nJ(e.asyncQueue,r)}createPersistence(e){const n=sC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new iC(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,uU(),Fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lU}}class Oee extends TU{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xa.syncEngine;this.sharedClientState instanceof fw&&(this.sharedClientState.syncEngine={Ys:Ree.bind(null,n),Zs:Pee.bind(null,n),Xs:kee.bind(null,n),Bi:Aee.bind(null,n),Js:Cee.bind(null,n)},await this.sharedClientState.start()),await this.persistence.mi(async r=>{await xee(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=uU();if(!fw.D(n))throw new O(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class TC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tee.bind(null,this.syncEngine),await AI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aee}()}createDatastore(e){const n=up(e.databaseInfo.databaseId),r=function(s){return new qZ(s)}(e.databaseInfo);return function(s,o,a,l){return new KZ(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new YZ(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>XP(this.syncEngine,n,0),function(){return GP.D()?new GP:new BZ}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new pee(i,s,o,a,l,u);return c&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=K(n);D("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await Lc(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):$t("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dee{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new on,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(e===null)return null;const n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);const i=await this.Ka(r);return new cee(JSON.parse(i),e.length+r)}$a(){return this.buffer.findIndex(e=>e===123)}async qa(){for(;this.$a()<0&&!await this.Ua(););if(this.buffer.length===0)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ua(){const e=await this.Ba.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new O(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=K(i),a=hf(o.serializer)+"/documents",l={documents:s.map(h=>df(o.serializer,h))},u=await o.Co("BatchGetDocuments",a,l,s.length),c=new Map;u.forEach(h=>{const f=tZ(o.serializer,h);c.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=c.get(h.toString());ie(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=H.fromPath(r);this.mutations.push(new KS(i,this.precondition(i)))}),await async function(r,i){const s=K(r),o=hf(s.serializer)+"/documents",a={writes:i.map(l=>ff(s.serializer,l))};await s.wo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J();n=ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new O(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ae.min())?gt.exists(!1):gt.updateTime(n):gt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ae.min()))throw new O(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(n)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lee{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new lC(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(async()=>{const e=new Mee(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})})}za(e){try{const n=this.updateFunction(e);return!np(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!RV(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ee{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=zF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{D("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(D("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vm(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function NI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bC(t);D("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>KP(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>KP(e.remoteStore,s)),t._onlineComponents=e}function bU(t){return t.name==="FirebaseError"?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function bC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!bU(n))throw n;Ri("Error using user provided cache. Falling back to memory cache: "+n),await Vm(t,new kI)}}else D("FirestoreClient","Using default OfflineComponentProvider"),await Vm(t,new kI);return t._offlineComponents}async function Gy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),await NI(t,t._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),await NI(t,new TC))),t._onlineComponents}function SU(t){return bC(t).then(e=>e.persistence)}function SC(t){return bC(t).then(e=>e.localStore)}function CU(t){return Gy(t).then(e=>e.remoteStore)}function CC(t){return Gy(t).then(e=>e.syncEngine)}function Fee(t){return Gy(t).then(e=>e.datastore)}async function cc(t){const e=await Gy(t),n=e.eventManager;return n.onListen=mee.bind(null,e.syncEngine),n.onUnlisten=gee.bind(null,e.syncEngine),n}function Vee(t){return t.asyncQueue.enqueue(async()=>{const e=await SU(t),n=await CU(t);return e.setNetworkEnabled(!0),function(i){const s=K(i);return s.C_.delete(0),cp(s)}(n)})}function Uee(t){return t.asyncQueue.enqueue(async()=>{const e=await SU(t),n=await CU(t);return e.setNetworkEnabled(!1),async function(i){const s=K(i);s.C_.add(0),await Lc(s),s.M_.set("Offline")}(n)})}function jee(t,e){const n=new on;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,c){const d=K(u);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new O(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Vc(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await SC(t),e,n)),n.promise}function RU(t,e,n={}){const r=new on;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Hy({next:h=>{o.enqueueAndForget(()=>pC(s,d));const f=h.docs.has(a);!f&&h.fromCache?u.reject(new O(k.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?u.reject(new O(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new gC(Oc(a.path),c,{includeMetadataChanges:!0,J_:!0});return fC(s,d)}(await cc(t),t.asyncQueue,e,n,r)),r.promise}function Bee(t,e){const n=new on;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await r_(i,s,!0),l=new vU(s,a.ls),u=l.ca(a.documents),c=l.applyChanges(u,!1);o.resolve(c.snapshot)}catch(a){const l=Vc(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await SC(t),e,n)),n.promise}function xU(t,e,n={}){const r=new on;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Hy({next:h=>{o.enqueueAndForget(()=>pC(s,d)),h.fromCache&&l.source==="server"?u.reject(new O(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new gC(a,c,{includeMetadataChanges:!0,J_:!0});return fC(s,d)}(await cc(t),t.asyncQueue,e,n,r)),r.promise}function zee(t,e){const n=new Hy(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).q_.add(s),s.next()}(await cc(t),n)),()=>{n.Na(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).q_.delete(s)}(await cc(t),n))}}function Wee(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?AV().encode(o):o,function(c,d){return new Dee(c,d)}(function(c,d){if(c instanceof Uint8Array)return ZP(c,d);if(c instanceof ArrayBuffer)return ZP(new Uint8Array(c),d);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,up(e));t.asyncQueue.enqueueAndForget(async()=>{Nee(await CC(t),i,r)})}function qee(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=K(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(await SC(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t,e,n){if(!n)throw new O(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function PU(t,e,n,r){if(e===!0&&r===!0)throw new O(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tk(t){if(!H.isDocumentKey(t))throw new O(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nk(t){if(H.isDocumentKey(t))throw new O(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ky(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Fe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ky(t);throw new O(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kU(t,e){if(e<=0)throw new O(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AU((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new O(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new O(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new O(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rk(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qX;switch(r.type){case"firstParty":return new QX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ek.get(n);r&&(D("ComponentProvider","Removing Datastore"),ek.delete(n),r.terminate())}(this),Promise.resolve()}}function Hee(t,e,n,r={}){var i;const s=(t=Fe(t,dp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=nn.MOCK_USER;else{a=fb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new O(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new nn(u)}t._authCredentials=new HX(new BF(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gn=class NU{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new NU(this.firestore,e,this._query)}},Et=class OU{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new OU(this.firestore,e,this._key)}},wo=class DU extends Gn{constructor(e,n,r){super(e,n,Oc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new H(e))}withConverter(e){return new DU(this.firestore,e,this._path)}};function MU(t,e,...n){if(t=te(t),RC("collection","path",e),t instanceof dp){const r=Le.fromString(e,...n);return nk(r),new wo(t,null,r)}{if(!(t instanceof Et||t instanceof wo))throw new O(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return nk(r),new wo(t.firestore,null,r)}}function Gee(t,e){if(t=Fe(t,dp),RC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gn(t,null,function(r){return new $s(Le.emptyPath(),r)}(e))}function a_(t,e,...n){if(t=te(t),arguments.length===1&&(e=zF.newId()),RC("doc","path",e),t instanceof dp){const r=Le.fromString(e,...n);return tk(r),new Et(t,null,new H(r))}{if(!(t instanceof Et||t instanceof wo))throw new O(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return tk(r),new Et(t.firestore,t instanceof wo?t.converter:null,new H(r))}}function LU(t,e){return t=te(t),e=te(e),(t instanceof Et||t instanceof wo)&&(e instanceof Et||e instanceof wo)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function $U(t,e){return t=te(t),e=te(e),t instanceof Gn&&e instanceof Gn&&t.firestore===e.firestore&&ip(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kee{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new lC(this,"async_queue_retry"),this.iu=()=>{const n=Fm();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Fm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new on;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Zo(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=hC.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&J()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function OI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Qee{constructor(){this._progressObserver={},this._taskCompletionResolver=new on,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yee=-1;let Nt=class extends dp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Kee}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||FU(this),this._firestoreClient.terminate()}};function dn(t){return t._firestoreClient||FU(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function FU(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new bJ(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,AU(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new $ee(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Xee(t,e){UU(t=Fe(t,Nt));const n=dn(t);if(n._uninitializedComponentsProvider)throw new O(k.FAILED_PRECONDITION,"SDK cache is already specified.");Ri("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new TC;return VU(n,i,new TU(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Jee(t){UU(t=Fe(t,Nt));const e=dn(t);if(e._uninitializedComponentsProvider)throw new O(k.FAILED_PRECONDITION,"SDK cache is already specified.");Ri("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new TC;return VU(e,r,new Oee(r,n.cacheSizeBytes))}function VU(t,e,n){const r=new on;return t.asyncQueue.enqueue(async()=>{try{await Vm(t,n),await NI(t,e),r.resolve()}catch(i){const s=i;if(!bU(s))throw s;Ri("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function Zee(t){if(t._initialized&&!t._terminated)throw new O(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new on;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!_i.D())return Promise.resolve();const i=r+"main";await _i.delete(i)}(sC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function ete(t){return function(n){const r=new on;return n.asyncQueue.enqueueAndForget(async()=>Eee(await CC(n),r)),r.promise}(dn(t=Fe(t,Nt)))}function tte(t){return Vee(dn(t=Fe(t,Nt)))}function nte(t){return Uee(dn(t=Fe(t,Nt)))}function rte(t,e){const n=dn(t=Fe(t,Nt)),r=new Qee;return Wee(n,t._databaseId,e,r),r}function ite(t,e){return qee(dn(t=Fe(t,Nt)),e).then(n=>n?new Gn(t,null,n.query):null)}function UU(t){if(t._initialized||t._terminated)throw new O(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(Yt.fromBase64String(e))}catch(n){throw new O(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ste=/^__.*__$/;class ote{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dc(e,this.data,n,this.fieldTransforms)}}class jU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Yy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Yy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return l_(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(BU(this.Iu)&&ste.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class ate{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||up(e)}pu(e,n,r,i=!1){return new Yy({Iu:e,methodName:n,gu:r,path:mt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rl(t){const e=t._freezeSettings(),n=up(t._databaseId);return new ate(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xy(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);kC("Data must be an object, but it was:",o,r);const a=qU(r,o);let l,u;if(s.merge)l=new lr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=DI(e,d,n);if(!o.contains(h))throw new O(k.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);GU(c,h)||c.push(h)}l=new lr(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new ote(new wn(a),l,u)}class hp extends Cl{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hp}}function zU(t,e,n){return new Yy({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xC extends Cl{_toFieldTransform(e){return new op(e.path,new rc)}isEqual(e){return e instanceof xC}}class lte extends Cl{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=zU(this,e,!0),r=this.yu.map(s=>xl(s,n)),i=new al(r);return new op(e.path,i)}isEqual(e){return this===e}}class ute extends Cl{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=zU(this,e,!0),r=this.yu.map(s=>xl(s,n)),i=new ll(r);return new op(e.path,i)}isEqual(e){return this===e}}class cte extends Cl{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new ic(e.serializer,wV(e.serializer,this.wu));return new op(e.path,n)}isEqual(e){return this===e}}function AC(t,e,n,r){const i=t.pu(1,e,n);kC("Data must be an object, but it was:",i,r);const s=[],o=wn.empty();Sl(r,(l,u)=>{const c=NC(e,l,n);u=te(u);const d=i.Ru(c);if(u instanceof hp)s.push(c);else{const h=xl(u,d);h!=null&&(s.push(c),o.set(c,h))}});const a=new lr(s);return new jU(o,a,i.fieldTransforms)}function PC(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[DI(e,r,n)],l=[i];if(s.length%2!=0)throw new O(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(DI(e,s[h])),l.push(s[h+1]);const u=[],c=wn.empty();for(let h=a.length-1;h>=0;--h)if(!GU(u,a[h])){const f=a[h];let p=l[h];p=te(p);const g=o.Ru(f);if(p instanceof hp)u.push(f);else{const v=xl(p,g);v!=null&&(u.push(f),c.set(f,v))}}const d=new lr(u);return new jU(c,d,o.fieldTransforms)}function WU(t,e,n,r=!1){return xl(n,t.pu(r?4:3,e))}function xl(t,e){if(HU(t=te(t)))return kC("Unsupported field value:",e,t),qU(t,e);if(t instanceof Cl)return function(r,i){if(!BU(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=xl(a,i.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=_t.fromDate(r);return{timestampValue:sc(i.serializer,s)}}if(r instanceof _t){const s=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sc(i.serializer,s)}}if(r instanceof Qy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:NV(i.serializer,r._byteString)};if(r instanceof Et){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ZS(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Ky(r)}`)}(t,e)}function qU(t,e){const n={};return eV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sl(t,(r,i)=>{const s=xl(i,e.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function HU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Qy||t instanceof ts||t instanceof Et||t instanceof Cl)}function kC(t,e,n){if(!HU(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ky(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function DI(t,e,n){if((e=te(e))instanceof Vo)return e._internalPath;if(typeof e=="string")return NC(t,e);throw l_("Field path arguments must be of type string or ",t,!1,void 0,n)}const dte=new RegExp("[~\\*/\\[\\]]");function NC(t,e,n){if(e.search(dte)>=0)throw l_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vo(...e.split("."))._internalPath}catch{throw l_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function l_(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new O(k.INVALID_ARGUMENT,a+t+l)}function GU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hte extends mf{data(){return super.data()}}function Jy(t,e){return typeof e=="string"?NC(t,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OC{}class fp extends OC{}function Hs(t,e,...n){let r=[];e instanceof OC&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof DC).length,a=s.filter(l=>l instanceof Zy).length;if(o>1||o>0&&a>0)throw new O(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Zy extends fp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zy(e,n,r)}_apply(e){const n=this._parse(e);return YU(e._query,n),new Gn(e.firestore,e.converter,EI(e._query,n))}_parse(e){const n=Rl(e.firestore);return function(s,o,a,l,u,c,d){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new O(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){sk(d,c);const f=[];for(const p of d)f.push(ik(l,s,p));h={arrayValue:{values:f}}}else h=ik(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||sk(d,c),h=WU(a,o,d,c==="in"||c==="not-in");return Re.create(u,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fte(t,e,n){const r=e,i=Jy("where",t);return Zy._create(i,r,n)}class DC extends OC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new DC(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)YU(o,l),o=EI(o,l)}(e._query,n),new Gn(e.firestore,e.converter,EI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class MC extends fp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new MC(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new O(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cf(s,o)}(e._query,this._field,this._direction);return new Gn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $s(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function pte(t,e="asc"){const n=e,r=Jy("orderBy",t);return MC._create(r,n)}class ev extends fp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ev(e,n,r)}_apply(e){return new Gn(e.firestore,e.converter,Zg(e._query,this._limit,this._limitType))}}function mte(t){return kU("limit",t),ev._create("limit",t,"F")}function gte(t){return kU("limitToLast",t),ev._create("limitToLast",t,"L")}class tv extends fp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new tv(e,n,r)}_apply(e){const n=QU(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,function(i,s){return new $s(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function _te(...t){return tv._create("startAt",t,!0)}function yte(...t){return tv._create("startAfter",t,!1)}class nv extends fp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new nv(e,n,r)}_apply(e){const n=QU(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,function(i,s){return new $s(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function vte(...t){return nv._create("endBefore",t,!1)}function wte(...t){return nv._create("endAt",t,!0)}function QU(t,e,n,r){if(n[0]=te(n[0]),n[0]instanceof mf)return function(s,o,a,l,u){if(!l)throw new O(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const d of Ou(s))if(d.field.isKeyField())c.push(sl(o,l.key));else{const h=l.data.field(d.field);if(Vy(h))throw new O(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=d.field.canonicalString();throw new O(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}c.push(h)}return new $o(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Rl(t.firestore);return function(o,a,l,u,c,d){const h=o.explicitOrderBy;if(c.length>h.length)throw new O(k.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<c.length;p++){const g=c[p];if(h[p].field.isKeyField()){if(typeof g!="string")throw new O(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof g}`);if(!HS(o)&&g.indexOf("/")!==-1)throw new O(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${g}' contains a slash.`);const v=o.path.child(Le.fromString(g));if(!H.isDocumentKey(v))throw new O(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const m=new H(v);f.push(sl(a,m))}else{const v=WU(l,u,g);f.push(v)}}return new $o(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function ik(t,e,n){if(typeof(n=te(n))=="string"){if(n==="")throw new O(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HS(e)&&n.indexOf("/")!==-1)throw new O(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!H.isDocumentKey(r))throw new O(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sl(t,new H(r))}if(n instanceof Et)return sl(t,n._key);throw new O(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ky(n)}.`)}function sk(t,e){if(!Array.isArray(t)||t.length===0)throw new O(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YU(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new O(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LC{convertValue(e,n="none"){switch(il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Sl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Qy(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=WS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(af(e));default:return null}}convertTimestamp(e){const n=Oo(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);ie(BV(r));const i=new Mo(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||$t(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ete extends LC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ps=class extends mf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},sh=class extends Ps{data(e={}){return super.data(e)}},Uo=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ka(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sh(this._firestore,this._userDataWriter,r.key,r,new ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new sh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ka(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new sh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ka(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Ite(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Ite(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function XU(t,e){return t instanceof Ps&&e instanceof Ps?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Uo&&e instanceof Uo&&t._firestore===e._firestore&&$U(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tte(t){t=Fe(t,Et);const e=Fe(t.firestore,Nt);return RU(dn(e),t._key).then(n=>$C(e,t,n))}class Al extends LC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function bte(t){t=Fe(t,Et);const e=Fe(t.firestore,Nt),n=dn(e),r=new Al(e);return jee(n,t._key).then(i=>new Ps(e,r,t._key,i,new ka(i!==null&&i.hasLocalMutations,!0),t.converter))}function Ste(t){t=Fe(t,Et);const e=Fe(t.firestore,Nt);return RU(dn(e),t._key,{source:"server"}).then(n=>$C(e,t,n))}function Cte(t){t=Fe(t,Gn);const e=Fe(t.firestore,Nt),n=dn(e),r=new Al(e);return KU(t._query),xU(n,t._query).then(i=>new Uo(e,r,t,i))}function Rte(t){t=Fe(t,Gn);const e=Fe(t.firestore,Nt),n=dn(e),r=new Al(e);return Bee(n,t._query).then(i=>new Uo(e,r,t,i))}function xte(t){t=Fe(t,Gn);const e=Fe(t.firestore,Nt),n=dn(e),r=new Al(e);return xU(n,t._query,{source:"server"}).then(i=>new Uo(e,r,t,i))}function ok(t,e,n){t=Fe(t,Et);const r=Fe(t.firestore,Nt),i=rv(t.converter,e,n);return pp(r,[Xy(Rl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gt.none())])}function ak(t,e,n,...r){t=Fe(t,Et);const i=Fe(t.firestore,Nt),s=Rl(i);let o;return o=typeof(e=te(e))=="string"||e instanceof Vo?PC(s,"updateDoc",t._key,e,n,r):AC(s,"updateDoc",t._key,e),pp(i,[o.toMutation(t._key,gt.exists(!0))])}function Ate(t){return pp(Fe(t.firestore,Nt),[new Mc(t._key,gt.none())])}function Pte(t,e){const n=Fe(t.firestore,Nt),r=a_(t),i=rv(t.converter,e);return pp(n,[Xy(Rl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function JU(t,...e){var n,r,i;t=te(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||OI(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(OI(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof Et)u=Fe(t.firestore,Nt),c=Oc(t._key.path),l={next:d=>{e[o]&&e[o]($C(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Fe(t,Gn);u=Fe(d.firestore,Nt),c=d._query;const h=new Al(u);l={next:f=>{e[o]&&e[o](new Uo(u,h,d,f))},error:e[o+1],complete:e[o+2]},KU(t._query)}return function(h,f,p,g){const v=new Hy(g),m=new gC(f,v,p);return h.asyncQueue.enqueueAndForget(async()=>fC(await cc(h),m)),()=>{v.Na(),h.asyncQueue.enqueueAndForget(async()=>pC(await cc(h),m))}}(dn(u),c,a,l)}function kte(t,e){return zee(dn(t=Fe(t,Nt)),OI(e)?e:{next:e})}function pp(t,e){return function(r,i){const s=new on;return r.asyncQueue.enqueueAndForget(async()=>_ee(await CC(r),i,s)),s.promise}(dn(t),e)}function $C(t,e,n){const r=n.docs.get(e._key),i=new Al(t);return new Ps(t,i,e._key,r,new ka(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nte={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ote=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Rl(e)}set(e,n,r){this._verifyNotCommitted();const i=to(e,this._firestore),s=rv(i.converter,n,r),o=Xy(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,gt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=to(e,this._firestore);let o;return o=typeof(n=te(n))=="string"||n instanceof Vo?PC(this._dataReader,"WriteBatch.update",s._key,n,r,i):AC(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=to(e,this._firestore);return this._mutations=this._mutations.concat(new Mc(n._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function to(t,e){if((t=te(t)).firestore!==e)throw new O(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dte=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Rl(n)}get(n){const r=to(n,this._firestore),i=new Ete(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return J();const o=s[0];if(o.isFoundDocument())return new mf(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new mf(this._firestore,i,r._key,null,r.converter);throw J()})}set(n,r,i){const s=to(n,this._firestore),o=rv(s.converter,r,i),a=Xy(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=to(n,this._firestore);let a;return a=typeof(r=te(r))=="string"||r instanceof Vo?PC(this._dataReader,"Transaction.update",o._key,r,i,s):AC(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=to(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=to(e,this._firestore),r=new Al(this._firestore);return super.get(e).then(i=>new Ps(this._firestore,r,n._key,i._document,new ka(!1,!1),n.converter))}};function Mte(t,e,n){t=Fe(t,Nt);const r=Object.assign(Object.assign({},Nte),n);return function(s){if(s.maxAttempts<1)throw new O(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new on;return s.asyncQueue.enqueueAndForget(async()=>{const u=await Fee(s);new Lee(s.asyncQueue,u,a,o,l).run()}),l.promise}(dn(t),i=>e(new Dte(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lte(){return new hp("deleteField")}function $te(){return new xC("serverTimestamp")}function Fte(...t){return new lte("arrayUnion",t)}function Vte(...t){return new ute("arrayRemove",t)}function Ute(t){return new cte("increment",t)}(function(e,n=!0){(function(i){Nc=i})(rs),Xi(new ei("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Nt(new GX(r.getProvider("auth-internal")),new XX(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new O(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wn(tP,"4.4.0",e),Wn(tP,"4.4.0","esm2017")})();const jte="@firebase/firestore-compat",Bte="0.3.23";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new O("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){if(typeof Uint8Array>"u")throw new O("unimplemented","Uint8Arrays are not available in this environment.")}function uk(){if(!IJ())throw new O("unimplemented","Blobs are unavailable in Firestore in this environment.")}let ZU=class MI{constructor(e){this._delegate=e}static fromBase64String(e){return uk(),new MI(ts.fromBase64String(e))}static fromUint8Array(e){return lk(),new MI(ts.fromUint8Array(e))}toBase64(){return uk(),this._delegate.toBase64()}toUint8Array(){return lk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){return zte(t,["next","error","complete"])}function zte(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{enableIndexedDbPersistence(e,n){return Xee(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Jee(e._delegate)}clearIndexedDbPersistence(e){return Zee(e._delegate)}}class e4{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ri("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Hee(this._delegate,e,n,r)}enableNetwork(){return tte(this._delegate)}disableNetwork(){return nte(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PU("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ete(this._delegate)}onSnapshotsInSync(e){return kte(this._delegate,e)}get app(){if(!this._appCompat)throw new O("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dc(this,MU(this._delegate,e))}catch(n){throw Un(n,"collection()","Firestore.collection()")}}doc(e){try{return new Kr(this,a_(this._delegate,e))}catch(n){throw Un(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vn(this,Gee(this._delegate,e))}catch(n){throw Un(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Mte(this._delegate,n=>e(new t4(this,n)))}batch(){return dn(this._delegate),new n4(new Ote(this._delegate,e=>pp(this._delegate,e)))}loadBundle(e){return rte(this._delegate,e)}namedQuery(e){return ite(this._delegate,e).then(n=>n?new Vn(this,n):null)}}class iv extends LC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ZU(new ts(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Kr.forKey(n,this.firestore,null)}}function qte(t){zX(t)}class t4{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new iv(e)}get(e){const n=Na(e);return this._delegate.get(n).then(r=>new gf(this._firestore,new Ps(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Na(e);return r?(FC("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Na(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Na(e);return this._delegate.delete(n),this}}class n4{constructor(e){this._delegate=e}set(e,n,r){const i=Na(e);return r?(FC("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Na(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Na(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class hl{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new sh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _f(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=hl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new hl(e,new iv(e),n),i.set(n,s)),s}}hl.INSTANCES=new WeakMap;class Kr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new iv(e)}static forPath(e,n,r){if(e.length%2!==0)throw new O("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Kr(n,new Et(n._delegate,r,new H(e)))}static forKey(e,n,r){return new Kr(n,new Et(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new dc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dc(this.firestore,MU(this._delegate,e))}catch(n){throw Un(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=te(e),e instanceof Et?LU(this._delegate,e):!1}set(e,n){n=FC("DocumentReference.set",n);try{return n?ok(this._delegate,e,n):ok(this._delegate,e)}catch(r){throw Un(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?ak(this._delegate,e):ak(this._delegate,e,n,...r)}catch(i){throw Un(i,"updateDoc()","DocumentReference.update()")}}delete(){return Ate(this._delegate)}onSnapshot(...e){const n=r4(e),r=i4(e,i=>new gf(this.firestore,new Ps(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return JU(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=bte(this._delegate):(e==null?void 0:e.source)==="server"?n=Ste(this._delegate):n=Tte(this._delegate),n.then(r=>new gf(this.firestore,new Ps(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Kr(this.firestore,e?this._delegate.withConverter(hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Un(t,e,n){return t.message=t.message.replace(e,n),t}function r4(t){for(const e of t)if(typeof e=="object"&&!LI(e))return e;return{}}function i4(t,e){var n,r;let i;return LI(t[0])?i=t[0]:LI(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class gf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Kr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return XU(this._delegate,e._delegate)}}class _f extends gf{data(e){const n=this._delegate.data(e);return this._delegate._converter||WX(n!==void 0),n}}class Vn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new iv(e)}where(e,n,r){try{return new Vn(this.firestore,Hs(this._delegate,fte(e,n,r)))}catch(i){throw Un(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Vn(this.firestore,Hs(this._delegate,pte(e,n)))}catch(r){throw Un(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vn(this.firestore,Hs(this._delegate,mte(e)))}catch(n){throw Un(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Vn(this.firestore,Hs(this._delegate,gte(e)))}catch(n){throw Un(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vn(this.firestore,Hs(this._delegate,_te(...e)))}catch(n){throw Un(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vn(this.firestore,Hs(this._delegate,yte(...e)))}catch(n){throw Un(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vn(this.firestore,Hs(this._delegate,vte(...e)))}catch(n){throw Un(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vn(this.firestore,Hs(this._delegate,wte(...e)))}catch(n){throw Un(n,"endAt()","Query.endAt()")}}isEqual(e){return $U(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Rte(this._delegate):(e==null?void 0:e.source)==="server"?n=xte(this._delegate):n=Cte(this._delegate),n.then(r=>new $I(this.firestore,new Uo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=r4(e),r=i4(e,i=>new $I(this.firestore,new Uo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return JU(this._delegate,n,r)}withConverter(e){return new Vn(this.firestore,e?this._delegate.withConverter(hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Hte{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new _f(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $I{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Vn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _f(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Hte(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new _f(this._firestore,r))})}isEqual(e){return XU(this._delegate,e._delegate)}}class dc extends Vn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Kr(this.firestore,e):null}doc(e){try{return e===void 0?new Kr(this.firestore,a_(this._delegate)):new Kr(this.firestore,a_(this._delegate,e))}catch(n){throw Un(n,"doc()","CollectionReference.doc()")}}add(e){return Pte(this._delegate,e).then(n=>new Kr(this.firestore,n))}isEqual(e){return LU(this._delegate,e._delegate)}withConverter(e){return new dc(this.firestore,e?this._delegate.withConverter(hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Na(t){return Fe(t,Et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(...e){this._delegate=new Vo(...e)}static documentId(){return new VC(mt.keyField().canonicalString())}isEqual(e){return e=te(e),e instanceof Vo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._delegate=e}static serverTimestamp(){const e=$te();return e._methodName="FieldValue.serverTimestamp",new Ia(e)}static delete(){const e=Lte();return e._methodName="FieldValue.delete",new Ia(e)}static arrayUnion(...e){const n=Fte(...e);return n._methodName="FieldValue.arrayUnion",new Ia(n)}static arrayRemove(...e){const n=Vte(...e);return n._methodName="FieldValue.arrayRemove",new Ia(n)}static increment(e){const n=Ute(e);return n._methodName="FieldValue.increment",new Ia(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gte={Firestore:e4,GeoPoint:Qy,Timestamp:_t,Blob:ZU,Transaction:t4,WriteBatch:n4,DocumentReference:Kr,DocumentSnapshot:gf,Query:Vn,QueryDocumentSnapshot:_f,QuerySnapshot:$I,CollectionReference:dc,FieldPath:VC,FieldValue:Ia,setLogLevel:qte,CACHE_SIZE_UNLIMITED:Yee};function Kte(t,e){t.INTERNAL.registerComponent(new ei("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Gte)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qte(t){Kte(t,(e,n)=>new e4(e,n,new Wte)),t.registerVersion(jte,Bte)}Qte(uy);const Yte={apiKey:"AIzaSyD1u4VDvhbnOQvIlTsJd88GrMb0TTyvo7M",appId:"1:1004589233541:web:0185c11193e27aa053c0ec",authDomain:"eshop2-7a876.firebaseapp.com",databaseURL:"https://eshop2-7a876-default-rtdb.firebaseio.com",messagingSenderId:"1004589233541",projectId:"eshop2-7a876",storageBucket:"eshop2-7a876.appspot.com"},UC=X_(Yte),FI=iH(UC),Xte=_G(UC),s4=GQ(UC);function mn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Jte=typeof Symbol=="function"&&Symbol.observable||"@@observable",ck=Jte,mw=()=>Math.random().toString(36).substring(7).split("").join("."),Zte={INIT:`@@redux/INIT${mw()}`,REPLACE:`@@redux/REPLACE${mw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mw()}`},u_=Zte;function jC(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function o4(t,e,n){if(typeof t!="function")throw new Error(mn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(mn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(mn(1));return n(o4)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((v,m)=>{o.set(m,v)}))}function c(){if(l)throw new Error(mn(3));return i}function d(v){if(typeof v!="function")throw new Error(mn(4));if(l)throw new Error(mn(5));let m=!0;u();const _=a++;return o.set(_,v),function(){if(m){if(l)throw new Error(mn(6));m=!1,u(),o.delete(_),s=null}}}function h(v){if(!jC(v))throw new Error(mn(7));if(typeof v.type>"u")throw new Error(mn(8));if(typeof v.type!="string")throw new Error(mn(17));if(l)throw new Error(mn(9));try{l=!0,i=r(i,v)}finally{l=!1}return(s=o).forEach(_=>{_()}),v}function f(v){if(typeof v!="function")throw new Error(mn(10));r=v,h({type:u_.REPLACE})}function p(){const v=d;return{subscribe(m){if(typeof m!="object"||m===null)throw new Error(mn(11));function _(){const E=m;E.next&&E.next(c())}return _(),{unsubscribe:v(_)}},[ck](){return this}}}return h({type:u_.INIT}),{dispatch:h,subscribe:d,getState:c,replaceReducer:f,[ck]:p}}function ene(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:u_.INIT})>"u")throw new Error(mn(12));if(typeof n(void 0,{type:u_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(mn(13))})}function tne(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{ene(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let c=0;c<r.length;c++){const d=r[c],h=n[d],f=o[d],p=h(f,a);if(typeof p>"u")throw a&&a.type,new Error(mn(14));u[d]=p,l=l||p!==f}return l=l||r.length!==Object.keys(o).length,l?u:o}}function c_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function nne(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(mn(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=t.map(l=>l(o));return s=c_(...a)(i.dispatch),{...i,dispatch:s}}}function rne(t){return jC(t)&&"type"in t&&typeof t.type=="string"}var a4=Symbol.for("immer-nothing"),dk=Symbol.for("immer-draftable"),Lr=Symbol.for("immer-state");function pi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var hc=Object.getPrototypeOf;function jo(t){return!!t&&!!t[Lr]}function ks(t){var e;return t?l4(t)||Array.isArray(t)||!!t[dk]||!!((e=t.constructor)!=null&&e[dk])||ov(t)||av(t):!1}var ine=Object.prototype.constructor.toString();function l4(t){if(!t||typeof t!="object")return!1;const e=hc(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===ine}function yf(t,e){sv(t)===0?Object.entries(t).forEach(([n,r])=>{e(n,r,t)}):t.forEach((n,r)=>e(r,n,t))}function sv(t){const e=t[Lr];return e?e.type_:Array.isArray(t)?1:ov(t)?2:av(t)?3:0}function VI(t,e){return sv(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function u4(t,e,n){const r=sv(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function sne(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ov(t){return t instanceof Map}function av(t){return t instanceof Set}function fa(t){return t.copy_||t.base_}function UI(t,e){if(ov(t))return new Map(t);if(av(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&l4(t))return hc(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[Lr];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(hc(t),n)}function BC(t,e=!1){return lv(t)||jo(t)||!ks(t)||(sv(t)>1&&(t.set=t.add=t.clear=t.delete=one),Object.freeze(t),e&&yf(t,(n,r)=>BC(r,!0))),t}function one(){pi(2)}function lv(t){return Object.isFrozen(t)}var ane={};function fl(t){const e=ane[t];return e||pi(0,t),e}var vf;function c4(){return vf}function lne(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function hk(t,e){e&&(fl("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function jI(t){BI(t),t.drafts_.forEach(une),t.drafts_=null}function BI(t){t===vf&&(vf=t.parent_)}function fk(t){return vf=lne(vf,t)}function une(t){const e=t[Lr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function pk(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Lr].modified_&&(jI(e),pi(4)),ks(t)&&(t=d_(e,t),e.parent_||h_(e,t)),e.patches_&&fl("Patches").generateReplacementPatches_(n[Lr].base_,t,e.patches_,e.inversePatches_)):t=d_(e,n,[]),jI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==a4?t:void 0}function d_(t,e,n){if(lv(e))return e;const r=e[Lr];if(!r)return yf(e,(i,s)=>mk(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return h_(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),yf(s,(a,l)=>mk(t,r,i,a,l,n,o)),h_(t,i,!1),n&&t.patches_&&fl("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function mk(t,e,n,r,i,s,o){if(jo(i)){const a=s&&e&&e.type_!==3&&!VI(e.assigned_,r)?s.concat(r):void 0,l=d_(t,i,a);if(u4(n,r,l),jo(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ks(i)&&!lv(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;d_(t,i),(!e||!e.scope_.parent_)&&h_(t,i)}}function h_(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&BC(e,n)}function cne(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:c4(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=zC;n&&(i=[r],s=wf);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var zC={get(t,e){if(e===Lr)return t;const n=fa(t);if(!VI(n,e))return dne(t,n,e);const r=n[e];return t.finalized_||!ks(r)?r:r===gw(t.base_,e)?(_w(t),t.copy_[e]=WI(r,t)):r},has(t,e){return e in fa(t)},ownKeys(t){return Reflect.ownKeys(fa(t))},set(t,e,n){const r=d4(fa(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=gw(fa(t),e),s=i==null?void 0:i[Lr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(sne(n,i)&&(n!==void 0||VI(t.base_,e)))return!0;_w(t),zI(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return gw(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,_w(t),zI(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=fa(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){pi(11)},getPrototypeOf(t){return hc(t.base_)},setPrototypeOf(){pi(12)}},wf={};yf(zC,(t,e)=>{wf[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});wf.deleteProperty=function(t,e){return wf.set.call(this,t,e,void 0)};wf.set=function(t,e,n){return zC.set.call(this,t[0],e,n,t[0])};function gw(t,e){const n=t[Lr];return(n?fa(n):t)[e]}function dne(t,e,n){var i;const r=d4(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function d4(t,e){if(!(e in t))return;let n=hc(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=hc(n)}}function zI(t){t.modified_||(t.modified_=!0,t.parent_&&zI(t.parent_))}function _w(t){t.copy_||(t.copy_=UI(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var hne=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&pi(6),r!==void 0&&typeof r!="function"&&pi(7);let i;if(ks(e)){const s=fk(this),o=WI(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?jI(s):BI(s)}return hk(s,r),pk(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===a4&&(i=void 0),this.autoFreeze_&&BC(i,!0),r){const s=[],o=[];fl("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else pi(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ks(t)||pi(8),jo(t)&&(t=h4(t));const e=fk(this),n=WI(t,void 0);return n[Lr].isManual_=!0,BI(e),n}finishDraft(t,e){const n=t&&t[Lr];(!n||!n.isManual_)&&pi(9);const{scope_:r}=n;return hk(r,e),pk(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=fl("Patches").applyPatches_;return jo(t)?r(t,e):this.produce(t,i=>r(i,e))}};function WI(t,e){const n=ov(t)?fl("MapSet").proxyMap_(t,e):av(t)?fl("MapSet").proxySet_(t,e):cne(t,e);return(e?e.scope_:c4()).drafts_.push(n),n}function h4(t){return jo(t)||pi(10,t),f4(t)}function f4(t){if(!ks(t)||lv(t))return t;const e=t[Lr];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=UI(t,e.scope_.immer_.useStrictShallowCopy_)}else n=UI(t,!0);return yf(n,(r,i)=>{u4(n,r,f4(i))}),e&&(e.finalized_=!1),n}var $r=new hne,p4=$r.produce;$r.produceWithPatches.bind($r);$r.setAutoFreeze.bind($r);$r.setUseStrictShallowCopy.bind($r);$r.applyPatches.bind($r);$r.createDraft.bind($r);$r.finishDraft.bind($r);function fne(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function pne(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function mne(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var gk=t=>Array.isArray(t)?t:[t];function gne(t){const e=Array.isArray(t[0])?t[0]:t;return mne(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function _ne(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var yne=class{constructor(t){this.value=t}deref(){return this.value}},vne=typeof WeakRef<"u"?WeakRef:yne,wne=0,_k=1;function om(){return{s:wne,v:void 0,o:null,p:null}}function WC(t,e={}){let n=om();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var d;let a=n;const{length:l}=arguments;for(let h=0,f=l;h<f;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=a.o;g===null&&(a.o=g=new WeakMap);const v=g.get(p);v===void 0?(a=om(),g.set(p,a)):a=v}else{let g=a.p;g===null&&(a.p=g=new Map);const v=g.get(p);v===void 0?(a=om(),g.set(p,a)):a=v}}const u=a;let c;if(a.s===_k?c=a.v:(c=t.apply(null,arguments),s++),u.s=_k,r){const h=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;h!=null&&r(h,c)&&(c=h,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new vne(c):c}return u.v=c,c}return o.clearCache=()=>{n=om(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function m4(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),fne(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...n,...l},{memoize:d,memoizeOptions:h=[],argsMemoize:f=WC,argsMemoizeOptions:p=[],devModeChecks:g={}}=c,v=gk(h),m=gk(p),_=gne(i),y=d(function(){return s++,u.apply(null,arguments)},...v),E=f(function(){o++;const C=_ne(_,arguments);return a=y.apply(null,C),a},...m);return Object.assign(E,{resultFunc:u,memoizedResultFunc:y,dependencies:_,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:f})};return Object.assign(r,{withTypes:()=>r}),r}var Ene=m4(WC),Ine=Object.assign((t,e=Ene)=>{pne(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>Ine});function g4(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var Tne=g4(),bne=g4,Sne=(...t)=>{const e=m4(...t);return(...n)=>{const r=e(...n),i=(s,...o)=>r(jo(s)?h4(s):s,...o);return Object.assign(i,r),i}};Sne(WC);var Cne=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?c_:c_.apply(null,arguments)},Rne=t=>t&&typeof t.match=="function";function Eo(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Ei(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>rne(r)&&r.type===t,n}var _4=class Dd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Dd.prototype)}static get[Symbol.species](){return Dd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Dd(...e[0].concat(this)):new Dd(...e.concat(this))}};function yk(t){return ks(t)?p4(t,()=>{}):t}function vk(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(Ei(10));const r=n.insert(e,t);return t.set(e,r),r}function xne(t){return typeof t=="boolean"}var Ane=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new _4;return n&&(xne(n)?o.push(Tne):o.push(bne(n.extraArgument))),o},Pne="RTK_autoBatch",y4=t=>e=>{setTimeout(e,t)},kne=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:y4(10),Nne=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?kne:t.type==="callback"?t.queueNotification:y4(t.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),h=r.subscribe(d);return a.add(c),()=>{h(),a.delete(c)}},dispatch(c){var d;try{return i=!((d=c==null?void 0:c.meta)!=null&&d[Pne]),s=!i,s&&(o||(o=!0,l(u))),r.dispatch(c)}finally{i=!0}}})},One=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new _4(t);return r&&i.push(Nne(typeof r=="object"?r:void 0)),i},Dne=!0;function Mne(t){const e=Ane(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(jC(n))a=tne(n);else throw new Error(Ei(1));let l;typeof r=="function"?l=r(e):l=e();let u=c_;i&&(u=Cne({trace:!Dne,...typeof i=="object"&&i}));const c=nne(...l),d=One(c);let h=typeof o=="function"?o(d):d();const f=u(...h);return o4(a,s,f)}function v4(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Ei(28));if(a in e)throw new Error(Ei(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function Lne(t){return typeof t=="function"}function $ne(t,e){let[n,r,i]=v4(e),s;if(Lne(t))s=()=>yk(t());else{const a=yk(t);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,d)=>{if(d)if(jo(c)){const f=d(c,l);return f===void 0?c:f}else{if(ks(c))return p4(c,h=>d(h,l));{const h=d(c,l);if(h===void 0){if(c===null)return c;throw new Error(Ei(9))}return h}}return c},a)}return o.getInitialState=s,o}var Fne="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Vne=(t=21)=>{let e="",n=t;for(;n--;)e+=Fne[Math.random()*64|0];return e},Une=(t,e)=>Rne(t)?t.match(e):t(e);function jne(...t){return e=>t.some(n=>Une(n,e))}var Bne=["name","message","stack","code"],yw=class{constructor(t,e){u0(this,"_type");this.payload=t,this.meta=e}},wk=class{constructor(t,e){u0(this,"_type");this.payload=t,this.meta=e}},zne=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of Bne)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},qC=(()=>{function t(e,n,r){const i=Eo(e+"/fulfilled",(l,u,c,d)=>({payload:l,meta:{...d||{},arg:c,requestId:u,requestStatus:"fulfilled"}})),s=Eo(e+"/pending",(l,u,c)=>({payload:void 0,meta:{...c||{},arg:u,requestId:l,requestStatus:"pending"}})),o=Eo(e+"/rejected",(l,u,c,d,h)=>({payload:d,error:(r&&r.serializeError||zne)(l||"Rejected"),meta:{...h||{},arg:c,requestId:u,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l){return(u,c,d)=>{const h=r!=null&&r.idGenerator?r.idGenerator(l):Vne(),f=new AbortController;let p;function g(m){p=m,f.abort()}const v=async function(){var y,E;let m;try{let b=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,l,{getState:c,extra:d});if(qne(b)&&(b=await b),b===!1||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const C=new Promise((T,A)=>f.signal.addEventListener("abort",()=>A({name:"AbortError",message:p||"Aborted"})));u(s(h,l,(E=r==null?void 0:r.getPendingMeta)==null?void 0:E.call(r,{requestId:h,arg:l},{getState:c,extra:d}))),m=await Promise.race([C,Promise.resolve(n(l,{dispatch:u,getState:c,extra:d,requestId:h,signal:f.signal,abort:g,rejectWithValue:(T,A)=>new yw(T,A),fulfillWithValue:(T,A)=>new wk(T,A)})).then(T=>{if(T instanceof yw)throw T;return T instanceof wk?i(T.payload,h,l,T.meta):i(T,h,l)})])}catch(b){m=b instanceof yw?o(null,h,l,b.payload,b.meta):o(b,h,l)}return r&&!r.dispatchConditionRejection&&o.match(m)&&m.meta.condition||u(m),m}();return Object.assign(v,{abort:g,requestId:h,arg:l,unwrap(){return v.then(Wne)}})}}return Object.assign(a,{pending:s,rejected:o,fulfilled:i,settled:jne(o,i),typePrefix:e})}return t.withTypes=()=>t,t})();function Wne(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function qne(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Hne=Symbol.for("rtk-slice-createasyncthunk");function Gne(t,e){return`${t}/${e}`}function Kne({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Hne];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Ei(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Yne()):i.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(v,m){const _=typeof v=="string"?v:v.type;if(!_)throw new Error(Ei(12));if(_ in u.sliceCaseReducersByType)throw new Error(Ei(13));return u.sliceCaseReducersByType[_]=m,c},addMatcher(v,m){return u.sliceMatchers.push({matcher:v,reducer:m}),c},exposeAction(v,m){return u.actionCreators[v]=m,c},exposeCaseReducer(v,m){return u.sliceCaseReducersByName[v]=m,c}};l.forEach(v=>{const m=a[v],_={reducerName:v,type:Gne(s,v),createNotation:typeof i.reducers=="function"};Jne(m)?ere(_,m,c,e):Xne(_,m,c)});function d(){const[v={},m=[],_=void 0]=typeof i.extraReducers=="function"?v4(i.extraReducers):[i.extraReducers],y={...v,...u.sliceCaseReducersByType};return $ne(i.initialState,E=>{for(let b in y)E.addCase(b,y[b]);for(let b of u.sliceMatchers)E.addMatcher(b.matcher,b.reducer);for(let b of m)E.addMatcher(b.matcher,b.reducer);_&&E.addDefaultCase(_)})}const h=v=>v,f=new WeakMap;let p;const g={name:s,reducerPath:o,reducer(v,m){return p||(p=d()),p(v,m)},actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState(){return p||(p=d()),p.getInitialState()},getSelectors(v=h){const m=vk(f,this,{insert:()=>new WeakMap});return vk(m,v,{insert:()=>{const _={};for(const[y,E]of Object.entries(i.selectors??{}))_[y]=Qne(this,E,v,this!==g);return _}})},selectSlice(v){let m=v[this.reducerPath];return typeof m>"u"&&this!==g&&(m=this.getInitialState()),m},get selectors(){return this.getSelectors(this.selectSlice)},injectInto(v,{reducerPath:m,..._}={}){const y=m??this.reducerPath;return v.inject({reducerPath:y,reducer:this.reducer},_),{...this,reducerPath:y}}};return g}}function Qne(t,e,n,r){function i(s,...o){let a=n.call(t,s);return typeof a>"u"&&r&&(a=t.getInitialState()),e(a,...o)}return i.unwrapped=e,i}var uv=Kne();function Yne(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Xne({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Zne(r))throw new Error(Ei(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Eo(t,o):Eo(t))}function Jne(t){return t._reducerDefinitionType==="asyncThunk"}function Zne(t){return t._reducerDefinitionType==="reducerWithPrepare"}function ere({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Ei(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=n,d=i(t,s,c);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(e,{fulfilled:o||am,pending:a||am,rejected:l||am,settled:u||am})}function am(){}var HC="listenerMiddleware";Eo(`${HC}/add`);Eo(`${HC}/removeAll`);Eo(`${HC}/remove`);function Ei(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const tre={items:[]},w4=uv({initialState:tre,name:"cart",reducers:{addItem:(t,e)=>{e.payload.quantity=1,t.items.push(e.payload)},decreaseItem:(t,e)=>{const n=t.items.find(r=>r.id===e.payload);n&&(n.quantity-=1)},deleteCart:t=>{t.items=[]},increaseItem:(t,e)=>{const n=t.items.find(r=>r.id===e.payload);n&&(n.quantity+=1)},removeItem:(t,e)=>{t.items=t.items.filter(n=>n.id!==e.payload)},setCart:(t,e)=>{t.items=e.payload}}}),{addItem:nre,decreaseItem:rre,deleteCart:ire,increaseItem:E4,removeItem:Ek,setCart:sre}=w4.actions,ore=w4.reducer,GC=qC.withTypes(),are={items:[],loading:!1},Um=qC("product/fetchProducts",async()=>{const t=qE(FI,"items"),e=await w2(t);return e.exists()?e.val():[]}),jm=GC("product/addProduct",async t=>{try{await Q8(qE(FI,"items"),t),console.log("Data sent successfully");const e=qE(FI,"items"),n=await w2(e);return n.exists()?n.val():[]}catch(e){return console.error("Error sending data:",e),[]}}),I4=uv({extraReducers:t=>{t.addCase(Um.pending,e=>{e.loading=!0}).addCase(Um.fulfilled,(e,n)=>{e.loading=!1,e.items=n.payload}).addCase(Um.rejected,e=>{e.loading=!1}).addCase(jm.pending,e=>{e.loading=!0}).addCase(jm.fulfilled,(e,n)=>{e.loading=!1,e.items=n.payload}).addCase(jm.rejected,e=>{e.loading=!1})},initialState:are,name:"product",reducers:{addItem:(t,e)=>{t.items.push(e.payload)},setItems:(t,e)=>{t.items=e.payload}}});I4.actions;const lre=I4.reducer;let lm;const ure=new Uint8Array(16);function cre(){if(!lm&&(lm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lm(ure)}const pn=[];for(let t=0;t<256;++t)pn.push((t+256).toString(16).slice(1));function dre(t,e=0){return pn[t[e+0]]+pn[t[e+1]]+pn[t[e+2]]+pn[t[e+3]]+"-"+pn[t[e+4]]+pn[t[e+5]]+"-"+pn[t[e+6]]+pn[t[e+7]]+"-"+pn[t[e+8]]+pn[t[e+9]]+"-"+pn[t[e+10]]+pn[t[e+11]]+pn[t[e+12]]+pn[t[e+13]]+pn[t[e+14]]+pn[t[e+15]]}const hre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ik={randomUUID:hre};function KC(t,e,n){if(Ik.randomUUID&&!e&&!t)return Ik.randomUUID();t=t||{};const r=t.random||(t.rng||cre)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return dre(r)}const fre={loading:!1,uploadImg:""},T4=uv({name:"upload",initialState:fre,reducers:{setLoading:(t,e)=>{t.loading=e.payload},onImageUpload:(t,e)=>{t.uploadImg=e.payload}}}),pre=qC("product/upload",async(t,e)=>{const{dispatch:n}=e;n(vw(!0));const r=gG(Xte,`images/${t.name+KC()}`);try{const i=await pG(r,t),s=await mG(i.ref);n(vw(!1)),n(mre(s))}catch(i){console.error("Error uploading file:",i),n(vw(!1))}}),{setLoading:vw,onImageUpload:mre}=T4.actions,gre=T4.reducer,_re={error:"",user:null,isAuthenticated:!1},yre=GC("auth/signUp",async(t,e)=>{const{dispatch:n}=e;try{const r=await h$(s4,t.email,t.password);n(wre(r.user))}catch(r){const i=r.code;n(S4(i))}}),vre=GC("auth/signIn",async(t,e)=>{const{dispatch:n}=e;try{const r=await f$(s4,t.email,t.password);n(Ere());const i=r.user;console.log(i)}catch(r){const i=r.code;n(S4(i))}}),b4=uv({initialState:_re,name:"auth",reducers:{createUser(t,e){const n=e.payload.user;t.user={email:n.email,password:n.password},t.error=""},logIn(t){t.isAuthenticated=!0,t.error=""},logOut(t){t.isAuthenticated=!1,t.error=""},setError(t,e){t.error=e.payload}}}),{createUser:wre,logIn:Ere,logOut:Ire,setError:S4}=b4.actions,Tre=b4.reducer,bre=Mne({reducer:{auth:Tre,cart:ore,product:lre,upload:gre}}),mp=()=>R_();var C4,Tk=z_;C4=Tk.createRoot,Tk.hydrateRoot;const Sre={black:"#000",white:"#fff"},Ef=Sre,Cre={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Wl=Cre,Rre={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ql=Rre,xre={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Hl=xre,Are={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Gl=Are,Pre={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Kl=Pre,kre={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},fd=kre,Nre={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Ore=Nre;function Bo(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const gp="$$material";function S(){return S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S.apply(this,arguments)}function se(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function R4(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Dre=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Mre=R4(function(t){return Dre.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function Lre(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function $re(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Fre=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($re(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Lre(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),xn="-ms-",f_="-moz-",Ue="-webkit-",x4="comm",QC="rule",YC="decl",Vre="@import",A4="@keyframes",Ure="@layer",jre=Math.abs,cv=String.fromCharCode,Bre=Object.assign;function zre(t,e){return yn(t,0)^45?(((e<<2^yn(t,0))<<2^yn(t,1))<<2^yn(t,2))<<2^yn(t,3):0}function P4(t){return t.trim()}function Wre(t,e){return(t=e.exec(t))?t[0]:t}function je(t,e,n){return t.replace(e,n)}function qI(t,e){return t.indexOf(e)}function yn(t,e){return t.charCodeAt(e)|0}function If(t,e,n){return t.slice(e,n)}function Ni(t){return t.length}function XC(t){return t.length}function um(t,e){return e.push(t),t}function qre(t,e){return t.map(e).join("")}var dv=1,fc=1,k4=0,yr=0,Bt=0,Uc="";function hv(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:dv,column:fc,length:o,return:""}}function pd(t,e){return Bre(hv("",null,null,"",null,null,0),t,{length:-t.length},e)}function Hre(){return Bt}function Gre(){return Bt=yr>0?yn(Uc,--yr):0,fc--,Bt===10&&(fc=1,dv--),Bt}function Nr(){return Bt=yr<k4?yn(Uc,yr++):0,fc++,Bt===10&&(fc=1,dv++),Bt}function Yi(){return yn(Uc,yr)}function Bm(){return yr}function _p(t,e){return If(Uc,t,e)}function Tf(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N4(t){return dv=fc=1,k4=Ni(Uc=t),yr=0,[]}function O4(t){return Uc="",t}function zm(t){return P4(_p(yr-1,HI(t===91?t+2:t===40?t+1:t)))}function Kre(t){for(;(Bt=Yi())&&Bt<33;)Nr();return Tf(t)>2||Tf(Bt)>3?"":" "}function Qre(t,e){for(;--e&&Nr()&&!(Bt<48||Bt>102||Bt>57&&Bt<65||Bt>70&&Bt<97););return _p(t,Bm()+(e<6&&Yi()==32&&Nr()==32))}function HI(t){for(;Nr();)switch(Bt){case t:return yr;case 34:case 39:t!==34&&t!==39&&HI(Bt);break;case 40:t===41&&HI(t);break;case 92:Nr();break}return yr}function Yre(t,e){for(;Nr()&&t+Bt!==57;)if(t+Bt===84&&Yi()===47)break;return"/*"+_p(e,yr-1)+"*"+cv(t===47?t:Nr())}function Xre(t){for(;!Tf(Yi());)Nr();return _p(t,yr)}function Jre(t){return O4(Wm("",null,null,null,[""],t=N4(t),0,[0],t))}function Wm(t,e,n,r,i,s,o,a,l){for(var u=0,c=0,d=o,h=0,f=0,p=0,g=1,v=1,m=1,_=0,y="",E=i,b=s,C=r,T=y;v;)switch(p=_,_=Nr()){case 40:if(p!=108&&yn(T,d-1)==58){qI(T+=je(zm(_),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:T+=zm(_);break;case 9:case 10:case 13:case 32:T+=Kre(p);break;case 92:T+=Qre(Bm()-1,7);continue;case 47:switch(Yi()){case 42:case 47:um(Zre(Yre(Nr(),Bm()),e,n),l);break;default:T+="/"}break;case 123*g:a[u++]=Ni(T)*m;case 125*g:case 59:case 0:switch(_){case 0:case 125:v=0;case 59+c:m==-1&&(T=je(T,/\f/g,"")),f>0&&Ni(T)-d&&um(f>32?Sk(T+";",r,n,d-1):Sk(je(T," ","")+";",r,n,d-2),l);break;case 59:T+=";";default:if(um(C=bk(T,e,n,u,c,i,a,y,E=[],b=[],d),s),_===123)if(c===0)Wm(T,e,C,C,E,s,d,a,b);else switch(h===99&&yn(T,3)===110?100:h){case 100:case 108:case 109:case 115:Wm(t,C,C,r&&um(bk(t,C,C,0,0,i,a,y,i,E=[],d),b),i,b,d,a,r?E:b);break;default:Wm(T,C,C,C,[""],b,0,a,b)}}u=c=f=0,g=m=1,y=T="",d=o;break;case 58:d=1+Ni(T),f=p;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&Gre()==125)continue}switch(T+=cv(_),_*g){case 38:m=c>0?1:(T+="\f",-1);break;case 44:a[u++]=(Ni(T)-1)*m,m=1;break;case 64:Yi()===45&&(T+=zm(Nr())),h=Yi(),c=d=Ni(y=T+=Xre(Bm())),_++;break;case 45:p===45&&Ni(T)==2&&(g=0)}}return s}function bk(t,e,n,r,i,s,o,a,l,u,c){for(var d=i-1,h=i===0?s:[""],f=XC(h),p=0,g=0,v=0;p<r;++p)for(var m=0,_=If(t,d+1,d=jre(g=o[p])),y=t;m<f;++m)(y=P4(g>0?h[m]+" "+_:je(_,/&\f/g,h[m])))&&(l[v++]=y);return hv(t,e,n,i===0?QC:a,l,u,c)}function Zre(t,e,n){return hv(t,e,n,x4,cv(Hre()),If(t,2,-2),0)}function Sk(t,e,n,r){return hv(t,e,n,YC,If(t,0,r),If(t,r+1,-1),r)}function Mu(t,e){for(var n="",r=XC(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function eie(t,e,n,r){switch(t.type){case Ure:if(t.children.length)break;case Vre:case YC:return t.return=t.return||t.value;case x4:return"";case A4:return t.return=t.value+"{"+Mu(t.children,r)+"}";case QC:t.value=t.props.join(",")}return Ni(n=Mu(t.children,r))?t.return=t.value+"{"+n+"}":""}function tie(t){var e=XC(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function nie(t){return function(e){e.root||(e=e.return)&&t(e)}}var rie=function(e,n,r){for(var i=0,s=0;i=s,s=Yi(),i===38&&s===12&&(n[r]=1),!Tf(s);)Nr();return _p(e,yr)},iie=function(e,n){var r=-1,i=44;do switch(Tf(i)){case 0:i===38&&Yi()===12&&(n[r]=1),e[r]+=rie(yr-1,n,r);break;case 2:e[r]+=zm(i);break;case 4:if(i===44){e[++r]=Yi()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=cv(i)}while(i=Nr());return e},sie=function(e,n){return O4(iie(N4(e),n))},Ck=new WeakMap,oie=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Ck.get(r))&&!i){Ck.set(e,!0);for(var s=[],o=sie(n,s),a=r.props,l=0,u=0;l<o.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[c]):a[c]+" "+o[l]}}},aie=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function D4(t,e){switch(zre(t,e)){case 5103:return Ue+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ue+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ue+t+f_+t+xn+t+t;case 6828:case 4268:return Ue+t+xn+t+t;case 6165:return Ue+t+xn+"flex-"+t+t;case 5187:return Ue+t+je(t,/(\w+).+(:[^]+)/,Ue+"box-$1$2"+xn+"flex-$1$2")+t;case 5443:return Ue+t+xn+"flex-item-"+je(t,/flex-|-self/,"")+t;case 4675:return Ue+t+xn+"flex-line-pack"+je(t,/align-content|flex-|-self/,"")+t;case 5548:return Ue+t+xn+je(t,"shrink","negative")+t;case 5292:return Ue+t+xn+je(t,"basis","preferred-size")+t;case 6060:return Ue+"box-"+je(t,"-grow","")+Ue+t+xn+je(t,"grow","positive")+t;case 4554:return Ue+je(t,/([^-])(transform)/g,"$1"+Ue+"$2")+t;case 6187:return je(je(je(t,/(zoom-|grab)/,Ue+"$1"),/(image-set)/,Ue+"$1"),t,"")+t;case 5495:case 3959:return je(t,/(image-set\([^]*)/,Ue+"$1$`$1");case 4968:return je(je(t,/(.+:)(flex-)?(.*)/,Ue+"box-pack:$3"+xn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ue+t+t;case 4095:case 3583:case 4068:case 2532:return je(t,/(.+)-inline(.+)/,Ue+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ni(t)-1-e>6)switch(yn(t,e+1)){case 109:if(yn(t,e+4)!==45)break;case 102:return je(t,/(.+:)(.+)-([^]+)/,"$1"+Ue+"$2-$3$1"+f_+(yn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~qI(t,"stretch")?D4(je(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(yn(t,e+1)!==115)break;case 6444:switch(yn(t,Ni(t)-3-(~qI(t,"!important")&&10))){case 107:return je(t,":",":"+Ue)+t;case 101:return je(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ue+(yn(t,14)===45?"inline-":"")+"box$3$1"+Ue+"$2$3$1"+xn+"$2box$3")+t}break;case 5936:switch(yn(t,e+11)){case 114:return Ue+t+xn+je(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ue+t+xn+je(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ue+t+xn+je(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ue+t+xn+t+t}return t}var lie=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case YC:e.return=D4(e.value,e.length);break;case A4:return Mu([pd(e,{value:je(e.value,"@","@"+Ue)})],i);case QC:if(e.length)return qre(e.props,function(s){switch(Wre(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Mu([pd(e,{props:[je(s,/:(read-\w+)/,":"+f_+"$1")]})],i);case"::placeholder":return Mu([pd(e,{props:[je(s,/:(plac\w+)/,":"+Ue+"input-$1")]}),pd(e,{props:[je(s,/:(plac\w+)/,":"+f_+"$1")]}),pd(e,{props:[je(s,/:(plac\w+)/,xn+"input-$1")]})],i)}return""})}},uie=[lie],cie=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var v=g.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||uie,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var v=g.getAttribute("data-emotion").split(" "),m=1;m<v.length;m++)s[v[m]]=!0;a.push(g)});var l,u=[oie,aie];{var c,d=[eie,nie(function(g){c.insert(g)})],h=tie(u.concat(i,d)),f=function(v){return Mu(Jre(v),h)};l=function(v,m,_,y){c=_,f(v?v+"{"+m.styles+"}":m.styles),y&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new Fre({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},M4={exports:{}},Ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hn=typeof Symbol=="function"&&Symbol.for,JC=hn?Symbol.for("react.element"):60103,ZC=hn?Symbol.for("react.portal"):60106,fv=hn?Symbol.for("react.fragment"):60107,pv=hn?Symbol.for("react.strict_mode"):60108,mv=hn?Symbol.for("react.profiler"):60114,gv=hn?Symbol.for("react.provider"):60109,_v=hn?Symbol.for("react.context"):60110,e1=hn?Symbol.for("react.async_mode"):60111,yv=hn?Symbol.for("react.concurrent_mode"):60111,vv=hn?Symbol.for("react.forward_ref"):60112,wv=hn?Symbol.for("react.suspense"):60113,die=hn?Symbol.for("react.suspense_list"):60120,Ev=hn?Symbol.for("react.memo"):60115,Iv=hn?Symbol.for("react.lazy"):60116,hie=hn?Symbol.for("react.block"):60121,fie=hn?Symbol.for("react.fundamental"):60117,pie=hn?Symbol.for("react.responder"):60118,mie=hn?Symbol.for("react.scope"):60119;function Ur(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case JC:switch(t=t.type,t){case e1:case yv:case fv:case mv:case pv:case wv:return t;default:switch(t=t&&t.$$typeof,t){case _v:case vv:case Iv:case Ev:case gv:return t;default:return e}}case ZC:return e}}}function L4(t){return Ur(t)===yv}Ke.AsyncMode=e1;Ke.ConcurrentMode=yv;Ke.ContextConsumer=_v;Ke.ContextProvider=gv;Ke.Element=JC;Ke.ForwardRef=vv;Ke.Fragment=fv;Ke.Lazy=Iv;Ke.Memo=Ev;Ke.Portal=ZC;Ke.Profiler=mv;Ke.StrictMode=pv;Ke.Suspense=wv;Ke.isAsyncMode=function(t){return L4(t)||Ur(t)===e1};Ke.isConcurrentMode=L4;Ke.isContextConsumer=function(t){return Ur(t)===_v};Ke.isContextProvider=function(t){return Ur(t)===gv};Ke.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===JC};Ke.isForwardRef=function(t){return Ur(t)===vv};Ke.isFragment=function(t){return Ur(t)===fv};Ke.isLazy=function(t){return Ur(t)===Iv};Ke.isMemo=function(t){return Ur(t)===Ev};Ke.isPortal=function(t){return Ur(t)===ZC};Ke.isProfiler=function(t){return Ur(t)===mv};Ke.isStrictMode=function(t){return Ur(t)===pv};Ke.isSuspense=function(t){return Ur(t)===wv};Ke.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===fv||t===yv||t===mv||t===pv||t===wv||t===die||typeof t=="object"&&t!==null&&(t.$$typeof===Iv||t.$$typeof===Ev||t.$$typeof===gv||t.$$typeof===_v||t.$$typeof===vv||t.$$typeof===fie||t.$$typeof===pie||t.$$typeof===mie||t.$$typeof===hie)};Ke.typeOf=Ur;M4.exports=Ke;var gie=M4.exports,$4=gie,_ie={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yie={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},F4={};F4[$4.ForwardRef]=_ie;F4[$4.Memo]=yie;var vie=!0;function wie(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var V4=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||vie===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},U4=function(e,n,r){V4(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Eie(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Iie={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tie=/[A-Z]|^ms/g,bie=/_EMO_([^_]+?)_([^]*?)_EMO_/g,j4=function(e){return e.charCodeAt(1)===45},Rk=function(e){return e!=null&&typeof e!="boolean"},ww=R4(function(t){return j4(t)?t:t.replace(Tie,"-$&").toLowerCase()}),xk=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(bie,function(r,i,s){return Oi={name:i,styles:s,next:Oi},i})}return Iie[e]!==1&&!j4(e)&&typeof n=="number"&&n!==0?n+"px":n};function bf(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Oi={name:n.name,styles:n.styles,next:Oi},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Oi={name:r.name,styles:r.styles,next:Oi},r=r.next;var i=n.styles+";";return i}return Sie(t,e,n)}case"function":{if(t!==void 0){var s=Oi,o=n(t);return Oi=s,bf(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function Sie(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=bf(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":Rk(o)&&(r+=ww(s)+":"+xk(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)Rk(o[a])&&(r+=ww(s)+":"+xk(s,o[a])+";");else{var l=bf(t,e,o);switch(s){case"animation":case"animationName":{r+=ww(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var Ak=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Oi,t1=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Oi=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=bf(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=bf(r,n,e[a]),i&&(s+=o[a]);Ak.lastIndex=0;for(var l="",u;(u=Ak.exec(s))!==null;)l+="-"+u[1];var c=Eie(s)+l;return{name:c,styles:s,next:Oi}},Cie=function(e){return e()},B4=Fu.useInsertionEffect?Fu.useInsertionEffect:!1,Rie=B4||Cie,Pk=B4||w.useLayoutEffect,z4=w.createContext(typeof HTMLElement<"u"?cie({key:"css"}):null);z4.Provider;var W4=function(e){return w.forwardRef(function(n,r){var i=w.useContext(z4);return e(n,i,r)})},n1=w.createContext({}),xie=W4(function(t,e){var n=t.styles,r=t1([n],void 0,w.useContext(n1)),i=w.useRef();return Pk(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),Pk(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&U4(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function r1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t1(e)}var yp=function(){var e=r1.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Aie=Mre,Pie=function(e){return e!=="theme"},kk=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Aie:Pie},Nk=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},kie=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return V4(n,r,i),Rie(function(){return U4(n,r,i)}),null},Nie=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=Nk(e,n,r),l=a||kk(i),u=!l("as");return function(){var c=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var h=c.length,f=1;f<h;f++)d.push(c[f],c[0][f])}var p=W4(function(g,v,m){var _=u&&g.as||i,y="",E=[],b=g;if(g.theme==null){b={};for(var C in g)b[C]=g[C];b.theme=w.useContext(n1)}typeof g.className=="string"?y=wie(v.registered,E,g.className):g.className!=null&&(y=g.className+" ");var T=t1(d.concat(E),v.registered,b);y+=v.key+"-"+T.name,o!==void 0&&(y+=" "+o);var A=u&&a===void 0?kk(_):l,M={};for(var P in g)u&&P==="as"||A(P)&&(M[P]=g[P]);return M.className=y,M.ref=m,w.createElement(w.Fragment,null,w.createElement(kie,{cache:v,serialized:T,isStringTag:typeof _=="string"}),w.createElement(_,M))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=d,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(g,v){return t(g,S({},n,v,{shouldForwardProp:Nk(p,v,!0)})).apply(void 0,d)},p}},Oie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],GI=Nie.bind();Oie.forEach(function(t){GI[t]=GI(t)});function Die(t){return t==null||Object.keys(t).length===0}function Mie(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(Die(i)?n:i):e;return I.jsx(xie,{styles:r})}function q4(t,e){return GI(t,e)}const Lie=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function cs(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function H4(t){if(!cs(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=H4(t[n])}),e}function pr(t,e,n={clone:!0}){const r=n.clone?S({},t):t;return cs(t)&&cs(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(cs(e[i])&&i in t&&cs(t[i])?r[i]=pr(t[i],e[i],n):n.clone?r[i]=cs(e[i])?H4(e[i]):e[i]:r[i]=e[i])}),r}var Xe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1=Symbol.for("react.element"),s1=Symbol.for("react.portal"),Tv=Symbol.for("react.fragment"),bv=Symbol.for("react.strict_mode"),Sv=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),Rv=Symbol.for("react.context"),$ie=Symbol.for("react.server_context"),xv=Symbol.for("react.forward_ref"),Av=Symbol.for("react.suspense"),Pv=Symbol.for("react.suspense_list"),kv=Symbol.for("react.memo"),Nv=Symbol.for("react.lazy"),Fie=Symbol.for("react.offscreen"),G4;G4=Symbol.for("react.module.reference");function ri(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case i1:switch(t=t.type,t){case Tv:case Sv:case bv:case Av:case Pv:return t;default:switch(t=t&&t.$$typeof,t){case $ie:case Rv:case xv:case Nv:case kv:case Cv:return t;default:return e}}case s1:return e}}}Xe.ContextConsumer=Rv;Xe.ContextProvider=Cv;Xe.Element=i1;Xe.ForwardRef=xv;Xe.Fragment=Tv;Xe.Lazy=Nv;Xe.Memo=kv;Xe.Portal=s1;Xe.Profiler=Sv;Xe.StrictMode=bv;Xe.Suspense=Av;Xe.SuspenseList=Pv;Xe.isAsyncMode=function(){return!1};Xe.isConcurrentMode=function(){return!1};Xe.isContextConsumer=function(t){return ri(t)===Rv};Xe.isContextProvider=function(t){return ri(t)===Cv};Xe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===i1};Xe.isForwardRef=function(t){return ri(t)===xv};Xe.isFragment=function(t){return ri(t)===Tv};Xe.isLazy=function(t){return ri(t)===Nv};Xe.isMemo=function(t){return ri(t)===kv};Xe.isPortal=function(t){return ri(t)===s1};Xe.isProfiler=function(t){return ri(t)===Sv};Xe.isStrictMode=function(t){return ri(t)===bv};Xe.isSuspense=function(t){return ri(t)===Av};Xe.isSuspenseList=function(t){return ri(t)===Pv};Xe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Tv||t===Sv||t===bv||t===Av||t===Pv||t===Fie||typeof t=="object"&&t!==null&&(t.$$typeof===Nv||t.$$typeof===kv||t.$$typeof===Cv||t.$$typeof===Rv||t.$$typeof===xv||t.$$typeof===G4||t.getModuleId!==void 0)};Xe.typeOf=ri;function le(t){if(typeof t!="string")throw new Error(Bo(7));return t.charAt(0).toUpperCase()+t.slice(1)}function KI(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function o1(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function Vie(t,e){return()=>null}function qm(t,e){var n,r;return w.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function mr(t){return t&&t.ownerDocument||document}function zo(t){return mr(t).defaultView||window}function Uie(t,e){return()=>null}function p_(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const Ns=typeof window<"u"?w.useLayoutEffect:w.useEffect;let Ok=0;function jie(t){const[e,n]=w.useState(t),r=t||e;return w.useEffect(()=>{e==null&&(Ok+=1,n(`mui-${Ok}`))},[e]),r}const Dk=Fu.useId;function Ov(t){if(Dk!==void 0){const e=Dk();return t??e}return jie(t)}function Bie(t,e,n,r,i){return null}function QI({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=w.useRef(t!==void 0),[s,o]=w.useState(e),a=i?t:s,l=w.useCallback(u=>{i||o(u)},[]);return[a,l]}function Oa(t){const e=w.useRef(t);return Ns(()=>{e.current=t}),w.useRef((...n)=>(0,e.current)(...n)).current}function Mn(...t){return w.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{p_(n,e)})},t)}let Dv=!0,YI=!1,Mk;const zie={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Wie(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&zie[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function qie(t){t.metaKey||t.altKey||t.ctrlKey||(Dv=!0)}function Ew(){Dv=!1}function Hie(){this.visibilityState==="hidden"&&YI&&(Dv=!0)}function Gie(t){t.addEventListener("keydown",qie,!0),t.addEventListener("mousedown",Ew,!0),t.addEventListener("pointerdown",Ew,!0),t.addEventListener("touchstart",Ew,!0),t.addEventListener("visibilitychange",Hie,!0)}function Kie(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Dv||Wie(e)}function K4(){const t=w.useCallback(i=>{i!=null&&Gie(i.ownerDocument)},[]),e=w.useRef(!1);function n(){return e.current?(YI=!0,window.clearTimeout(Mk),Mk=window.setTimeout(()=>{YI=!1},100),e.current=!1,!0):!1}function r(i){return Kie(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function Q4(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function a1(t,e){const n=S({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=S({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=S({},s),Object.keys(i).forEach(o=>{n[r][o]=a1(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function Ne(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const Lk=t=>t,Qie=()=>{let t=Lk;return{configure(e){t=e},generate(e){return t(e)},reset(){t=Lk}}},Yie=Qie(),l1=Yie,Xie={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ae(t,e,n="Mui"){const r=Xie[e];return r?`${n}-${r}`:`${l1.generate(t)}-${e}`}function Ie(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Ae(t,i,n)}),r}const Jie=["values","unit","step"],Zie=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>S({},n,{[r.key]:r.val}),{})};function ese(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=se(t,Jie),s=Zie(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function u(h,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${n})`}function c(h){return o.indexOf(h)+1<o.length?u(h,o[o.indexOf(h)+1]):a(h)}function d(h){const f=o.indexOf(h);return f===0?a(o[1]):f===o.length-1?l(o[f]):u(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return S({keys:o,values:s,up:a,down:l,between:u,only:c,not:d,unit:n},i)}const tse={borderRadius:4},nse=tse;function oh(t,e){return e?pr(t,e,{clone:!1}):t}const u1={xs:0,sm:600,md:900,lg:1200,xl:1536},$k={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${u1[t]}px)`};function ni(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||$k;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||$k;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||u1).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function rse(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function ise(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function sse(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function Mv({values:t,breakpoints:e,base:n}){const r=n||sse(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,l)=>(Array.isArray(t)?(o[a]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function Lv(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function m_(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Lv(t,n)||r,e&&(i=e(i,r,t)),i}function Vt(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,u=Lv(l,r)||{};return ni(o,a,d=>{let h=m_(u,i,d);return d===h&&typeof d=="string"&&(h=m_(u,i,`${e}${d==="default"?"":le(d)}`,d)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function ose(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const ase={m:"margin",p:"padding"},lse={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Fk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},use=ose(t=>{if(t.length>2)if(Fk[t])t=Fk[t];else return[t];const[e,n]=t.split(""),r=ase[e],i=lse[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),c1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...c1,...d1];function vp(t,e,n,r){var i;const s=(i=Lv(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function Y4(t){return vp(t,"spacing",8)}function wp(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function cse(t,e){return n=>t.reduce((r,i)=>(r[i]=wp(e,n),r),{})}function dse(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=use(n),s=cse(i,r),o=t[n];return ni(t,o,s)}function X4(t,e){const n=Y4(t.theme);return Object.keys(t).map(r=>dse(t,e,r,n)).reduce(oh,{})}function bt(t){return X4(t,c1)}bt.propTypes={};bt.filterProps=c1;function St(t){return X4(t,d1)}St.propTypes={};St.filterProps=d1;function hse(t=8){if(t.mui)return t;const e=Y4({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function $v(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?oh(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function qr(t){return typeof t!="number"?t:`${t}px solid`}function ii(t,e){return Vt({prop:t,themeKey:"borders",transform:e})}const fse=ii("border",qr),pse=ii("borderTop",qr),mse=ii("borderRight",qr),gse=ii("borderBottom",qr),_se=ii("borderLeft",qr),yse=ii("borderColor"),vse=ii("borderTopColor"),wse=ii("borderRightColor"),Ese=ii("borderBottomColor"),Ise=ii("borderLeftColor"),Tse=ii("outline",qr),bse=ii("outlineColor"),Fv=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=vp(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:wp(e,r)});return ni(t,t.borderRadius,n)}return null};Fv.propTypes={};Fv.filterProps=["borderRadius"];$v(fse,pse,mse,gse,_se,yse,vse,wse,Ese,Ise,Fv,Tse,bse);const Vv=t=>{if(t.gap!==void 0&&t.gap!==null){const e=vp(t.theme,"spacing",8),n=r=>({gap:wp(e,r)});return ni(t,t.gap,n)}return null};Vv.propTypes={};Vv.filterProps=["gap"];const Uv=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=vp(t.theme,"spacing",8),n=r=>({columnGap:wp(e,r)});return ni(t,t.columnGap,n)}return null};Uv.propTypes={};Uv.filterProps=["columnGap"];const jv=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=vp(t.theme,"spacing",8),n=r=>({rowGap:wp(e,r)});return ni(t,t.rowGap,n)}return null};jv.propTypes={};jv.filterProps=["rowGap"];const Sse=Vt({prop:"gridColumn"}),Cse=Vt({prop:"gridRow"}),Rse=Vt({prop:"gridAutoFlow"}),xse=Vt({prop:"gridAutoColumns"}),Ase=Vt({prop:"gridAutoRows"}),Pse=Vt({prop:"gridTemplateColumns"}),kse=Vt({prop:"gridTemplateRows"}),Nse=Vt({prop:"gridTemplateAreas"}),Ose=Vt({prop:"gridArea"});$v(Vv,Uv,jv,Sse,Cse,Rse,xse,Ase,Pse,kse,Nse,Ose);function Lu(t,e){return e==="grey"?e:t}const Dse=Vt({prop:"color",themeKey:"palette",transform:Lu}),Mse=Vt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Lu}),Lse=Vt({prop:"backgroundColor",themeKey:"palette",transform:Lu});$v(Dse,Mse,Lse);function br(t){return t<=1&&t!==0?`${t*100}%`:t}const $se=Vt({prop:"width",transform:br}),h1=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||u1[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:br(n)}};return ni(t,t.maxWidth,e)}return null};h1.filterProps=["maxWidth"];const Fse=Vt({prop:"minWidth",transform:br}),Vse=Vt({prop:"height",transform:br}),Use=Vt({prop:"maxHeight",transform:br}),jse=Vt({prop:"minHeight",transform:br});Vt({prop:"size",cssProperty:"width",transform:br});Vt({prop:"size",cssProperty:"height",transform:br});const Bse=Vt({prop:"boxSizing"});$v($se,h1,Fse,Vse,Use,jse,Bse);const zse={border:{themeKey:"borders",transform:qr},borderTop:{themeKey:"borders",transform:qr},borderRight:{themeKey:"borders",transform:qr},borderBottom:{themeKey:"borders",transform:qr},borderLeft:{themeKey:"borders",transform:qr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:qr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Fv},color:{themeKey:"palette",transform:Lu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Lu},backgroundColor:{themeKey:"palette",transform:Lu},p:{style:St},pt:{style:St},pr:{style:St},pb:{style:St},pl:{style:St},px:{style:St},py:{style:St},padding:{style:St},paddingTop:{style:St},paddingRight:{style:St},paddingBottom:{style:St},paddingLeft:{style:St},paddingX:{style:St},paddingY:{style:St},paddingInline:{style:St},paddingInlineStart:{style:St},paddingInlineEnd:{style:St},paddingBlock:{style:St},paddingBlockStart:{style:St},paddingBlockEnd:{style:St},m:{style:bt},mt:{style:bt},mr:{style:bt},mb:{style:bt},ml:{style:bt},mx:{style:bt},my:{style:bt},margin:{style:bt},marginTop:{style:bt},marginRight:{style:bt},marginBottom:{style:bt},marginLeft:{style:bt},marginX:{style:bt},marginY:{style:bt},marginInline:{style:bt},marginInlineStart:{style:bt},marginInlineEnd:{style:bt},marginBlock:{style:bt},marginBlockStart:{style:bt},marginBlockEnd:{style:bt},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Vv},rowGap:{style:jv},columnGap:{style:Uv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:br},maxWidth:{style:h1},minWidth:{transform:br},height:{transform:br},maxHeight:{transform:br},minHeight:{transform:br},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Bv=zse;function Wse(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function qse(t,e){return typeof t=="function"?t(e):t}function Hse(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:u,transform:c,style:d}=a;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[n]:r};const h=Lv(i,u)||{};return d?d(o):ni(o,r,p=>{let g=m_(h,c,p);return p===g&&typeof p=="string"&&(g=m_(h,c,`${n}${p==="default"?"":le(p)}`,p)),l===!1?g:{[l]:g}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:Bv;function a(l){let u=l;if(typeof l=="function")u=l(s);else if(typeof l!="object")return l;if(!u)return null;const c=rse(s.breakpoints),d=Object.keys(c);let h=c;return Object.keys(u).forEach(f=>{const p=qse(u[f],s);if(p!=null)if(typeof p=="object")if(o[f])h=oh(h,t(f,p,s,o));else{const g=ni({theme:s},p,v=>({[f]:v}));Wse(g,p)?h[f]=e({sx:p,theme:s}):h=oh(h,g)}else h=oh(h,t(f,p,s,o))}),ise(d,h)}return Array.isArray(i)?i.map(a):a(i)}return e}const J4=Hse();J4.filterProps=["sx"];const zv=J4,Gse=["breakpoints","palette","spacing","shape"];function Wv(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=se(t,Gse),a=ese(n),l=hse(i);let u=pr({breakpoints:a,direction:"ltr",components:{},palette:S({mode:"light"},r),spacing:l,shape:S({},nse,s)},o);return u=e.reduce((c,d)=>pr(c,d),u),u.unstable_sxConfig=S({},Bv,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(d){return zv({sx:d,theme:this})},u}function Kse(t){return Object.keys(t).length===0}function Qse(t=null){const e=w.useContext(n1);return!e||Kse(e)?t:e}const Yse=Wv();function qv(t=Yse){return Qse(t)}function Xse({styles:t,themeId:e,defaultTheme:n={}}){const r=qv(n),i=typeof t=="function"?t(e&&r[e]||r):t;return I.jsx(Mie,{styles:i})}const Jse=["sx"],Zse=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:Bv;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function f1(t){const{sx:e}=t,n=se(t,Jse),{systemProps:r,otherProps:i}=Zse(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return cs(a)?S({},r,a):r}:s=S({},r,e),S({},i,{sx:s})}function Z4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Z4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ue(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Z4(t))&&(r&&(r+=" "),r+=e);return r}const eoe=["className","component"];function toe(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=q4("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(zv);return w.forwardRef(function(l,u){const c=qv(n),d=f1(l),{className:h,component:f="div"}=d,p=se(d,eoe);return I.jsx(s,S({as:f,ref:u,className:ue(h,i?i(r):r),theme:e&&c[e]||c},p))})}const noe=["variant"];function Vk(t){return t.length===0}function ej(t){const{variant:e}=t,n=se(t,noe);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=Vk(r)?t[i]:le(t[i]):r+=`${Vk(r)?i:le(i)}${le(t[i].toString())}`}),r}const roe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function ioe(t){return Object.keys(t).length===0}function soe(t){return typeof t=="string"&&t.charCodeAt(0)>96}const ooe=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,g_=t=>{let e=0;const n={};return t&&t.forEach(r=>{let i="";typeof r.props=="function"?(i=`callback${e}`,e+=1):i=ej(r.props),n[i]=r.style}),n},aoe=(t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),g_(n)},__=(t,e,n)=>{const{ownerState:r={}}=t,i=[];let s=0;return n&&n.forEach(o=>{let a=!0;if(typeof o.props=="function"){const l=S({},t,r);a=o.props(l)}else Object.keys(o.props).forEach(l=>{r[l]!==o.props[l]&&t[l]!==o.props[l]&&(a=!1)});a&&(typeof o.props=="function"?i.push(e[`callback${s}`]):i.push(e[ej(o.props)])),typeof o.props=="function"&&(s+=1)}),i},loe=(t,e,n,r)=>{var i;const s=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return __(t,e,s)};function ah(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const uoe=Wv(),coe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Hm({defaultTheme:t,theme:e,themeId:n}){return ioe(e)?t:e[n]||e}function doe(t){return t?(e,n)=>n[t]:null}const Uk=({styledArg:t,props:e,defaultTheme:n,themeId:r})=>{const i=t(S({},e,{theme:Hm(S({},e,{defaultTheme:n,themeId:r}))}));let s;if(i&&i.variants&&(s=i.variants,delete i.variants),s){const o=__(e,g_(s),s);return[i,...o]}return i};function tj(t={}){const{themeId:e,defaultTheme:n=uoe,rootShouldForwardProp:r=ah,slotShouldForwardProp:i=ah}=t,s=o=>zv(S({},o,{theme:Hm(S({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{Lie(o,E=>E.filter(b=>!(b!=null&&b.__mui_systemSx)));const{name:l,slot:u,skipVariantsResolver:c,skipSx:d,overridesResolver:h=doe(coe(u))}=a,f=se(a,roe),p=c!==void 0?c:u&&u!=="Root"&&u!=="root"||!1,g=d||!1;let v,m=ah;u==="Root"||u==="root"?m=r:u?m=i:soe(o)&&(m=void 0);const _=q4(o,S({shouldForwardProp:m,label:v},f)),y=(E,...b)=>{const C=b?b.map(P=>{if(typeof P=="function"&&P.__emotion_real!==P)return L=>Uk({styledArg:P,props:L,defaultTheme:n,themeId:e});if(cs(P)){let L=P,G;return P&&P.variants&&(G=P.variants,delete L.variants,L=F=>{let U=P;return __(F,g_(G),G).forEach(Y=>{U=pr(U,Y)}),U}),L}return P}):[];let T=E;if(cs(E)){let P;E&&E.variants&&(P=E.variants,delete T.variants,T=L=>{let G=E;return __(L,g_(P),P).forEach(U=>{G=pr(G,U)}),G})}else typeof E=="function"&&E.__emotion_real!==E&&(T=P=>Uk({styledArg:E,props:P,defaultTheme:n,themeId:e}));l&&h&&C.push(P=>{const L=Hm(S({},P,{defaultTheme:n,themeId:e})),G=ooe(l,L);if(G){const F={};return Object.entries(G).forEach(([U,B])=>{F[U]=typeof B=="function"?B(S({},P,{theme:L})):B}),h(P,F)}return null}),l&&!p&&C.push(P=>{const L=Hm(S({},P,{defaultTheme:n,themeId:e}));return loe(P,aoe(l,L),L,l)}),g||C.push(s);const A=C.length-b.length;if(Array.isArray(E)&&A>0){const P=new Array(A).fill("");T=[...E,...P],T.raw=[...E.raw,...P]}const M=_(T,...C);return o.muiName&&(M.muiName=o.muiName),M};return _.withConfig&&(y.withConfig=_.withConfig),y}}const hoe=tj();function foe(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:a1(e.components[n].defaultProps,r)}function nj({props:t,name:e,defaultTheme:n,themeId:r}){let i=qv(n);return r&&(i=i[r]||i),foe({theme:i,name:e,props:t})}function p1(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function poe(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function pl(t){if(t.type)return t;if(t.charAt(0)==="#")return pl(poe(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Bo(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Bo(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function Hv(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function moe(t){t=pl(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(u,c=(u+n/30)%12)=>i-s*Math.max(Math.min(c-3,9-c,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Hv({type:a,values:l})}function jk(t){t=pl(t);let e=t.type==="hsl"||t.type==="hsla"?pl(moe(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function goe(t,e){const n=jk(t),r=jk(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Qr(t,e){return t=pl(t),e=p1(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Hv(t)}function _oe(t,e){if(t=pl(t),e=p1(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Hv(t)}function yoe(t,e){if(t=pl(t),e=p1(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Hv(t)}const voe=["className","component","disableGutters","fixed","maxWidth","classes"],woe=Wv(),Eoe=hoe("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${le(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),Ioe=t=>nj({props:t,name:"MuiContainer",defaultTheme:woe}),Toe=(t,e)=>{const n=l=>Ae(e,l),{classes:r,fixed:i,disableGutters:s,maxWidth:o}=t,a={root:["root",o&&`maxWidth${le(String(o))}`,i&&"fixed",s&&"disableGutters"]};return Ne(a,n,r)};function boe(t={}){const{createStyledComponent:e=Eoe,useThemeProps:n=Ioe,componentName:r="MuiContainer"}=t,i=e(({theme:o,ownerState:a})=>S({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:o.spacing(2),paddingRight:o.spacing(2),[o.breakpoints.up("sm")]:{paddingLeft:o.spacing(3),paddingRight:o.spacing(3)}}),({theme:o,ownerState:a})=>a.fixed&&Object.keys(o.breakpoints.values).reduce((l,u)=>{const c=u,d=o.breakpoints.values[c];return d!==0&&(l[o.breakpoints.up(c)]={maxWidth:`${d}${o.breakpoints.unit}`}),l},{}),({theme:o,ownerState:a})=>S({},a.maxWidth==="xs"&&{[o.breakpoints.up("xs")]:{maxWidth:Math.max(o.breakpoints.values.xs,444)}},a.maxWidth&&a.maxWidth!=="xs"&&{[o.breakpoints.up(a.maxWidth)]:{maxWidth:`${o.breakpoints.values[a.maxWidth]}${o.breakpoints.unit}`}}));return w.forwardRef(function(a,l){const u=n(a),{className:c,component:d="div",disableGutters:h=!1,fixed:f=!1,maxWidth:p="lg"}=u,g=se(u,voe),v=S({},u,{component:d,disableGutters:h,fixed:f,maxWidth:p}),m=Toe(v,r);return I.jsx(i,S({as:d,ownerState:v,className:ue(m.root,c),ref:l},g))})}function Soe(t,e){return S({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const Coe=["mode","contrastThreshold","tonalOffset"],Bk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ef.white,default:Ef.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Iw={text:{primary:Ef.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ef.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function zk(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=yoe(t.main,i):e==="dark"&&(t.dark=_oe(t.main,s)))}function Roe(t="light"){return t==="dark"?{main:Hl[200],light:Hl[50],dark:Hl[400]}:{main:Hl[700],light:Hl[400],dark:Hl[800]}}function xoe(t="light"){return t==="dark"?{main:ql[200],light:ql[50],dark:ql[400]}:{main:ql[500],light:ql[300],dark:ql[700]}}function Aoe(t="light"){return t==="dark"?{main:Wl[500],light:Wl[300],dark:Wl[700]}:{main:Wl[700],light:Wl[400],dark:Wl[800]}}function Poe(t="light"){return t==="dark"?{main:Gl[400],light:Gl[300],dark:Gl[700]}:{main:Gl[700],light:Gl[500],dark:Gl[900]}}function koe(t="light"){return t==="dark"?{main:Kl[400],light:Kl[300],dark:Kl[700]}:{main:Kl[800],light:Kl[500],dark:Kl[900]}}function Noe(t="light"){return t==="dark"?{main:fd[400],light:fd[300],dark:fd[700]}:{main:"#ed6c02",light:fd[500],dark:fd[900]}}function Ooe(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=se(t,Coe),s=t.primary||Roe(e),o=t.secondary||xoe(e),a=t.error||Aoe(e),l=t.info||Poe(e),u=t.success||koe(e),c=t.warning||Noe(e);function d(g){return goe(g,Iw.text.primary)>=n?Iw.text.primary:Bk.text.primary}const h=({color:g,name:v,mainShade:m=500,lightShade:_=300,darkShade:y=700})=>{if(g=S({},g),!g.main&&g[m]&&(g.main=g[m]),!g.hasOwnProperty("main"))throw new Error(Bo(11,v?` (${v})`:"",m));if(typeof g.main!="string")throw new Error(Bo(12,v?` (${v})`:"",JSON.stringify(g.main)));return zk(g,"light",_,r),zk(g,"dark",y,r),g.contrastText||(g.contrastText=d(g.main)),g},f={dark:Iw,light:Bk};return pr(S({common:S({},Ef),mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:u,name:"success"}),grey:Ore,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},f[e]),i)}const Doe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Moe(t){return Math.round(t*1e5)/1e5}const Wk={textTransform:"uppercase"},qk='"Roboto", "Helvetica", "Arial", sans-serif';function Loe(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=qk,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:c,pxToRem:d}=n,h=se(n,Doe),f=i/14,p=d||(m=>`${m/u*f}rem`),g=(m,_,y,E,b)=>S({fontFamily:r,fontWeight:m,fontSize:p(_),lineHeight:y},r===qk?{letterSpacing:`${Moe(E/_)}em`}:{},b,c),v={h1:g(s,96,1.167,-1.5),h2:g(s,60,1.2,-.5),h3:g(o,48,1.167,0),h4:g(o,34,1.235,.25),h5:g(o,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(o,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(o,16,1.5,.15),body2:g(o,14,1.43,.15),button:g(a,14,1.75,.4,Wk),caption:g(o,12,1.66,.4),overline:g(o,12,2.66,1,Wk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return pr(S({htmlFontSize:u,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},v),h,{clone:!1})}const $oe=.2,Foe=.14,Voe=.12;function ft(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${$oe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Foe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Voe})`].join(",")}const Uoe=["none",ft(0,2,1,-1,0,1,1,0,0,1,3,0),ft(0,3,1,-2,0,2,2,0,0,1,5,0),ft(0,3,3,-2,0,3,4,0,0,1,8,0),ft(0,2,4,-1,0,4,5,0,0,1,10,0),ft(0,3,5,-1,0,5,8,0,0,1,14,0),ft(0,3,5,-1,0,6,10,0,0,1,18,0),ft(0,4,5,-2,0,7,10,1,0,2,16,1),ft(0,5,5,-3,0,8,10,1,0,3,14,2),ft(0,5,6,-3,0,9,12,1,0,3,16,2),ft(0,6,6,-3,0,10,14,1,0,4,18,3),ft(0,6,7,-4,0,11,15,1,0,4,20,3),ft(0,7,8,-4,0,12,17,2,0,5,22,4),ft(0,7,8,-4,0,13,19,2,0,5,24,4),ft(0,7,9,-4,0,14,21,2,0,5,26,4),ft(0,8,9,-5,0,15,22,2,0,6,28,5),ft(0,8,10,-5,0,16,24,2,0,6,30,5),ft(0,8,11,-5,0,17,26,2,0,6,32,5),ft(0,9,11,-5,0,18,28,2,0,7,34,6),ft(0,9,12,-6,0,19,29,2,0,7,36,6),ft(0,10,13,-6,0,20,31,3,0,8,38,7),ft(0,10,13,-6,0,21,33,3,0,8,40,7),ft(0,10,14,-6,0,22,35,3,0,8,42,7),ft(0,11,14,-7,0,23,36,3,0,9,44,8),ft(0,11,15,-7,0,24,38,3,0,9,46,8)],joe=["duration","easing","delay"],Boe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},zoe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Hk(t){return`${Math.round(t)}ms`}function Woe(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function qoe(t){const e=S({},Boe,t.easing),n=S({},zoe,t.duration);return S({getAutoHeightDuration:Woe,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return se(s,joe),(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:Hk(o)} ${a} ${typeof l=="string"?l:Hk(l)}`).join(",")}},t,{easing:e,duration:n})}const Hoe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Goe=Hoe,Koe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function rj(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=se(t,Koe);if(t.vars)throw new Error(Bo(18));const a=Ooe(r),l=Wv(t);let u=pr(l,{mixins:Soe(l.breakpoints,n),palette:a,shadows:Uoe.slice(),typography:Loe(a,s),transitions:qoe(i),zIndex:S({},Goe)});return u=pr(u,o),u=e.reduce((c,d)=>pr(c,d),u),u.unstable_sxConfig=S({},Bv,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(d){return zv({sx:d,theme:this})},u}const Qoe=rj(),Gv=Qoe;function Ep(){const t=qv(Gv);return t[gp]||t}function Oe({props:t,name:e}){return nj({props:t,name:e,defaultTheme:Gv,themeId:gp})}const si=t=>ah(t)&&t!=="classes",Yoe=ah,re=tj({themeId:gp,defaultTheme:Gv,rootShouldForwardProp:si}),Gk=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function Xoe(t){return Ae("MuiSvgIcon",t)}Ie("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Joe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Zoe=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${le(e)}`,`fontSize${le(n)}`]};return Ne(i,Xoe,r)},eae=re("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${le(n.color)}`],e[`fontSize${le(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,u,c,d,h,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((u=t.typography)==null||(c=u.pxToRem)==null?void 0:c.call(u,35))||"2.1875rem"}[e.fontSize],color:(d=(h=(t.vars||t).palette)==null||(h=h[e.color])==null?void 0:h.main)!=null?d:{action:(f=(t.vars||t).palette)==null||(f=f.action)==null?void 0:f.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),XI=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,f=se(r,Joe),p=w.isValidElement(i)&&i.type==="svg",g=S({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:h,hasSvgAsChild:p}),v={};c||(v.viewBox=h);const m=Zoe(g);return I.jsxs(eae,S({as:a,className:ue(m.root,s),focusable:"false",color:u,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},v,f,p&&i.props,{ownerState:g,children:[p?i.props.children:i,d?I.jsx("title",{children:d}):null]}))});XI.muiName="SvgIcon";function m1(t,e){function n(r,i){return I.jsx(XI,S({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=XI.muiName,w.memo(w.forwardRef(n))}const tae={configure:t=>{l1.configure(t)}},nae=Object.freeze(Object.defineProperty({__proto__:null,capitalize:le,createChainedFunction:KI,createSvgIcon:m1,debounce:o1,deprecatedPropType:Vie,isMuiElement:qm,ownerDocument:mr,ownerWindow:zo,requirePropFactory:Uie,setRef:p_,unstable_ClassNameGenerator:tae,unstable_useEnhancedEffect:Ns,unstable_useId:Ov,unsupportedProp:Bie,useControlled:QI,useEventCallback:Oa,useForkRef:Mn,useIsFocusVisible:K4},Symbol.toStringTag,{value:"Module"}));function JI(t,e){return JI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JI(t,e)}function ij(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,JI(t,e)}const Kk={disabled:!1},y_=sr.createContext(null);var rae=function(e){return e.scrollTop},Md="unmounted",pa="exited",ma="entering",nu="entered",ZI="exiting",Us=function(t){ij(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=pa,s.appearStatus=ma):l=nu:r.unmountOnExit||r.mountOnEnter?l=Md:l=pa,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Md?{status:pa}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==ma&&o!==nu&&(s=ma):(o===ma||o===nu)&&(s=ZI)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===ma){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Wp.findDOMNode(this);o&&rae(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===pa&&this.setState({status:Md})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Wp.findDOMNode(this),a],u=l[0],c=l[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!i&&!o||Kk.disabled){this.safeSetState({status:nu},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:ma},function(){s.props.onEntering(u,c),s.onTransitionEnd(h,function(){s.safeSetState({status:nu},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Wp.findDOMNode(this);if(!s||Kk.disabled){this.safeSetState({status:pa},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:ZI},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:pa},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Wp.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Md)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=se(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return sr.createElement(y_.Provider,{value:null},typeof o=="function"?o(i,a):sr.cloneElement(sr.Children.only(o),a))},e}(sr.Component);Us.contextType=y_;Us.propTypes={};function Ql(){}Us.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ql,onEntering:Ql,onEntered:Ql,onExit:Ql,onExiting:Ql,onExited:Ql};Us.UNMOUNTED=Md;Us.EXITED=pa;Us.ENTERING=ma;Us.ENTERED=nu;Us.EXITING=ZI;const sj=Us;function iae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g1(t,e){var n=function(s){return e&&w.isValidElement(s)?e(s):s},r=Object.create(null);return t&&w.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function sae(t,e){t=t||{},e=e||{};function n(c){return c in e?e[c]:t[c]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var u=r[l][o];a[r[l][o]]=n(u)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Da(t,e,n){return n[e]!=null?n[e]:t.props[e]}function oae(t,e){return g1(t.children,function(n){return w.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Da(n,"appear",t),enter:Da(n,"enter",t),exit:Da(n,"exit",t)})})}function aae(t,e,n){var r=g1(t.children),i=sae(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(w.isValidElement(o)){var a=s in e,l=s in r,u=e[s],c=w.isValidElement(u)&&!u.props.in;l&&(!a||c)?i[s]=w.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Da(o,"exit",t),enter:Da(o,"enter",t)}):!l&&a&&!c?i[s]=w.cloneElement(o,{in:!1}):l&&a&&w.isValidElement(u)&&(i[s]=w.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:Da(o,"exit",t),enter:Da(o,"enter",t)}))}}),i}var lae=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},uae={component:"div",childFactory:function(e){return e}},_1=function(t){ij(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(iae(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?oae(i,a):aae(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=g1(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=S({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=se(i,["component","childFactory"]),l=this.state.contextValue,u=lae(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?sr.createElement(y_.Provider,{value:l},u):sr.createElement(y_.Provider,{value:l},sr.createElement(s,a,u))},e}(sr.Component);_1.propTypes={};_1.defaultProps=uae;const cae=_1,oj=t=>t.scrollTop;function v_(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function dae(t){return Ae("MuiPaper",t)}Ie("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const hae=["className","component","elevation","square","variant"],fae=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Ne(s,dae,i)},pae=re("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return S({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&S({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Qr("#fff",Gk(e.elevation))}, ${Qr("#fff",Gk(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),mae=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,u=se(r,hae),c=S({},r,{component:s,elevation:o,square:a,variant:l}),d=fae(c);return I.jsx(pae,S({as:s,ownerState:c,className:ue(d.root,i),ref:n},u))}),Ip=mae;function gae(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:u}=t,[c,d]=w.useState(!1),h=ue(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=ue(n.child,c&&n.childLeaving,r&&n.childPulsate);return!a&&!c&&d(!0),w.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,u);return()=>{clearTimeout(g)}}},[l,a,u]),I.jsx("span",{className:h,style:f,children:I.jsx("span",{className:p})})}const Br=Ie("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),_ae=["center","classes","className"];let Kv=t=>t,Qk,Yk,Xk,Jk;const eT=550,yae=80,vae=yp(Qk||(Qk=Kv`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),wae=yp(Yk||(Yk=Kv`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Eae=yp(Xk||(Xk=Kv`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Iae=re("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Tae=re(gae,{name:"MuiTouchRipple",slot:"Ripple"})(Jk||(Jk=Kv`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Br.rippleVisible,vae,eT,({theme:t})=>t.transitions.easing.easeInOut,Br.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Br.child,Br.childLeaving,wae,eT,({theme:t})=>t.transitions.easing.easeInOut,Br.childPulsate,Eae,({theme:t})=>t.transitions.easing.easeInOut),bae=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=se(r,_ae),[l,u]=w.useState([]),c=w.useRef(0),d=w.useRef(null);w.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const h=w.useRef(!1),f=w.useRef(0),p=w.useRef(null),g=w.useRef(null);w.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const v=w.useCallback(E=>{const{pulsate:b,rippleX:C,rippleY:T,rippleSize:A,cb:M}=E;u(P=>[...P,I.jsx(Tae,{classes:{ripple:ue(s.ripple,Br.ripple),rippleVisible:ue(s.rippleVisible,Br.rippleVisible),ripplePulsate:ue(s.ripplePulsate,Br.ripplePulsate),child:ue(s.child,Br.child),childLeaving:ue(s.childLeaving,Br.childLeaving),childPulsate:ue(s.childPulsate,Br.childPulsate)},timeout:eT,pulsate:b,rippleX:C,rippleY:T,rippleSize:A},c.current)]),c.current+=1,d.current=M},[s]),m=w.useCallback((E={},b={},C=()=>{})=>{const{pulsate:T=!1,center:A=i||b.pulsate,fakeElement:M=!1}=b;if((E==null?void 0:E.type)==="mousedown"&&h.current){h.current=!1;return}(E==null?void 0:E.type)==="touchstart"&&(h.current=!0);const P=M?null:g.current,L=P?P.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,F,U;if(A||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)G=Math.round(L.width/2),F=Math.round(L.height/2);else{const{clientX:B,clientY:Y}=E.touches&&E.touches.length>0?E.touches[0]:E;G=Math.round(B-L.left),F=Math.round(Y-L.top)}if(A)U=Math.sqrt((2*L.width**2+L.height**2)/3),U%2===0&&(U+=1);else{const B=Math.max(Math.abs((P?P.clientWidth:0)-G),G)*2+2,Y=Math.max(Math.abs((P?P.clientHeight:0)-F),F)*2+2;U=Math.sqrt(B**2+Y**2)}E!=null&&E.touches?p.current===null&&(p.current=()=>{v({pulsate:T,rippleX:G,rippleY:F,rippleSize:U,cb:C})},f.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},yae)):v({pulsate:T,rippleX:G,rippleY:F,rippleSize:U,cb:C})},[i,v]),_=w.useCallback(()=>{m({},{pulsate:!0})},[m]),y=w.useCallback((E,b)=>{if(clearTimeout(f.current),(E==null?void 0:E.type)==="touchend"&&p.current){p.current(),p.current=null,f.current=setTimeout(()=>{y(E,b)});return}p.current=null,u(C=>C.length>0?C.slice(1):C),d.current=b},[]);return w.useImperativeHandle(n,()=>({pulsate:_,start:m,stop:y}),[_,m,y]),I.jsx(Iae,S({className:ue(Br.root,s.root,o),ref:g},a,{children:I.jsx(cae,{component:null,exit:!0,children:l})}))}),Sae=bae;function Cae(t){return Ae("MuiButtonBase",t)}const Rae=Ie("MuiButtonBase",["root","disabled","focusVisible"]),xae=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Aae=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=Ne({root:["root",e&&"disabled",n&&"focusVisible"]},Cae,i);return n&&r&&(o.root+=` ${r}`),o},Pae=re("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Rae.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),kae=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:g,onContextMenu:v,onDragLeave:m,onFocus:_,onFocusVisible:y,onKeyDown:E,onKeyUp:b,onMouseDown:C,onMouseLeave:T,onMouseUp:A,onTouchEnd:M,onTouchMove:P,onTouchStart:L,tabIndex:G=0,TouchRippleProps:F,touchRippleRef:U,type:B}=r,Y=se(r,xae),Z=w.useRef(null),N=w.useRef(null),z=Mn(N,U),{isFocusVisibleRef:X,onFocus:ve,onBlur:he,ref:Be}=K4(),[fe,Pe]=w.useState(!1);u&&fe&&Pe(!1),w.useImperativeHandle(i,()=>({focusVisible:()=>{Pe(!0),Z.current.focus()}}),[]);const[ke,yt]=w.useState(!1);w.useEffect(()=>{yt(!0)},[]);const Xt=ke&&!c&&!u;w.useEffect(()=>{fe&&h&&!c&&ke&&N.current.pulsate()},[c,h,fe,ke]);function ht(oe,vr,ss=d){return Oa(ia=>(vr&&vr(ia),!ss&&N.current&&N.current[oe](ia),!0))}const fn=ht("start",C),De=ht("stop",v),it=ht("stop",m),we=ht("stop",A),ze=ht("stop",oe=>{fe&&oe.preventDefault(),T&&T(oe)}),Ze=ht("start",L),xi=ht("stop",M),Jn=ht("stop",P),Zn=ht("stop",oe=>{he(oe),X.current===!1&&Pe(!1),p&&p(oe)},!1),Ln=Oa(oe=>{Z.current||(Z.current=oe.currentTarget),ve(oe),X.current===!0&&(Pe(!0),y&&y(oe)),_&&_(oe)}),er=()=>{const oe=Z.current;return l&&l!=="button"&&!(oe.tagName==="A"&&oe.href)},st=w.useRef(!1),x=Oa(oe=>{h&&!st.current&&fe&&N.current&&oe.key===" "&&(st.current=!0,N.current.stop(oe,()=>{N.current.start(oe)})),oe.target===oe.currentTarget&&er()&&oe.key===" "&&oe.preventDefault(),E&&E(oe),oe.target===oe.currentTarget&&er()&&oe.key==="Enter"&&!u&&(oe.preventDefault(),g&&g(oe))}),q=Oa(oe=>{h&&oe.key===" "&&N.current&&fe&&!oe.defaultPrevented&&(st.current=!1,N.current.stop(oe,()=>{N.current.pulsate(oe)})),b&&b(oe),g&&oe.target===oe.currentTarget&&er()&&oe.key===" "&&!oe.defaultPrevented&&g(oe)});let W=l;W==="button"&&(Y.href||Y.to)&&(W=f);const ne={};W==="button"?(ne.type=B===void 0?"button":B,ne.disabled=u):(!Y.href&&!Y.to&&(ne.role="button"),u&&(ne["aria-disabled"]=u));const pe=Mn(n,Be,Z),Ee=S({},r,{centerRipple:s,component:l,disabled:u,disableRipple:c,disableTouchRipple:d,focusRipple:h,tabIndex:G,focusVisible:fe}),me=Aae(Ee);return I.jsxs(Pae,S({as:W,className:ue(me.root,a),ownerState:Ee,onBlur:Zn,onClick:g,onContextMenu:De,onFocus:Ln,onKeyDown:x,onKeyUp:q,onMouseDown:fn,onMouseLeave:ze,onMouseUp:we,onDragLeave:it,onTouchEnd:xi,onTouchMove:Jn,onTouchStart:Ze,ref:pe,tabIndex:u?-1:G,type:B},ne,Y,{children:[o,Xt?I.jsx(Sae,S({ref:z,center:s},F)):null]}))}),y1=kae;function Nae(t){return Ae("MuiIconButton",t)}const Oae=Ie("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Dae=["edge","children","className","color","disabled","disableFocusRipple","size"],Mae=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${le(r)}`,i&&`edge${le(i)}`,`size${le(s)}`]};return Ne(o,Nae,e)},Lae=re(y1,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${le(n.color)}`],n.edge&&e[`edge${le(n.edge)}`],e[`size${le(n.size)}`]]}})(({theme:t,ownerState:e})=>S({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Qr(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return S({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&S({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":S({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Qr(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${Oae.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),$ae=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:u=!1,size:c="medium"}=r,d=se(r,Dae),h=S({},r,{edge:i,color:a,disabled:l,disableFocusRipple:u,size:c}),f=Mae(h);return I.jsx(Lae,S({className:ue(f.root,o),centerRipple:!0,focusRipple:!u,disabled:l,ref:n,ownerState:h},d,{children:s}))}),Tw=$ae;function Fae(t){return Ae("MuiTypography",t)}Ie("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Vae=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Uae=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${le(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Ne(a,Fae,o)},jae=re("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${le(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>S({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),Zk={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Bae={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},zae=t=>Bae[t]||t,Wae=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiTypography"}),i=zae(r.color),s=f1(S({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:u=!1,noWrap:c=!1,paragraph:d=!1,variant:h="body1",variantMapping:f=Zk}=s,p=se(s,Vae),g=S({},s,{align:o,color:i,className:a,component:l,gutterBottom:u,noWrap:c,paragraph:d,variant:h,variantMapping:f}),v=l||(d?"p":f[h]||Zk[h])||"span",m=Uae(g);return I.jsx(jae,S({as:v,ref:n,ownerState:g,className:ue(m.root,a)},p))}),We=Wae;function qae(t){return Ae("MuiAppBar",t)}Ie("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Hae=["className","color","enableColorOnDark","position"],Gae=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${le(e)}`,`position${le(n)}`]};return Ne(i,qae,r)},cm=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,Kae=re(Ip,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${le(n.position)}`],e[`color${le(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return S({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&S({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&S({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&S({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:cm(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:cm(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:cm(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:cm(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),Qae=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:o=!1,position:a="fixed"}=r,l=se(r,Hae),u=S({},r,{color:s,position:a,enableColorOnDark:o}),c=Gae(u);return I.jsx(Kae,S({square:!0,component:"header",ownerState:u,elevation:4,className:ue(c.root,i,a==="fixed"&&"mui-fixed"),ref:n},l))}),Yae=Qae;function w_(t){return typeof t=="string"}function Xae(t,e,n){return t===void 0||w_(t)?e:S({},e,{ownerState:S({},e.ownerState,n)})}function aj(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function Jae(t,e,n){return typeof t=="function"?t(e,n):t}function eN(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function Zae(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const f=ue(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p=S({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=S({},n,i,r);return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=aj(S({},i,r)),a=eN(r),l=eN(i),u=e(o),c=ue(u==null?void 0:u.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=S({},u==null?void 0:u.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),h=S({},u,n,l,a);return c.length>0&&(h.className=c),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:u.ref}}const ele=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function pc(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=se(t,ele),a=s?{}:Jae(r,i),{props:l,internalRef:u}=Zae(S({},o,{externalSlotProps:a})),c=Mn(u,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return Xae(n,S({},l,{ref:c}),i)}const tle=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function nle(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function rle(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function ile(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||rle(t))}function sle(t){const e=[],n=[];return Array.from(t.querySelectorAll(tle)).forEach((r,i)=>{const s=nle(r);s===-1||!ile(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function ole(){return!0}function ale(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=sle,isEnabled:o=ole,open:a}=t,l=w.useRef(!1),u=w.useRef(null),c=w.useRef(null),d=w.useRef(null),h=w.useRef(null),f=w.useRef(!1),p=w.useRef(null),g=Mn(e.ref,p),v=w.useRef(null);w.useEffect(()=>{!a||!p.current||(f.current=!n)},[n,a]),w.useEffect(()=>{if(!a||!p.current)return;const y=mr(p.current);return p.current.contains(y.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),w.useEffect(()=>{if(!a||!p.current)return;const y=mr(p.current),E=T=>{v.current=T,!(r||!o()||T.key!=="Tab")&&y.activeElement===p.current&&T.shiftKey&&(l.current=!0,c.current&&c.current.focus())},b=()=>{const T=p.current;if(T===null)return;if(!y.hasFocus()||!o()||l.current){l.current=!1;return}if(T.contains(y.activeElement)||r&&y.activeElement!==u.current&&y.activeElement!==c.current)return;if(y.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let A=[];if((y.activeElement===u.current||y.activeElement===c.current)&&(A=s(p.current)),A.length>0){var M,P;const L=!!((M=v.current)!=null&&M.shiftKey&&((P=v.current)==null?void 0:P.key)==="Tab"),G=A[0],F=A[A.length-1];typeof G!="string"&&typeof F!="string"&&(L?F.focus():G.focus())}else T.focus()};y.addEventListener("focusin",b),y.addEventListener("keydown",E,!0);const C=setInterval(()=>{y.activeElement&&y.activeElement.tagName==="BODY"&&b()},50);return()=>{clearInterval(C),y.removeEventListener("focusin",b),y.removeEventListener("keydown",E,!0)}},[n,r,i,o,a,s]);const m=y=>{d.current===null&&(d.current=y.relatedTarget),f.current=!0,h.current=y.target;const E=e.props.onFocus;E&&E(y)},_=y=>{d.current===null&&(d.current=y.relatedTarget),f.current=!0};return I.jsxs(w.Fragment,{children:[I.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:u,"data-testid":"sentinelStart"}),w.cloneElement(e,{ref:g,onFocus:m}),I.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:c,"data-testid":"sentinelEnd"})]})}function lle(t){return typeof t=="function"?t():t}const ule=w.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=w.useState(null),l=Mn(w.isValidElement(r)?r.ref:null,n);if(Ns(()=>{s||a(lle(i)||document.body)},[i,s]),Ns(()=>{if(o&&!s)return p_(n,o),()=>{p_(n,null)}},[n,o,s]),s){if(w.isValidElement(r)){const u={ref:l};return w.cloneElement(r,u)}return I.jsx(w.Fragment,{children:r})}return I.jsx(w.Fragment,{children:o&&z_.createPortal(r,o)})});function cle(t){const e=mr(t);return e.body===t?zo(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function lh(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function tN(t){return parseInt(zo(t).getComputedStyle(t).paddingRight,10)||0}function dle(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function nN(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!dle(o);a&&l&&lh(o,i)})}function bw(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function hle(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(cle(r)){const o=Q4(mr(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${tN(r)+o}px`;const a=mr(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${tN(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=mr(r).body;else{const o=r.parentElement,a=zo(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function fle(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class ple{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&lh(e.modalRef,!1);const i=fle(n);nN(n,e.mount,e.modalRef,i,!0);const s=bw(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=bw(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=hle(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=bw(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&lh(e.modalRef,n),nN(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&lh(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function mle(t){return typeof t=="function"?t():t}function gle(t){return t?t.props.hasOwnProperty("in"):!1}const _le=new ple;function yle(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=_le,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:u,open:c,rootRef:d}=t,h=w.useRef({}),f=w.useRef(null),p=w.useRef(null),g=Mn(p,d),[v,m]=w.useState(!c),_=gle(l);let y=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(y=!1);const E=()=>mr(f.current),b=()=>(h.current.modalRef=p.current,h.current.mount=f.current,h.current),C=()=>{i.mount(b(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},T=Oa(()=>{const Y=mle(e)||E().body;i.add(b(),Y),p.current&&C()}),A=w.useCallback(()=>i.isTopModal(b()),[i]),M=Oa(Y=>{f.current=Y,Y&&(c&&A()?C():p.current&&lh(p.current,y))}),P=w.useCallback(()=>{i.remove(b(),y)},[y,i]);w.useEffect(()=>()=>{P()},[P]),w.useEffect(()=>{c?T():(!_||!s)&&P()},[c,P,_,s,T]);const L=Y=>Z=>{var N;(N=Y.onKeyDown)==null||N.call(Y,Z),!(Z.key!=="Escape"||Z.which===229||!A())&&(n||(Z.stopPropagation(),u&&u(Z,"escapeKeyDown")))},G=Y=>Z=>{var N;(N=Y.onClick)==null||N.call(Y,Z),Z.target===Z.currentTarget&&u&&u(Z,"backdropClick")};return{getRootProps:(Y={})=>{const Z=aj(t);delete Z.onTransitionEnter,delete Z.onTransitionExited;const N=S({},Z,Y);return S({role:"presentation"},N,{onKeyDown:L(N),ref:g})},getBackdropProps:(Y={})=>{const Z=Y;return S({"aria-hidden":!0},Z,{onClick:G(Z),open:c})},getTransitionProps:()=>{const Y=()=>{m(!1),o&&o()},Z=()=>{m(!0),a&&a(),s&&P()};return{onEnter:KI(Y,l==null?void 0:l.props.onEnter),onExited:KI(Z,l==null?void 0:l.props.onExited)}},rootRef:g,portalRef:M,isTopModal:A,exited:v,hasTransition:_}}const vle=["onChange","maxRows","minRows","style","value"];function dm(t){return parseInt(t,10)||0}const wle={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function rN(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const Ele=w.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,l=se(e,vle),{current:u}=w.useRef(a!=null),c=w.useRef(null),d=Mn(n,c),h=w.useRef(null),f=w.useRef(0),[p,g]=w.useState({outerHeightStyle:0}),v=w.useCallback(()=>{const E=c.current,C=zo(E).getComputedStyle(E);if(C.width==="0px")return{outerHeightStyle:0};const T=h.current;T.style.width=C.width,T.value=E.value||e.placeholder||"x",T.value.slice(-1)===`
`&&(T.value+=" ");const A=C.boxSizing,M=dm(C.paddingBottom)+dm(C.paddingTop),P=dm(C.borderBottomWidth)+dm(C.borderTopWidth),L=T.scrollHeight;T.value="x";const G=T.scrollHeight;let F=L;s&&(F=Math.max(Number(s)*G,F)),i&&(F=Math.min(Number(i)*G,F)),F=Math.max(F,G);const U=F+(A==="border-box"?M+P:0),B=Math.abs(F-L)<=1;return{outerHeightStyle:U,overflow:B}},[i,s,e.placeholder]),m=(E,b)=>{const{outerHeightStyle:C,overflow:T}=b;return f.current<20&&(C>0&&Math.abs((E.outerHeightStyle||0)-C)>1||E.overflow!==T)?(f.current+=1,{overflow:T,outerHeightStyle:C}):E},_=w.useCallback(()=>{const E=v();rN(E)||g(b=>m(b,E))},[v]);Ns(()=>{const E=()=>{const L=v();rN(L)||z_.flushSync(()=>{g(G=>m(G,L))})},b=()=>{f.current=0,E()};let C;const T=o1(b),A=c.current,M=zo(A);M.addEventListener("resize",T);let P;return typeof ResizeObserver<"u"&&(P=new ResizeObserver(b),P.observe(A)),()=>{T.clear(),cancelAnimationFrame(C),M.removeEventListener("resize",T),P&&P.disconnect()}},[v]),Ns(()=>{_()}),w.useEffect(()=>{f.current=0},[a]);const y=E=>{f.current=0,u||_(),r&&r(E)};return I.jsxs(w.Fragment,{children:[I.jsx("textarea",S({value:a,onChange:y,ref:d,rows:s,style:S({height:p.outerHeightStyle,overflow:p.overflow?"hidden":void 0},o)},l)),I.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:S({},wle.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function jc({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const Ile=w.createContext(void 0),v1=Ile;function Bc(){return w.useContext(v1)}function Tle(t){return I.jsx(Xse,S({},t,{defaultTheme:Gv,themeId:gp}))}function iN(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function E_(t,e=!1){return t&&(iN(t.value)&&t.value!==""||e&&iN(t.defaultValue)&&t.defaultValue!=="")}function ble(t){return t.startAdornment}function Sle(t){return Ae("MuiInputBase",t)}const Cle=Ie("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),mc=Cle,Rle=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Qv=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${le(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},Yv=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},xle=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:d,size:h,startAdornment:f,type:p}=t,g={root:["root",`color${le(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",h&&h!=="medium"&&`size${le(h)}`,c&&"multiline",f&&"adornedStart",s&&"adornedEnd",u&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",c&&"inputMultiline",h==="small"&&"inputSizeSmall",u&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return Ne(g,Sle,e)},Xv=re("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Qv})(({theme:t,ownerState:e})=>S({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${mc.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&S({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),Jv=re("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Yv})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=S({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return S({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${mc.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${mc.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),Ale=I.jsx(Tle,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Ple=w.forwardRef(function(e,n){var r;const i=Oe({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:u={},componentsProps:c={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:g=!1,id:v,inputComponent:m="input",inputProps:_={},inputRef:y,maxRows:E,minRows:b,multiline:C=!1,name:T,onBlur:A,onChange:M,onClick:P,onFocus:L,onKeyDown:G,onKeyUp:F,placeholder:U,readOnly:B,renderSuffix:Y,rows:Z,slotProps:N={},slots:z={},startAdornment:X,type:ve="text",value:he}=i,Be=se(i,Rle),fe=_.value!=null?_.value:he,{current:Pe}=w.useRef(fe!=null),ke=w.useRef(),yt=w.useCallback(me=>{},[]),Xt=Mn(ke,y,_.ref,yt),[ht,fn]=w.useState(!1),De=Bc(),it=jc({props:i,muiFormControl:De,states:["color","disabled","error","hiddenLabel","size","required","filled"]});it.focused=De?De.focused:ht,w.useEffect(()=>{!De&&h&&ht&&(fn(!1),A&&A())},[De,h,ht,A]);const we=De&&De.onFilled,ze=De&&De.onEmpty,Ze=w.useCallback(me=>{E_(me)?we&&we():ze&&ze()},[we,ze]);Ns(()=>{Pe&&Ze({value:fe})},[fe,Ze,Pe]);const xi=me=>{if(it.disabled){me.stopPropagation();return}L&&L(me),_.onFocus&&_.onFocus(me),De&&De.onFocus?De.onFocus(me):fn(!0)},Jn=me=>{A&&A(me),_.onBlur&&_.onBlur(me),De&&De.onBlur?De.onBlur(me):fn(!1)},Zn=(me,...oe)=>{if(!Pe){const vr=me.target||ke.current;if(vr==null)throw new Error(Bo(1));Ze({value:vr.value})}_.onChange&&_.onChange(me,...oe),M&&M(me,...oe)};w.useEffect(()=>{Ze(ke.current)},[]);const Ln=me=>{ke.current&&me.currentTarget===me.target&&ke.current.focus(),P&&P(me)};let er=m,st=_;C&&er==="input"&&(Z?st=S({type:void 0,minRows:Z,maxRows:Z},st):st=S({type:void 0,maxRows:E,minRows:b},st),er=Ele);const x=me=>{Ze(me.animationName==="mui-auto-fill-cancel"?ke.current:{value:"x"})};w.useEffect(()=>{De&&De.setAdornedStart(!!X)},[De,X]);const q=S({},i,{color:it.color||"primary",disabled:it.disabled,endAdornment:p,error:it.error,focused:it.focused,formControl:De,fullWidth:g,hiddenLabel:it.hiddenLabel,multiline:C,size:it.size,startAdornment:X,type:ve}),W=xle(q),ne=z.root||u.Root||Xv,pe=N.root||c.root||{},Ee=z.input||u.Input||Jv;return st=S({},st,(r=N.input)!=null?r:c.input),I.jsxs(w.Fragment,{children:[!f&&Ale,I.jsxs(ne,S({},pe,!w_(ne)&&{ownerState:S({},q,pe.ownerState)},{ref:n,onClick:Ln},Be,{className:ue(W.root,pe.className,l,B&&"MuiInputBase-readOnly"),children:[X,I.jsx(v1.Provider,{value:null,children:I.jsx(Ee,S({ownerState:q,"aria-invalid":it.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:d,disabled:it.disabled,id:v,onAnimationStart:x,name:T,placeholder:U,readOnly:B,required:it.required,rows:Z,value:fe,onKeyDown:G,onKeyUp:F,type:ve},st,!w_(Ee)&&{as:er,ownerState:S({},q,st.ownerState)},{ref:Xt,className:ue(W.input,st.className,B&&"MuiInputBase-readOnly"),onBlur:Jn,onChange:Zn,onFocus:xi}))}),p,Y?Y(S({},it,{startAdornment:X})):null]}))]})}),w1=Ple;function kle(t){return Ae("MuiInput",t)}const Nle=S({},mc,Ie("MuiInput",["root","underline","input"])),md=Nle;function Ole(t){return Ae("MuiOutlinedInput",t)}const Dle=S({},mc,Ie("MuiOutlinedInput",["root","notchedOutline","input"])),Gs=Dle;function Mle(t){return Ae("MuiFilledInput",t)}const Lle=S({},mc,Ie("MuiFilledInput",["root","underline","input"])),oa=Lle,$le=m1(I.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Fle=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Vle={entering:{opacity:1},entered:{opacity:1}},Ule=w.forwardRef(function(e,n){const r=Ep(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:u,onEnter:c,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:g,style:v,timeout:m=i,TransitionComponent:_=sj}=e,y=se(e,Fle),E=w.useRef(null),b=Mn(E,a.ref,n),C=U=>B=>{if(U){const Y=E.current;B===void 0?U(Y):U(Y,B)}},T=C(h),A=C((U,B)=>{oj(U);const Y=v_({style:v,timeout:m,easing:l},{mode:"enter"});U.style.webkitTransition=r.transitions.create("opacity",Y),U.style.transition=r.transitions.create("opacity",Y),c&&c(U,B)}),M=C(d),P=C(g),L=C(U=>{const B=v_({style:v,timeout:m,easing:l},{mode:"exit"});U.style.webkitTransition=r.transitions.create("opacity",B),U.style.transition=r.transitions.create("opacity",B),f&&f(U)}),G=C(p),F=U=>{s&&s(E.current,U)};return I.jsx(_,S({appear:o,in:u,nodeRef:E,onEnter:A,onEntered:M,onEntering:T,onExit:L,onExited:G,onExiting:P,addEndListener:F,timeout:m},y,{children:(U,B)=>w.cloneElement(a,S({style:S({opacity:0,visibility:U==="exited"&&!u?"hidden":void 0},Vle[U],v,a.props.style),ref:b},B))}))}),lj=Ule;function jle(t){return Ae("MuiBackdrop",t)}Ie("MuiBackdrop",["root","invisible"]);const Ble=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],zle=t=>{const{classes:e,invisible:n}=t;return Ne({root:["root",n&&"invisible"]},jle,e)},Wle=re("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>S({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),qle=w.forwardRef(function(e,n){var r,i,s;const o=Oe({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:u="div",components:c={},componentsProps:d={},invisible:h=!1,open:f,slotProps:p={},slots:g={},TransitionComponent:v=lj,transitionDuration:m}=o,_=se(o,Ble),y=S({},o,{component:u,invisible:h}),E=zle(y),b=(r=p.root)!=null?r:d.root;return I.jsx(v,S({in:f,timeout:m},_,{children:I.jsx(Wle,S({"aria-hidden":!0},b,{as:(i=(s=g.root)!=null?s:c.Root)!=null?i:u,className:ue(E.root,l,b==null?void 0:b.className),ownerState:S({},y,b==null?void 0:b.ownerState),classes:E,ref:n,children:a}))}))}),uj=qle,Hle=Ie("MuiBox",["root"]),Gle=Hle,Kle=rj(),Qle=toe({themeId:gp,defaultTheme:Kle,defaultClassName:Gle.root,generateClassName:l1.generate}),Yle=Qle;function Xle(t){return Ae("MuiButton",t)}const Jle=Ie("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),hm=Jle,Zle=w.createContext({}),eue=Zle,tue=w.createContext(void 0),nue=tue,rue=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],iue=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${le(e)}`,`size${le(i)}`,`${s}Size${le(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${le(i)}`],endIcon:["endIcon",`iconSize${le(i)}`]},l=Ne(a,Xle,o);return S({},o,l)},cj=t=>S({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),sue=re(y1,{shouldForwardProp:t=>si(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${le(n.color)}`],e[`size${le(n.size)}`],e[`${n.variant}Size${le(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return S({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":S({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Qr(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Qr(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Qr(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":S({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${hm.focusVisible}`]:S({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${hm.disabled}`]:S({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Qr(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${hm.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${hm.disabled}`]:{boxShadow:"none"}}),oue=re("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${le(n.size)}`]]}})(({ownerState:t})=>S({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},cj(t))),aue=re("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${le(n.size)}`]]}})(({ownerState:t})=>S({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},cj(t))),lue=w.forwardRef(function(e,n){const r=w.useContext(eue),i=w.useContext(nue),s=a1(r,e),o=Oe({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:u="button",className:c,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:f=!1,endIcon:p,focusVisibleClassName:g,fullWidth:v=!1,size:m="medium",startIcon:_,type:y,variant:E="text"}=o,b=se(o,rue),C=S({},o,{color:l,component:u,disabled:d,disableElevation:h,disableFocusRipple:f,fullWidth:v,size:m,type:y,variant:E}),T=iue(C),A=_&&I.jsx(oue,{className:T.startIcon,ownerState:C,children:_}),M=p&&I.jsx(aue,{className:T.endIcon,ownerState:C,children:p}),P=i||"";return I.jsxs(sue,S({ownerState:C,className:ue(r.className,T.root,c,P),component:u,disabled:d,focusRipple:!f,focusVisibleClassName:ue(T.focusVisible,g),ref:n,type:y},b,{classes:T,children:[A,a,M]}))}),gr=lue;function uue(t){return Ae("MuiCard",t)}Ie("MuiCard",["root"]);const cue=["className","raised"],due=t=>{const{classes:e}=t;return Ne({root:["root"]},uue,e)},hue=re(Ip,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),fue=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,o=se(r,cue),a=S({},r,{raised:s}),l=due(a);return I.jsx(hue,S({className:ue(l.root,i),elevation:s?8:void 0,ref:n,ownerState:a},o))}),Tp=fue;function pue(t){return Ae("MuiCardContent",t)}Ie("MuiCardContent",["root"]);const mue=["className","component"],gue=t=>{const{classes:e}=t;return Ne({root:["root"]},pue,e)},_ue=re("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),yue=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,o=se(r,mue),a=S({},r,{component:s}),l=gue(a);return I.jsx(_ue,S({as:s,className:ue(l.root,i),ownerState:a,ref:n},o))}),bp=yue;function vue(t){return Ae("MuiCardMedia",t)}Ie("MuiCardMedia",["root","media","img"]);const wue=["children","className","component","image","src","style"],Eue=t=>{const{classes:e,isMediaComponent:n,isImageComponent:r}=t;return Ne({root:["root",n&&"media",r&&"img"]},vue,e)},Iue=re("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{isMediaComponent:r,isImageComponent:i}=n;return[e.root,r&&e.media,i&&e.img]}})(({ownerState:t})=>S({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})),Tue=["video","audio","picture","iframe","img"],bue=["picture","img"],Sue=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiCardMedia"}),{children:i,className:s,component:o="div",image:a,src:l,style:u}=r,c=se(r,wue),d=Tue.indexOf(o)!==-1,h=!d&&a?S({backgroundImage:`url("${a}")`},u):u,f=S({},r,{component:o,isMediaComponent:d,isImageComponent:bue.indexOf(o)!==-1}),p=Eue(f);return I.jsx(Iue,S({className:ue(p.root,s),as:o,role:!d&&a?"img":void 0,ref:n,style:h,ownerState:f,src:d?a||l:void 0},c,{children:i}))}),dj=Sue;function Cue(t){return Ae("MuiCircularProgress",t)}Ie("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Rue=["className","color","disableShrink","size","style","thickness","value","variant"];let Zv=t=>t,sN,oN,aN,lN;const Ks=44,xue=yp(sN||(sN=Zv`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Aue=yp(oN||(oN=Zv`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Pue=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${le(r)}`],svg:["svg"],circle:["circle",`circle${le(n)}`,i&&"circleDisableShrink"]};return Ne(s,Cue,e)},kue=re("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${le(n.color)}`]]}})(({ownerState:t,theme:e})=>S({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&r1(aN||(aN=Zv`
      animation: ${0} 1.4s linear infinite;
    `),xue)),Nue=re("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),Oue=re("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${le(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>S({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&r1(lN||(lN=Zv`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Aue)),Due=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:u=3.6,value:c=0,variant:d="indeterminate"}=r,h=se(r,Rue),f=S({},r,{color:s,disableShrink:o,size:a,thickness:u,value:c,variant:d}),p=Pue(f),g={},v={},m={};if(d==="determinate"){const _=2*Math.PI*((Ks-u)/2);g.strokeDasharray=_.toFixed(3),m["aria-valuenow"]=Math.round(c),g.strokeDashoffset=`${((100-c)/100*_).toFixed(3)}px`,v.transform="rotate(-90deg)"}return I.jsx(kue,S({className:ue(p.root,i),style:S({width:a,height:a},v,l),ownerState:f,ref:n,role:"progressbar"},m,h,{children:I.jsx(Nue,{className:p.svg,ownerState:f,viewBox:`${Ks/2} ${Ks/2} ${Ks} ${Ks}`,children:I.jsx(Oue,{className:p.circle,style:g,ownerState:f,cx:Ks,cy:Ks,r:(Ks-u)/2,fill:"none",strokeWidth:u})})}))}),hj=Due,Mue=boe({createStyledComponent:re("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${le(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>Oe({props:t,name:"MuiContainer"})}),Lue=Mue;function $ue(t){return Ae("MuiModal",t)}Ie("MuiModal",["root","hidden","backdrop"]);const Fue=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Vue=t=>{const{open:e,exited:n,classes:r}=t;return Ne({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},$ue,r)},Uue=re("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>S({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),jue=re(uj,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),Bue=w.forwardRef(function(e,n){var r,i,s,o,a,l;const u=Oe({name:"MuiModal",props:e}),{BackdropComponent:c=jue,BackdropProps:d,className:h,closeAfterTransition:f=!1,children:p,container:g,component:v,components:m={},componentsProps:_={},disableAutoFocus:y=!1,disableEnforceFocus:E=!1,disableEscapeKeyDown:b=!1,disablePortal:C=!1,disableRestoreFocus:T=!1,disableScrollLock:A=!1,hideBackdrop:M=!1,keepMounted:P=!1,onBackdropClick:L,open:G,slotProps:F,slots:U}=u,B=se(u,Fue),Y=S({},u,{closeAfterTransition:f,disableAutoFocus:y,disableEnforceFocus:E,disableEscapeKeyDown:b,disablePortal:C,disableRestoreFocus:T,disableScrollLock:A,hideBackdrop:M,keepMounted:P}),{getRootProps:Z,getBackdropProps:N,getTransitionProps:z,portalRef:X,isTopModal:ve,exited:he,hasTransition:Be}=yle(S({},Y,{rootRef:n})),fe=S({},Y,{exited:he}),Pe=Vue(fe),ke={};if(p.props.tabIndex===void 0&&(ke.tabIndex="-1"),Be){const{onEnter:we,onExited:ze}=z();ke.onEnter=we,ke.onExited=ze}const yt=(r=(i=U==null?void 0:U.root)!=null?i:m.Root)!=null?r:Uue,Xt=(s=(o=U==null?void 0:U.backdrop)!=null?o:m.Backdrop)!=null?s:c,ht=(a=F==null?void 0:F.root)!=null?a:_.root,fn=(l=F==null?void 0:F.backdrop)!=null?l:_.backdrop,De=pc({elementType:yt,externalSlotProps:ht,externalForwardedProps:B,getSlotProps:Z,additionalProps:{ref:n,as:v},ownerState:fe,className:ue(h,ht==null?void 0:ht.className,Pe==null?void 0:Pe.root,!fe.open&&fe.exited&&(Pe==null?void 0:Pe.hidden))}),it=pc({elementType:Xt,externalSlotProps:fn,additionalProps:d,getSlotProps:we=>N(S({},we,{onClick:ze=>{L&&L(ze),we!=null&&we.onClick&&we.onClick(ze)}})),className:ue(fn==null?void 0:fn.className,d==null?void 0:d.className,Pe==null?void 0:Pe.backdrop),ownerState:fe});return!P&&!G&&(!Be||he)?null:I.jsx(ule,{ref:X,container:g,disablePortal:C,children:I.jsxs(yt,S({},De,{children:[!M&&c?I.jsx(Xt,S({},it)):null,I.jsx(ale,{disableEnforceFocus:E,disableAutoFocus:y,disableRestoreFocus:T,isEnabled:ve,open:G,children:w.cloneElement(p,ke)})]}))})}),fj=Bue;function zue(t){return Ae("MuiDialog",t)}const Wue=Ie("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Sw=Wue,que=w.createContext({}),pj=que,Hue=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Gue=re(uj,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),Kue=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,o={root:["root"],container:["container",`scroll${le(n)}`],paper:["paper",`paperScroll${le(n)}`,`paperWidth${le(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Ne(o,zue,e)},Que=re(fj,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),Yue=re("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${le(n.scroll)}`]]}})(({ownerState:t})=>S({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Xue=re(Ip,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${le(n.scroll)}`],e[`paperWidth${le(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>S({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${Sw.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${Sw.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Sw.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Jue=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiDialog"}),i=Ep(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:l,BackdropProps:u,children:c,className:d,disableEscapeKeyDown:h=!1,fullScreen:f=!1,fullWidth:p=!1,maxWidth:g="sm",onBackdropClick:v,onClose:m,open:_,PaperComponent:y=Ip,PaperProps:E={},scroll:b="paper",TransitionComponent:C=lj,transitionDuration:T=s,TransitionProps:A}=r,M=se(r,Hue),P=S({},r,{disableEscapeKeyDown:h,fullScreen:f,fullWidth:p,maxWidth:g,scroll:b}),L=Kue(P),G=w.useRef(),F=Z=>{G.current=Z.target===Z.currentTarget},U=Z=>{G.current&&(G.current=null,v&&v(Z),m&&m(Z,"backdropClick"))},B=Ov(a),Y=w.useMemo(()=>({titleId:B}),[B]);return I.jsx(Que,S({className:ue(L.root,d),closeAfterTransition:!0,components:{Backdrop:Gue},componentsProps:{backdrop:S({transitionDuration:T,as:l},u)},disableEscapeKeyDown:h,onClose:m,open:_,ref:n,onClick:U,ownerState:P},M,{children:I.jsx(C,S({appear:!0,in:_,timeout:T,role:"presentation"},A,{children:I.jsx(Yue,{className:ue(L.container),onMouseDown:F,ownerState:P,children:I.jsx(Xue,S({as:y,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":B},E,{className:ue(L.paper,E.className),ownerState:P,children:I.jsx(pj.Provider,{value:Y,children:c})}))})}))}))}),E1=Jue;function Zue(t){return Ae("MuiDialogActions",t)}Ie("MuiDialogActions",["root","spacing"]);const ece=["className","disableSpacing"],tce=t=>{const{classes:e,disableSpacing:n}=t;return Ne({root:["root",!n&&"spacing"]},Zue,e)},nce=re("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>S({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),rce=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1}=r,o=se(r,ece),a=S({},r,{disableSpacing:s}),l=tce(a);return I.jsx(nce,S({className:ue(l.root,i),ownerState:a,ref:n},o))}),I1=rce;function ice(t){return Ae("MuiDialogContent",t)}Ie("MuiDialogContent",["root","dividers"]);function sce(t){return Ae("MuiDialogTitle",t)}const oce=Ie("MuiDialogTitle",["root"]),ace=oce,lce=["className","dividers"],uce=t=>{const{classes:e,dividers:n}=t;return Ne({root:["root",n&&"dividers"]},ice,e)},cce=re("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>S({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${ace.root} + &`]:{paddingTop:0}})),dce=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1}=r,o=se(r,lce),a=S({},r,{dividers:s}),l=uce(a);return I.jsx(cce,S({className:ue(l.root,i),ownerState:a,ref:n},o))}),T1=dce,hce=["className","id"],fce=t=>{const{classes:e}=t;return Ne({root:["root"]},sce,e)},pce=re(We,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),mce=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiDialogTitle"}),{className:i,id:s}=r,o=se(r,hce),a=r,l=fce(a),{titleId:u=s}=w.useContext(pj);return I.jsx(pce,S({component:"h2",className:ue(l.root,i),ownerState:a,ref:n,variant:"h6",id:s??u},o))}),b1=mce,gce=Ie("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),uN=gce,_ce=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],yce=t=>{const{classes:e,disableUnderline:n}=t,i=Ne({root:["root",!n&&"underline"],input:["input"]},Mle,e);return S({},e,i)},vce=re(Xv,{shouldForwardProp:t=>si(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Qv(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return S({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${oa.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${oa.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${oa.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${oa.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${oa.disabled}, .${oa.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${oa.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&S({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),wce=re(Jv,{name:"MuiFilledInput",slot:"Input",overridesResolver:Yv})(({theme:t,ownerState:e})=>S({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),mj=w.forwardRef(function(e,n){var r,i,s,o;const a=Oe({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:u,fullWidth:c=!1,inputComponent:d="input",multiline:h=!1,slotProps:f,slots:p={},type:g="text"}=a,v=se(a,_ce),m=S({},a,{fullWidth:c,inputComponent:d,multiline:h,type:g}),_=yce(a),y={root:{ownerState:m},input:{ownerState:m}},E=f??u?pr(y,f??u):y,b=(r=(i=p.root)!=null?i:l.Root)!=null?r:vce,C=(s=(o=p.input)!=null?o:l.Input)!=null?s:wce;return I.jsx(w1,S({slots:{root:b,input:C},componentsProps:E,fullWidth:c,inputComponent:d,multiline:h,ref:n,type:g},v,{classes:_}))});mj.muiName="Input";const gj=mj;function Ece(t){return Ae("MuiFormControl",t)}Ie("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ice=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Tce=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${le(n)}`,r&&"fullWidth"]};return Ne(i,Ece,e)},bce=re("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>S({},e.root,e[`margin${le(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>S({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),Sce=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:u=!1,focused:c,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:g="medium",variant:v="outlined"}=r,m=se(r,Ice),_=S({},r,{color:o,component:a,disabled:l,error:u,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:g,variant:v}),y=Tce(_),[E,b]=w.useState(()=>{let F=!1;return i&&w.Children.forEach(i,U=>{if(!qm(U,["Input","Select"]))return;const B=qm(U,["Select"])?U.props.input:U;B&&ble(B.props)&&(F=!0)}),F}),[C,T]=w.useState(()=>{let F=!1;return i&&w.Children.forEach(i,U=>{qm(U,["Input","Select"])&&(E_(U.props,!0)||E_(U.props.inputProps,!0))&&(F=!0)}),F}),[A,M]=w.useState(!1);l&&A&&M(!1);const P=c!==void 0&&!l?c:A;let L;const G=w.useMemo(()=>({adornedStart:E,setAdornedStart:b,color:o,disabled:l,error:u,filled:C,focused:P,fullWidth:d,hiddenLabel:h,size:g,onBlur:()=>{M(!1)},onEmpty:()=>{T(!1)},onFilled:()=>{T(!0)},onFocus:()=>{M(!0)},registerEffect:L,required:p,variant:v}),[E,o,l,u,C,P,d,h,L,p,g,v]);return I.jsx(v1.Provider,{value:G,children:I.jsx(bce,S({as:a,ownerState:_,className:ue(y.root,s),ref:n},m,{children:i}))})}),Cce=Sce;function Rce(t){return Ae("MuiFormHelperText",t)}const xce=Ie("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),cN=xce;var dN;const Ace=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Pce=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=t,u={root:["root",i&&"disabled",s&&"error",r&&`size${le(r)}`,n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return Ne(u,Rce,e)},kce=re("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${le(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>S({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${cN.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${cN.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),Nce=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p"}=r,a=se(r,Ace),l=Bc(),u=jc({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),c=S({},r,{component:o,contained:u.variant==="filled"||u.variant==="outlined",variant:u.variant,size:u.size,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),d=Pce(c);return I.jsx(kce,S({as:o,ownerState:c,className:ue(d.root,s),ref:n},a,{children:i===" "?dN||(dN=I.jsx("span",{className:"notranslate",children:""})):i}))}),Oce=Nce;function Dce(t){return Ae("MuiFormLabel",t)}const Mce=Ie("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),uh=Mce,Lce=["children","className","color","component","disabled","error","filled","focused","required"],$ce=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,l={root:["root",`color${le(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return Ne(l,Dce,e)},Fce=re("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>S({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>S({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${uh.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${uh.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${uh.error}`]:{color:(t.vars||t).palette.error.main}})),Vce=re("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${uh.error}`]:{color:(t.vars||t).palette.error.main}})),Uce=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=se(r,Lce),l=Bc(),u=jc({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),c=S({},r,{color:u.color||"primary",component:o,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),d=$ce(c);return I.jsxs(Fce,S({as:o,ownerState:c,className:ue(d.root,s),ref:n},a,{children:[i,u.required&&I.jsxs(Vce,{ownerState:c,"aria-hidden":!0,className:d.asterisk,children:["","*"]})]}))}),jce=Uce,Bce=w.createContext(),hN=Bce;function zce(t){return Ae("MuiGrid",t)}const Wce=[0,1,2,3,4,5,6,7,8,9,10],qce=["column-reverse","column","row-reverse","row"],Hce=["nowrap","wrap-reverse","wrap"],gd=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Sf=Ie("MuiGrid",["root","container","item","zeroMinWidth",...Wce.map(t=>`spacing-xs-${t}`),...qce.map(t=>`direction-xs-${t}`),...Hce.map(t=>`wrap-xs-${t}`),...gd.map(t=>`grid-xs-${t}`),...gd.map(t=>`grid-sm-${t}`),...gd.map(t=>`grid-md-${t}`),...gd.map(t=>`grid-lg-${t}`),...gd.map(t=>`grid-xl-${t}`)]),Gce=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function $u(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function Kce({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let s={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=Mv({values:e.columns,breakpoints:t.breakpoints.values}),a=typeof o=="object"?o[i]:o;if(a==null)return r;const l=`${Math.round(n/a*1e8)/1e6}%`;let u={};if(e.container&&e.item&&e.columnSpacing!==0){const c=t.spacing(e.columnSpacing);if(c!=="0px"){const d=`calc(${l} + ${$u(c)})`;u={flexBasis:d,maxWidth:d}}}s=S({flexBasis:l,flexGrow:0,maxWidth:l},u)}return t.breakpoints.values[i]===0?Object.assign(r,s):r[t.breakpoints.up(i)]=s,r},{})}function Qce({theme:t,ownerState:e}){const n=Mv({values:e.direction,breakpoints:t.breakpoints.values});return ni({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${Sf.item}`]={maxWidth:"none"}),i})}function _j({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,s)=>t[i]-t[s]);return r.slice(0,r.indexOf(n))}function Yce({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const s=Mv({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=_j({breakpoints:t.breakpoints.values,values:s})),i=ni({theme:t},s,(a,l)=>{var u;const c=t.spacing(a);return c!=="0px"?{marginTop:`-${$u(c)}`,[`& > .${Sf.item}`]:{paddingTop:$u(c)}}:(u=o)!=null&&u.includes(l)?{}:{marginTop:0,[`& > .${Sf.item}`]:{paddingTop:0}}})}return i}function Xce({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const s=Mv({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=_j({breakpoints:t.breakpoints.values,values:s})),i=ni({theme:t},s,(a,l)=>{var u;const c=t.spacing(a);return c!=="0px"?{width:`calc(100% + ${$u(c)})`,marginLeft:`-${$u(c)}`,[`& > .${Sf.item}`]:{paddingLeft:$u(c)}}:(u=o)!=null&&u.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${Sf.item}`]:{paddingLeft:0}}})}return i}function Jce(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const s=t[i];Number(s)>0&&r.push(n[`spacing-${i}-${String(s)}`])}),r}const Zce=re("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:s,spacing:o,wrap:a,zeroMinWidth:l,breakpoints:u}=n;let c=[];r&&(c=Jce(o,u,e));const d=[];return u.forEach(h=>{const f=n[h];f&&d.push(e[`grid-${h}-${String(f)}`])}),[e.root,r&&e.container,s&&e.item,l&&e.zeroMinWidth,...c,i!=="row"&&e[`direction-xs-${String(i)}`],a!=="wrap"&&e[`wrap-xs-${String(a)}`],...d]}})(({ownerState:t})=>S({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),Qce,Yce,Xce,Kce);function ede(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const s=`spacing-${r}-${String(i)}`;n.push(s)}}),n}const tde=t=>{const{classes:e,container:n,direction:r,item:i,spacing:s,wrap:o,zeroMinWidth:a,breakpoints:l}=t;let u=[];n&&(u=ede(s,l));const c=[];l.forEach(h=>{const f=t[h];f&&c.push(`grid-${h}-${String(f)}`)});const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...u,r!=="row"&&`direction-xs-${String(r)}`,o!=="wrap"&&`wrap-xs-${String(o)}`,...c]};return Ne(d,zce,e)},nde=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiGrid"}),{breakpoints:i}=Ep(),s=f1(r),{className:o,columns:a,columnSpacing:l,component:u="div",container:c=!1,direction:d="row",item:h=!1,rowSpacing:f,spacing:p=0,wrap:g="wrap",zeroMinWidth:v=!1}=s,m=se(s,Gce),_=f||p,y=l||p,E=w.useContext(hN),b=c?a||12:E,C={},T=S({},m);i.keys.forEach(P=>{m[P]!=null&&(C[P]=m[P],delete T[P])});const A=S({},s,{columns:b,container:c,direction:d,item:h,rowSpacing:_,columnSpacing:y,wrap:g,zeroMinWidth:v,spacing:p},C,{breakpoints:i.keys}),M=tde(A);return I.jsx(hN.Provider,{value:b,children:I.jsx(Zce,S({ownerState:A,className:ue(M.root,o),as:u,ref:n},T))})}),Wo=nde,rde=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function tT(t){return`scale(${t}, ${t**2})`}const ide={entering:{opacity:1,transform:tT(1)},entered:{opacity:1,transform:"none"}},Cw=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),yj=w.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:u,onEntering:c,onExit:d,onExited:h,onExiting:f,style:p,timeout:g="auto",TransitionComponent:v=sj}=e,m=se(e,rde),_=w.useRef(),y=w.useRef(),E=Ep(),b=w.useRef(null),C=Mn(b,s.ref,n),T=B=>Y=>{if(B){const Z=b.current;Y===void 0?B(Z):B(Z,Y)}},A=T(c),M=T((B,Y)=>{oj(B);const{duration:Z,delay:N,easing:z}=v_({style:p,timeout:g,easing:o},{mode:"enter"});let X;g==="auto"?(X=E.transitions.getAutoHeightDuration(B.clientHeight),y.current=X):X=Z,B.style.transition=[E.transitions.create("opacity",{duration:X,delay:N}),E.transitions.create("transform",{duration:Cw?X:X*.666,delay:N,easing:z})].join(","),l&&l(B,Y)}),P=T(u),L=T(f),G=T(B=>{const{duration:Y,delay:Z,easing:N}=v_({style:p,timeout:g,easing:o},{mode:"exit"});let z;g==="auto"?(z=E.transitions.getAutoHeightDuration(B.clientHeight),y.current=z):z=Y,B.style.transition=[E.transitions.create("opacity",{duration:z,delay:Z}),E.transitions.create("transform",{duration:Cw?z:z*.666,delay:Cw?Z:Z||z*.333,easing:N})].join(","),B.style.opacity=0,B.style.transform=tT(.75),d&&d(B)}),F=T(h),U=B=>{g==="auto"&&(_.current=setTimeout(B,y.current||0)),r&&r(b.current,B)};return w.useEffect(()=>()=>{clearTimeout(_.current)},[]),I.jsx(v,S({appear:i,in:a,nodeRef:b,onEnter:M,onEntered:P,onEntering:A,onExit:G,onExited:F,onExiting:L,addEndListener:U,timeout:g==="auto"?null:g},m,{children:(B,Y)=>w.cloneElement(s,S({style:S({opacity:0,transform:tT(.75),visibility:B==="exited"&&!a?"hidden":void 0},ide[B],p,s.props.style),ref:C},Y))}))});yj.muiSupportAuto=!0;const sde=yj,ode=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],ade=t=>{const{classes:e,disableUnderline:n}=t,i=Ne({root:["root",!n&&"underline"],input:["input"]},kle,e);return S({},e,i)},lde=re(Xv,{shouldForwardProp:t=>si(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Qv(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),S({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${md.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${md.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${md.disabled}, .${md.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${md.disabled}:before`]:{borderBottomStyle:"dotted"}})}),ude=re(Jv,{name:"MuiInput",slot:"Input",overridesResolver:Yv})({}),vj=w.forwardRef(function(e,n){var r,i,s,o;const a=Oe({props:e,name:"MuiInput"}),{disableUnderline:l,components:u={},componentsProps:c,fullWidth:d=!1,inputComponent:h="input",multiline:f=!1,slotProps:p,slots:g={},type:v="text"}=a,m=se(a,ode),_=ade(a),E={root:{ownerState:{disableUnderline:l}}},b=p??c?pr(p??c,E):E,C=(r=(i=g.root)!=null?i:u.Root)!=null?r:lde,T=(s=(o=g.input)!=null?o:u.Input)!=null?s:ude;return I.jsx(w1,S({slots:{root:C,input:T},slotProps:b,fullWidth:d,inputComponent:h,multiline:f,ref:n,type:v},m,{classes:_}))});vj.muiName="Input";const wj=vj;function cde(t){return Ae("MuiInputLabel",t)}Ie("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const dde=["disableAnimation","margin","shrink","variant","className"],hde=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${le(r)}`,o],asterisk:[a&&"asterisk"]},u=Ne(l,cde,e);return S({},e,u)},fde=re(jce,{shouldForwardProp:t=>si(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${uh.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>S({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&S({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&S({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&S({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),pde=w.forwardRef(function(e,n){const r=Oe({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=se(r,dde),l=Bc();let u=s;typeof u>"u"&&l&&(u=l.filled||l.focused||l.adornedStart);const c=jc({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),d=S({},r,{disableAnimation:i,formControl:l,shrink:u,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),h=hde(d);return I.jsx(fde,S({"data-shrink":u,ownerState:d,ref:n,className:ue(h.root,o)},a,{classes:h}))}),mde=pde,gde=w.createContext({}),nT=gde;function _de(t){return Ae("MuiList",t)}Ie("MuiList",["root","padding","dense","subheader"]);const yde=["children","className","component","dense","disablePadding","subheader"],vde=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Ne({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},_de,e)},wde=re("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>S({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),Ede=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:u}=r,c=se(r,yde),d=w.useMemo(()=>({dense:a}),[a]),h=S({},r,{component:o,dense:a,disablePadding:l}),f=vde(h);return I.jsx(nT.Provider,{value:d,children:I.jsxs(wde,S({as:o,className:ue(f.root,s),ref:n,ownerState:h},c,{children:[u,i]}))})}),Ide=Ede,Tde=Ie("MuiListItemIcon",["root","alignItemsFlexStart"]),fN=Tde,bde=Ie("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),pN=bde,Sde=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Rw(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function mN(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Ej(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function _d(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Ej(a,s)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const Cde=w.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:c,variant:d="selectedMenu"}=e,h=se(e,Sde),f=w.useRef(null),p=w.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ns(()=>{i&&f.current.focus()},[i]),w.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(y,E)=>{const b=!f.current.style.width;if(y.clientHeight<f.current.clientHeight&&b){const C=`${Q4(mr(y))}px`;f.current.style[E.direction==="rtl"?"paddingLeft":"paddingRight"]=C,f.current.style.width=`calc(100% + ${C})`}return f.current}}),[]);const g=y=>{const E=f.current,b=y.key,C=mr(E).activeElement;if(b==="ArrowDown")y.preventDefault(),_d(E,C,u,l,Rw);else if(b==="ArrowUp")y.preventDefault(),_d(E,C,u,l,mN);else if(b==="Home")y.preventDefault(),_d(E,null,u,l,Rw);else if(b==="End")y.preventDefault(),_d(E,null,u,l,mN);else if(b.length===1){const T=p.current,A=b.toLowerCase(),M=performance.now();T.keys.length>0&&(M-T.lastTime>500?(T.keys=[],T.repeating=!0,T.previousKeyMatched=!0):T.repeating&&A!==T.keys[0]&&(T.repeating=!1)),T.lastTime=M,T.keys.push(A);const P=C&&!T.repeating&&Ej(C,T);T.previousKeyMatched&&(P||_d(E,C,!1,l,Rw,T))?y.preventDefault():T.previousKeyMatched=!1}c&&c(y)},v=Mn(f,n);let m=-1;w.Children.forEach(o,(y,E)=>{if(!w.isValidElement(y)){m===E&&(m+=1,m>=o.length&&(m=-1));return}y.props.disabled||(d==="selectedMenu"&&y.props.selected||m===-1)&&(m=E),m===E&&(y.props.disabled||y.props.muiSkipListHighlight||y.type.muiSkipListHighlight)&&(m+=1,m>=o.length&&(m=-1))});const _=w.Children.map(o,(y,E)=>{if(E===m){const b={};return s&&(b.autoFocus=!0),y.props.tabIndex===void 0&&d==="selectedMenu"&&(b.tabIndex=0),w.cloneElement(y,b)}return y});return I.jsx(Ide,S({role:"menu",ref:v,className:a,onKeyDown:g,tabIndex:i?0:-1},h,{children:_}))}),Rde=Cde;function xde(t){return Ae("MuiPopover",t)}Ie("MuiPopover",["root","paper"]);const Ade=["onEntering"],Pde=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],kde=["slotProps"];function gN(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function _N(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function yN(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function xw(t){return typeof t=="function"?t():t}const Nde=t=>{const{classes:e}=t;return Ne({root:["root"],paper:["paper"]},xde,e)},Ode=re(fj,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Ij=re(Ip,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Dde=w.forwardRef(function(e,n){var r,i,s;const o=Oe({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:u={vertical:"top",horizontal:"left"},anchorPosition:c,anchorReference:d="anchorEl",children:h,className:f,container:p,elevation:g=8,marginThreshold:v=16,open:m,PaperProps:_={},slots:y,slotProps:E,transformOrigin:b={vertical:"top",horizontal:"left"},TransitionComponent:C=sde,transitionDuration:T="auto",TransitionProps:{onEntering:A}={},disableScrollLock:M=!1}=o,P=se(o.TransitionProps,Ade),L=se(o,Pde),G=(r=E==null?void 0:E.paper)!=null?r:_,F=w.useRef(),U=Mn(F,G.ref),B=S({},o,{anchorOrigin:u,anchorReference:d,elevation:g,marginThreshold:v,externalPaperSlotProps:G,transformOrigin:b,TransitionComponent:C,transitionDuration:T,TransitionProps:P}),Y=Nde(B),Z=w.useCallback(()=>{if(d==="anchorPosition")return c;const we=xw(l),Ze=(we&&we.nodeType===1?we:mr(F.current).body).getBoundingClientRect();return{top:Ze.top+gN(Ze,u.vertical),left:Ze.left+_N(Ze,u.horizontal)}},[l,u.horizontal,u.vertical,c,d]),N=w.useCallback(we=>({vertical:gN(we,b.vertical),horizontal:_N(we,b.horizontal)}),[b.horizontal,b.vertical]),z=w.useCallback(we=>{const ze={width:we.offsetWidth,height:we.offsetHeight},Ze=N(ze);if(d==="none")return{top:null,left:null,transformOrigin:yN(Ze)};const xi=Z();let Jn=xi.top-Ze.vertical,Zn=xi.left-Ze.horizontal;const Ln=Jn+ze.height,er=Zn+ze.width,st=zo(xw(l)),x=st.innerHeight-v,q=st.innerWidth-v;if(v!==null&&Jn<v){const W=Jn-v;Jn-=W,Ze.vertical+=W}else if(v!==null&&Ln>x){const W=Ln-x;Jn-=W,Ze.vertical+=W}if(v!==null&&Zn<v){const W=Zn-v;Zn-=W,Ze.horizontal+=W}else if(er>q){const W=er-q;Zn-=W,Ze.horizontal+=W}return{top:`${Math.round(Jn)}px`,left:`${Math.round(Zn)}px`,transformOrigin:yN(Ze)}},[l,d,Z,N,v]),[X,ve]=w.useState(m),he=w.useCallback(()=>{const we=F.current;if(!we)return;const ze=z(we);ze.top!==null&&(we.style.top=ze.top),ze.left!==null&&(we.style.left=ze.left),we.style.transformOrigin=ze.transformOrigin,ve(!0)},[z]);w.useEffect(()=>(M&&window.addEventListener("scroll",he),()=>window.removeEventListener("scroll",he)),[l,M,he]);const Be=(we,ze)=>{A&&A(we,ze),he()},fe=()=>{ve(!1)};w.useEffect(()=>{m&&he()}),w.useImperativeHandle(a,()=>m?{updatePosition:()=>{he()}}:null,[m,he]),w.useEffect(()=>{if(!m)return;const we=o1(()=>{he()}),ze=zo(l);return ze.addEventListener("resize",we),()=>{we.clear(),ze.removeEventListener("resize",we)}},[l,m,he]);let Pe=T;T==="auto"&&!C.muiSupportAuto&&(Pe=void 0);const ke=p||(l?mr(xw(l)).body:void 0),yt=(i=y==null?void 0:y.root)!=null?i:Ode,Xt=(s=y==null?void 0:y.paper)!=null?s:Ij,ht=pc({elementType:Xt,externalSlotProps:S({},G,{style:X?G.style:S({},G.style,{opacity:0})}),additionalProps:{elevation:g,ref:U},ownerState:B,className:ue(Y.paper,G==null?void 0:G.className)}),fn=pc({elementType:yt,externalSlotProps:(E==null?void 0:E.root)||{},externalForwardedProps:L,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:ke,open:m},ownerState:B,className:ue(Y.root,f)}),{slotProps:De}=fn,it=se(fn,kde);return I.jsx(yt,S({},it,!w_(yt)&&{slotProps:De,disableScrollLock:M},{children:I.jsx(C,S({appear:!0,in:m,onEntering:Be,onExited:fe,timeout:Pe},P,{children:I.jsx(Xt,S({},ht,{children:h}))}))}))}),Mde=Dde;function Lde(t){return Ae("MuiMenu",t)}Ie("MuiMenu",["root","paper","list"]);const $de=["onEntering"],Fde=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Vde={vertical:"top",horizontal:"right"},Ude={vertical:"top",horizontal:"left"},jde=t=>{const{classes:e}=t;return Ne({root:["root"],paper:["paper"],list:["list"]},Lde,e)},Bde=re(Mde,{shouldForwardProp:t=>si(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),zde=re(Ij,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Wde=re(Rde,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),qde=w.forwardRef(function(e,n){var r,i;const s=Oe({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:u=!1,MenuListProps:c={},onClose:d,open:h,PaperProps:f={},PopoverClasses:p,transitionDuration:g="auto",TransitionProps:{onEntering:v}={},variant:m="selectedMenu",slots:_={},slotProps:y={}}=s,E=se(s.TransitionProps,$de),b=se(s,Fde),C=Ep(),T=C.direction==="rtl",A=S({},s,{autoFocus:o,disableAutoFocusItem:u,MenuListProps:c,onEntering:v,PaperProps:f,transitionDuration:g,TransitionProps:E,variant:m}),M=jde(A),P=o&&!u&&h,L=w.useRef(null),G=(z,X)=>{L.current&&L.current.adjustStyleForScrollbar(z,C),v&&v(z,X)},F=z=>{z.key==="Tab"&&(z.preventDefault(),d&&d(z,"tabKeyDown"))};let U=-1;w.Children.map(a,(z,X)=>{w.isValidElement(z)&&(z.props.disabled||(m==="selectedMenu"&&z.props.selected||U===-1)&&(U=X))});const B=(r=_.paper)!=null?r:zde,Y=(i=y.paper)!=null?i:f,Z=pc({elementType:_.root,externalSlotProps:y.root,ownerState:A,className:[M.root,l]}),N=pc({elementType:B,externalSlotProps:Y,ownerState:A,className:M.paper});return I.jsx(Bde,S({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:T?"right":"left"},transformOrigin:T?Vde:Ude,slots:{paper:B,root:_.root},slotProps:{root:Z,paper:N},open:h,ref:n,transitionDuration:g,TransitionProps:S({onEntering:G},E),ownerState:A},b,{classes:p,children:I.jsx(Wde,S({onKeyDown:F,actions:L,autoFocus:o&&(U===-1||u),autoFocusItem:P,variant:m},c,{className:ue(M.list,c.className),children:a}))}))}),Gm=qde;function Hde(t){return Ae("MuiMenuItem",t)}const Gde=Ie("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),yd=Gde,Kde=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Qde=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},Yde=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,l=Ne({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},Hde,o);return S({},o,l)},Xde=re(y1,{shouldForwardProp:t=>si(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Qde})(({theme:t,ownerState:e})=>S({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${yd.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Qr(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${yd.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Qr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${yd.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Qr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Qr(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${yd.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${yd.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${uN.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${uN.inset}`]:{marginLeft:52},[`& .${pN.root}`]:{marginTop:0,marginBottom:0},[`& .${pN.inset}`]:{paddingLeft:36},[`& .${fN.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&S({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${fN.root} svg`]:{fontSize:"1.25rem"}}))),Jde=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:u,role:c="menuitem",tabIndex:d,className:h}=r,f=se(r,Kde),p=w.useContext(nT),g=w.useMemo(()=>({dense:o||p.dense||!1,disableGutters:l}),[p.dense,o,l]),v=w.useRef(null);Ns(()=>{i&&v.current&&v.current.focus()},[i]);const m=S({},r,{dense:g.dense,divider:a,disableGutters:l}),_=Yde(r),y=Mn(v,n);let E;return r.disabled||(E=d!==void 0?d:-1),I.jsx(nT.Provider,{value:g,children:I.jsx(Xde,S({ref:y,role:c,tabIndex:E,component:s,focusVisibleClassName:ue(_.focusVisible,u),className:ue(_.root,h)},f,{ownerState:m,classes:_}))})}),ai=Jde;function Zde(t){return Ae("MuiNativeSelect",t)}const ehe=Ie("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),S1=ehe,the=["className","disabled","error","IconComponent","inputRef","variant"],nhe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${le(n)}`,s&&"iconOpen",r&&"disabled"]};return Ne(a,Zde,e)},Tj=({ownerState:t,theme:e})=>S({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":S({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${S1.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),rhe=re("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:si,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${S1.multiple}`]:e.multiple}]}})(Tj),bj=({ownerState:t,theme:e})=>S({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${S1.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),ihe=re("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${le(n.variant)}`],n.open&&e.iconOpen]}})(bj),she=w.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,u=se(e,the),c=S({},e,{disabled:i,variant:l,error:s}),d=nhe(c);return I.jsxs(w.Fragment,{children:[I.jsx(rhe,S({ownerState:c,className:ue(d.select,r),disabled:i,ref:a||n},u)),e.multiple?null:I.jsx(ihe,{as:o,ownerState:c,className:d.icon})]})}),ohe=she;var vN;const ahe=["children","classes","className","label","notched"],lhe=re("fieldset",{shouldForwardProp:si})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),uhe=re("legend",{shouldForwardProp:si})(({ownerState:t,theme:e})=>S({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&S({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function che(t){const{className:e,label:n,notched:r}=t,i=se(t,ahe),s=n!=null&&n!=="",o=S({},t,{notched:r,withLabel:s});return I.jsx(lhe,S({"aria-hidden":!0,className:e,ownerState:o},i,{children:I.jsx(uhe,{ownerState:o,children:s?I.jsx("span",{children:n}):vN||(vN=I.jsx("span",{className:"notranslate",children:""}))})}))}const dhe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],hhe=t=>{const{classes:e}=t,r=Ne({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Ole,e);return S({},e,r)},fhe=re(Xv,{shouldForwardProp:t=>si(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Qv})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return S({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Gs.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Gs.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Gs.focused} .${Gs.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${Gs.error} .${Gs.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Gs.disabled} .${Gs.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&S({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),phe=re(che,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),mhe=re(Jv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Yv})(({theme:t,ownerState:e})=>S({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),Sj=w.forwardRef(function(e,n){var r,i,s,o,a;const l=Oe({props:e,name:"MuiOutlinedInput"}),{components:u={},fullWidth:c=!1,inputComponent:d="input",label:h,multiline:f=!1,notched:p,slots:g={},type:v="text"}=l,m=se(l,dhe),_=hhe(l),y=Bc(),E=jc({props:l,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),b=S({},l,{color:E.color||"primary",disabled:E.disabled,error:E.error,focused:E.focused,formControl:y,fullWidth:c,hiddenLabel:E.hiddenLabel,multiline:f,size:E.size,type:v}),C=(r=(i=g.root)!=null?i:u.Root)!=null?r:fhe,T=(s=(o=g.input)!=null?o:u.Input)!=null?s:mhe;return I.jsx(w1,S({slots:{root:C,input:T},renderSuffix:A=>I.jsx(phe,{ownerState:b,className:_.notchedOutline,label:h!=null&&h!==""&&E.required?a||(a=I.jsxs(w.Fragment,{children:[h,"","*"]})):h,notched:typeof p<"u"?p:!!(A.startAdornment||A.filled||A.focused)}),fullWidth:c,inputComponent:d,multiline:f,ref:n,type:v},m,{classes:S({},_,{notchedOutline:null})}))});Sj.muiName="Input";const Cj=Sj;function ghe(t){return Ae("MuiSelect",t)}const vd=Ie("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var wN;const _he=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],yhe=re("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${vd.select}`]:e.select},{[`&.${vd.select}`]:e[n.variant]},{[`&.${vd.error}`]:e.error},{[`&.${vd.multiple}`]:e.multiple}]}})(Tj,{[`&.${vd.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),vhe=re("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${le(n.variant)}`],n.open&&e.iconOpen]}})(bj),whe=re("input",{shouldForwardProp:t=>Yoe(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function EN(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function Ehe(t){return t==null||typeof t=="string"&&!t.trim()}const Ihe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${le(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Ne(a,ghe,e)},The=w.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:u,defaultOpen:c,defaultValue:d,disabled:h,displayEmpty:f,error:p=!1,IconComponent:g,inputRef:v,labelId:m,MenuProps:_={},multiple:y,name:E,onBlur:b,onChange:C,onClose:T,onFocus:A,onOpen:M,open:P,readOnly:L,renderValue:G,SelectDisplayProps:F={},tabIndex:U,value:B,variant:Y="standard"}=e,Z=se(e,_he),[N,z]=QI({controlled:B,default:d,name:"Select"}),[X,ve]=QI({controlled:P,default:c,name:"Select"}),he=w.useRef(null),Be=w.useRef(null),[fe,Pe]=w.useState(null),{current:ke}=w.useRef(P!=null),[yt,Xt]=w.useState(),ht=Mn(n,v),fn=w.useCallback(ce=>{Be.current=ce,ce&&Pe(ce)},[]),De=fe==null?void 0:fe.parentNode;w.useImperativeHandle(ht,()=>({focus:()=>{Be.current.focus()},node:he.current,value:N}),[N]),w.useEffect(()=>{c&&X&&fe&&!ke&&(Xt(a?null:De.clientWidth),Be.current.focus())},[fe,a]),w.useEffect(()=>{o&&Be.current.focus()},[o]),w.useEffect(()=>{if(!m)return;const ce=mr(Be.current).getElementById(m);if(ce){const Qe=()=>{getSelection().isCollapsed&&Be.current.focus()};return ce.addEventListener("click",Qe),()=>{ce.removeEventListener("click",Qe)}}},[m]);const it=(ce,Qe)=>{ce?M&&M(Qe):T&&T(Qe),ke||(Xt(a?null:De.clientWidth),ve(ce))},we=ce=>{ce.button===0&&(ce.preventDefault(),Be.current.focus(),it(!0,ce))},ze=ce=>{it(!1,ce)},Ze=w.Children.toArray(l),xi=ce=>{const Qe=Ze.find(qt=>qt.props.value===ce.target.value);Qe!==void 0&&(z(Qe.props.value),C&&C(ce,Qe))},Jn=ce=>Qe=>{let qt;if(Qe.currentTarget.hasAttribute("tabindex")){if(y){qt=Array.isArray(N)?N.slice():[];const Ml=N.indexOf(ce.props.value);Ml===-1?qt.push(ce.props.value):qt.splice(Ml,1)}else qt=ce.props.value;if(ce.props.onClick&&ce.props.onClick(Qe),N!==qt&&(z(qt),C)){const Ml=Qe.nativeEvent||Qe,iR=new Ml.constructor(Ml.type,Ml);Object.defineProperty(iR,"target",{writable:!0,value:{value:qt,name:E}}),C(iR,ce)}y||it(!1,Qe)}},Zn=ce=>{L||[" ","ArrowUp","ArrowDown","Enter"].indexOf(ce.key)!==-1&&(ce.preventDefault(),it(!0,ce))},Ln=fe!==null&&X,er=ce=>{!Ln&&b&&(Object.defineProperty(ce,"target",{writable:!0,value:{value:N,name:E}}),b(ce))};delete Z["aria-invalid"];let st,x;const q=[];let W=!1;(E_({value:N})||f)&&(G?st=G(N):W=!0);const ne=Ze.map(ce=>{if(!w.isValidElement(ce))return null;let Qe;if(y){if(!Array.isArray(N))throw new Error(Bo(2));Qe=N.some(qt=>EN(qt,ce.props.value)),Qe&&W&&q.push(ce.props.children)}else Qe=EN(N,ce.props.value),Qe&&W&&(x=ce.props.children);return w.cloneElement(ce,{"aria-selected":Qe?"true":"false",onClick:Jn(ce),onKeyUp:qt=>{qt.key===" "&&qt.preventDefault(),ce.props.onKeyUp&&ce.props.onKeyUp(qt)},role:"option",selected:Qe,value:void 0,"data-value":ce.props.value})});W&&(y?q.length===0?st=null:st=q.reduce((ce,Qe,qt)=>(ce.push(Qe),qt<q.length-1&&ce.push(", "),ce),[]):st=x);let pe=yt;!a&&ke&&fe&&(pe=De.clientWidth);let Ee;typeof U<"u"?Ee=U:Ee=h?null:0;const me=F.id||(E?`mui-component-select-${E}`:void 0),oe=S({},e,{variant:Y,value:N,open:Ln,error:p}),vr=Ihe(oe),ss=S({},_.PaperProps,(r=_.slotProps)==null?void 0:r.paper),ia=Ov();return I.jsxs(w.Fragment,{children:[I.jsx(yhe,S({ref:fn,tabIndex:Ee,role:"combobox","aria-controls":ia,"aria-disabled":h?"true":void 0,"aria-expanded":Ln?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[m,me].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Zn,onMouseDown:h||L?null:we,onBlur:er,onFocus:A},F,{ownerState:oe,className:ue(F.className,vr.select,u),id:me,children:Ehe(st)?wN||(wN=I.jsx("span",{className:"notranslate",children:""})):st})),I.jsx(whe,S({"aria-invalid":p,value:Array.isArray(N)?N.join(","):N,name:E,ref:he,"aria-hidden":!0,onChange:xi,tabIndex:-1,disabled:h,className:vr.nativeInput,autoFocus:o,ownerState:oe},Z)),I.jsx(vhe,{as:g,className:vr.icon,ownerState:oe}),I.jsx(Gm,S({id:`menu-${E||""}`,anchorEl:De,open:Ln,onClose:ze,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},_,{MenuListProps:S({"aria-labelledby":m,role:"listbox","aria-multiselectable":y?"true":void 0,disableListWrap:!0,id:ia},_.MenuListProps),slotProps:S({},_.slotProps,{paper:S({},ss,{style:S({minWidth:pe},ss!=null?ss.style:null)})}),children:ne}))]})}),bhe=The,She=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Che=["root"],Rhe=t=>{const{classes:e}=t;return e},C1={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>si(t)&&t!=="variant",slot:"Root"},xhe=re(wj,C1)(""),Ahe=re(Cj,C1)(""),Phe=re(gj,C1)(""),Rj=w.forwardRef(function(e,n){const r=Oe({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:u=!1,IconComponent:c=$le,id:d,input:h,inputProps:f,label:p,labelId:g,MenuProps:v,multiple:m=!1,native:_=!1,onClose:y,onOpen:E,open:b,renderValue:C,SelectDisplayProps:T,variant:A="outlined"}=r,M=se(r,She),P=_?ohe:bhe,L=Bc(),G=jc({props:r,muiFormControl:L,states:["variant","error"]}),F=G.variant||A,U=S({},r,{variant:F,classes:o}),B=Rhe(U),Y=se(B,Che),Z=h||{standard:I.jsx(xhe,{ownerState:U}),outlined:I.jsx(Ahe,{label:p,ownerState:U}),filled:I.jsx(Phe,{ownerState:U})}[F],N=Mn(n,Z.ref);return I.jsx(w.Fragment,{children:w.cloneElement(Z,S({inputComponent:P,inputProps:S({children:s,error:G.error,IconComponent:c,variant:F,type:void 0,multiple:m},_?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:u,labelId:g,MenuProps:v,onClose:y,onOpen:E,open:b,renderValue:C,SelectDisplayProps:S({id:d},T)},f,{classes:f?pr(Y,f.classes):Y},h?h.props.inputProps:{})},m&&_&&F==="outlined"?{notched:!0}:{},{ref:N,className:ue(Z.props.className,a,B.root)},!h&&{variant:F},M))})});Rj.muiName="Select";const khe=Rj;function Nhe(t){return Ae("MuiToolbar",t)}Ie("MuiToolbar",["root","gutters","regular","dense"]);const Ohe=["className","component","disableGutters","variant"],Dhe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Ne({root:["root",!n&&"gutters",r]},Nhe,e)},Mhe=re("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>S({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),Lhe=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:o=!1,variant:a="regular"}=r,l=se(r,Ohe),u=S({},r,{component:s,disableGutters:o,variant:a}),c=Dhe(u);return I.jsx(Mhe,S({as:s,className:ue(c.root,i),ref:n,ownerState:u},l))}),$he=Lhe;function Fhe(t){return Ae("MuiTextField",t)}Ie("MuiTextField",["root"]);const Vhe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Uhe={standard:wj,filled:gj,outlined:Cj},jhe=t=>{const{classes:e}=t;return Ne({root:["root"]},Fhe,e)},Bhe=re(Cce,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),zhe=w.forwardRef(function(e,n){const r=Oe({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:u,disabled:c=!1,error:d=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:p,id:g,InputLabelProps:v,inputProps:m,InputProps:_,inputRef:y,label:E,maxRows:b,minRows:C,multiline:T=!1,name:A,onBlur:M,onChange:P,onFocus:L,placeholder:G,required:F=!1,rows:U,select:B=!1,SelectProps:Y,type:Z,value:N,variant:z="outlined"}=r,X=se(r,Vhe),ve=S({},r,{autoFocus:s,color:l,disabled:c,error:d,fullWidth:f,multiline:T,required:F,select:B,variant:z}),he=jhe(ve),Be={};z==="outlined"&&(v&&typeof v.shrink<"u"&&(Be.notched=v.shrink),Be.label=E),B&&((!Y||!Y.native)&&(Be.id=void 0),Be["aria-describedby"]=void 0);const fe=Ov(g),Pe=p&&fe?`${fe}-helper-text`:void 0,ke=E&&fe?`${fe}-label`:void 0,yt=Uhe[z],Xt=I.jsx(yt,S({"aria-describedby":Pe,autoComplete:i,autoFocus:s,defaultValue:u,fullWidth:f,multiline:T,name:A,rows:U,maxRows:b,minRows:C,type:Z,value:N,id:fe,inputRef:y,onBlur:M,onChange:P,onFocus:L,placeholder:G,inputProps:m},Be,_));return I.jsxs(Bhe,S({className:ue(he.root,a),disabled:c,error:d,fullWidth:f,ref:n,required:F,color:l,variant:z,ownerState:ve},X,{children:[E!=null&&E!==""&&I.jsx(mde,S({htmlFor:fe,id:ke},v,{children:E})),B?I.jsx(khe,S({"aria-describedby":Pe,id:fe,labelId:ke,value:N,input:Xt},Y,{children:o})):Xt,p&&I.jsx(Oce,S({id:Pe},h,{children:p}))]}))}),Xr=zhe,Whe=()=>{const t=mp(),[e,n]=w.useState(!1),r=i=>{i.target.files&&i.target.files.length>0&&(n(!0),t(pre(i.target.files[0])).then(()=>n(!1)))};return I.jsxs(I.Fragment,{children:[I.jsx(Xr,{onChange:r,type:"file"}),e&&I.jsx(hj,{})]})},qhe=()=>{const t=Ii(f=>f.upload.uploadImg),[e,n]=w.useState(""),[r,i]=w.useState(""),[s,o]=w.useState(""),a=f=>{n(f.currentTarget.value)},l=f=>{i(f.currentTarget.value)},u=f=>{o(f.currentTarget.value)},c=mp(),d=KC(),h=()=>{const f={id:d,name:e,photo:t,price:+r,quantity:+s};c(jm(f))};return I.jsx(I.Fragment,{children:I.jsx(Tp,{children:I.jsxs(bp,{children:[I.jsx(We,{component:"div",sx:{flexGrow:1},variant:"h6",children:"Add product"}),I.jsxs(We,{component:"div",sx:{flexGrow:1},variant:"h6",children:["Name product: ",I.jsx(Xr,{onChange:a})]}),I.jsxs(We,{component:"div",sx:{flexGrow:1},variant:"h6",children:["Price product: ",I.jsx(Xr,{onChange:l})]}),I.jsxs(We,{component:"div",sx:{flexGrow:1},variant:"h6",children:["Quantity product: ",I.jsx(Xr,{onChange:u})]}),I.jsxs(We,{component:"div",sx:{flexGrow:1},variant:"h6",children:["Image product: ",I.jsx(Whe,{})]}),I.jsx(gr,{component:Xa,onClick:h,to:"/",variant:"contained",children:"Add product"})]})})})};var Hhe=function(e){return Ghe(e)&&!Khe(e)};function Ghe(t){return!!t&&typeof t=="object"}function Khe(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||Xhe(t)}var Qhe=typeof Symbol=="function"&&Symbol.for,Yhe=Qhe?Symbol.for("react.element"):60103;function Xhe(t){return t.$$typeof===Yhe}function Jhe(t){return Array.isArray(t)?[]:{}}function I_(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Cf(Jhe(t),t,e):t}function Zhe(t,e,n){return t.concat(e).map(function(r){return I_(r,n)})}function efe(t,e,n){var r={};return n.isMergeableObject(t)&&Object.keys(t).forEach(function(i){r[i]=I_(t[i],n)}),Object.keys(e).forEach(function(i){!n.isMergeableObject(e[i])||!t[i]?r[i]=I_(e[i],n):r[i]=Cf(t[i],e[i],n)}),r}function Cf(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||Zhe,n.isMergeableObject=n.isMergeableObject||Hhe;var r=Array.isArray(e),i=Array.isArray(t),s=r===i;return s?r?n.arrayMerge(t,e,n):efe(t,e,n):I_(e,n)}Cf.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return Cf(r,i,n)},{})};var rT=Cf,xj=typeof global=="object"&&global&&global.Object===Object&&global,tfe=typeof self=="object"&&self&&self.Object===Object&&self,is=xj||tfe||Function("return this")(),qo=is.Symbol,Aj=Object.prototype,nfe=Aj.hasOwnProperty,rfe=Aj.toString,wd=qo?qo.toStringTag:void 0;function ife(t){var e=nfe.call(t,wd),n=t[wd];try{t[wd]=void 0;var r=!0}catch{}var i=rfe.call(t);return r&&(e?t[wd]=n:delete t[wd]),i}var sfe=Object.prototype,ofe=sfe.toString;function afe(t){return ofe.call(t)}var lfe="[object Null]",ufe="[object Undefined]",IN=qo?qo.toStringTag:void 0;function Pl(t){return t==null?t===void 0?ufe:lfe:IN&&IN in Object(t)?ife(t):afe(t)}function Pj(t,e){return function(n){return t(e(n))}}var R1=Pj(Object.getPrototypeOf,Object);function kl(t){return t!=null&&typeof t=="object"}var cfe="[object Object]",dfe=Function.prototype,hfe=Object.prototype,kj=dfe.toString,ffe=hfe.hasOwnProperty,pfe=kj.call(Object);function TN(t){if(!kl(t)||Pl(t)!=cfe)return!1;var e=R1(t);if(e===null)return!0;var n=ffe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&kj.call(n)==pfe}var bN=Array.isArray,SN=Object.keys,mfe=Object.prototype.hasOwnProperty,gfe=typeof Element<"u";function iT(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=bN(t),r=bN(e),i,s,o;if(n&&r){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!iT(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var a=t instanceof Date,l=e instanceof Date;if(a!=l)return!1;if(a&&l)return t.getTime()==e.getTime();var u=t instanceof RegExp,c=e instanceof RegExp;if(u!=c)return!1;if(u&&c)return t.toString()==e.toString();var d=SN(t);if(s=d.length,s!==SN(e).length)return!1;for(i=s;i--!==0;)if(!mfe.call(e,d[i]))return!1;if(gfe&&t instanceof Element&&e instanceof Element)return t===e;for(i=s;i--!==0;)if(o=d[i],!(o==="_owner"&&t.$$typeof)&&!iT(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}var _fe=function(e,n){try{return iT(e,n)}catch(r){if(r.message&&r.message.match(/stack|recursion/i)||r.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",r.name,r.message),!1;throw r}};const ga=S_(_fe);function yfe(){this.__data__=[],this.size=0}function Nj(t,e){return t===e||t!==t&&e!==e}function e0(t,e){for(var n=t.length;n--;)if(Nj(t[n][0],e))return n;return-1}var vfe=Array.prototype,wfe=vfe.splice;function Efe(t){var e=this.__data__,n=e0(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():wfe.call(e,n,1),--this.size,!0}function Ife(t){var e=this.__data__,n=e0(e,t);return n<0?void 0:e[n][1]}function Tfe(t){return e0(this.__data__,t)>-1}function bfe(t,e){var n=this.__data__,r=e0(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function js(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}js.prototype.clear=yfe;js.prototype.delete=Efe;js.prototype.get=Ife;js.prototype.has=Tfe;js.prototype.set=bfe;function Sfe(){this.__data__=new js,this.size=0}function Cfe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Rfe(t){return this.__data__.get(t)}function xfe(t){return this.__data__.has(t)}function Sp(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Afe="[object AsyncFunction]",Pfe="[object Function]",kfe="[object GeneratorFunction]",Nfe="[object Proxy]";function Oj(t){if(!Sp(t))return!1;var e=Pl(t);return e==Pfe||e==kfe||e==Afe||e==Nfe}var Aw=is["__core-js_shared__"],CN=function(){var t=/[^.]+$/.exec(Aw&&Aw.keys&&Aw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ofe(t){return!!CN&&CN in t}var Dfe=Function.prototype,Mfe=Dfe.toString;function Nl(t){if(t!=null){try{return Mfe.call(t)}catch{}try{return t+""}catch{}}return""}var Lfe=/[\\^$.*+?()[\]{}|]/g,$fe=/^\[object .+?Constructor\]$/,Ffe=Function.prototype,Vfe=Object.prototype,Ufe=Ffe.toString,jfe=Vfe.hasOwnProperty,Bfe=RegExp("^"+Ufe.call(jfe).replace(Lfe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zfe(t){if(!Sp(t)||Ofe(t))return!1;var e=Oj(t)?Bfe:$fe;return e.test(Nl(t))}function Wfe(t,e){return t==null?void 0:t[e]}function Ol(t,e){var n=Wfe(t,e);return zfe(n)?n:void 0}var Rf=Ol(is,"Map"),xf=Ol(Object,"create");function qfe(){this.__data__=xf?xf(null):{},this.size=0}function Hfe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Gfe="__lodash_hash_undefined__",Kfe=Object.prototype,Qfe=Kfe.hasOwnProperty;function Yfe(t){var e=this.__data__;if(xf){var n=e[t];return n===Gfe?void 0:n}return Qfe.call(e,t)?e[t]:void 0}var Xfe=Object.prototype,Jfe=Xfe.hasOwnProperty;function Zfe(t){var e=this.__data__;return xf?e[t]!==void 0:Jfe.call(e,t)}var epe="__lodash_hash_undefined__";function tpe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=xf&&e===void 0?epe:e,this}function ml(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ml.prototype.clear=qfe;ml.prototype.delete=Hfe;ml.prototype.get=Yfe;ml.prototype.has=Zfe;ml.prototype.set=tpe;function npe(){this.size=0,this.__data__={hash:new ml,map:new(Rf||js),string:new ml}}function rpe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function t0(t,e){var n=t.__data__;return rpe(e)?n[typeof e=="string"?"string":"hash"]:n.map}function ipe(t){var e=t0(this,t).delete(t);return this.size-=e?1:0,e}function spe(t){return t0(this,t).get(t)}function ope(t){return t0(this,t).has(t)}function ape(t,e){var n=t0(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function na(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}na.prototype.clear=npe;na.prototype.delete=ipe;na.prototype.get=spe;na.prototype.has=ope;na.prototype.set=ape;var lpe=200;function upe(t,e){var n=this.__data__;if(n instanceof js){var r=n.__data__;if(!Rf||r.length<lpe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new na(r)}return n.set(t,e),this.size=n.size,this}function zc(t){var e=this.__data__=new js(t);this.size=e.size}zc.prototype.clear=Sfe;zc.prototype.delete=Cfe;zc.prototype.get=Rfe;zc.prototype.has=xfe;zc.prototype.set=upe;function cpe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var RN=function(){try{var t=Ol(Object,"defineProperty");return t({},"",{}),t}catch{}}();function Dj(t,e,n){e=="__proto__"&&RN?RN(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var dpe=Object.prototype,hpe=dpe.hasOwnProperty;function Mj(t,e,n){var r=t[e];(!(hpe.call(t,e)&&Nj(r,n))||n===void 0&&!(e in t))&&Dj(t,e,n)}function n0(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?Dj(n,a,l):Mj(n,a,l)}return n}function fpe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var ppe="[object Arguments]";function xN(t){return kl(t)&&Pl(t)==ppe}var Lj=Object.prototype,mpe=Lj.hasOwnProperty,gpe=Lj.propertyIsEnumerable,_pe=xN(function(){return arguments}())?xN:function(t){return kl(t)&&mpe.call(t,"callee")&&!gpe.call(t,"callee")},Cp=Array.isArray;function ype(){return!1}var $j=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,AN=$j&&typeof Pr=="object"&&Pr&&!Pr.nodeType&&Pr,vpe=AN&&AN.exports===$j,PN=vpe?is.Buffer:void 0,wpe=PN?PN.isBuffer:void 0,Fj=wpe||ype,Epe=9007199254740991,Ipe=/^(?:0|[1-9]\d*)$/;function Tpe(t,e){var n=typeof t;return e=e??Epe,!!e&&(n=="number"||n!="symbol"&&Ipe.test(t))&&t>-1&&t%1==0&&t<e}var bpe=9007199254740991;function Vj(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bpe}var Spe="[object Arguments]",Cpe="[object Array]",Rpe="[object Boolean]",xpe="[object Date]",Ape="[object Error]",Ppe="[object Function]",kpe="[object Map]",Npe="[object Number]",Ope="[object Object]",Dpe="[object RegExp]",Mpe="[object Set]",Lpe="[object String]",$pe="[object WeakMap]",Fpe="[object ArrayBuffer]",Vpe="[object DataView]",Upe="[object Float32Array]",jpe="[object Float64Array]",Bpe="[object Int8Array]",zpe="[object Int16Array]",Wpe="[object Int32Array]",qpe="[object Uint8Array]",Hpe="[object Uint8ClampedArray]",Gpe="[object Uint16Array]",Kpe="[object Uint32Array]",at={};at[Upe]=at[jpe]=at[Bpe]=at[zpe]=at[Wpe]=at[qpe]=at[Hpe]=at[Gpe]=at[Kpe]=!0;at[Spe]=at[Cpe]=at[Fpe]=at[Rpe]=at[Vpe]=at[xpe]=at[Ape]=at[Ppe]=at[kpe]=at[Npe]=at[Ope]=at[Dpe]=at[Mpe]=at[Lpe]=at[$pe]=!1;function Qpe(t){return kl(t)&&Vj(t.length)&&!!at[Pl(t)]}function x1(t){return function(e){return t(e)}}var Uj=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,ch=Uj&&typeof Pr=="object"&&Pr&&!Pr.nodeType&&Pr,Ype=ch&&ch.exports===Uj,Pw=Ype&&xj.process,gc=function(){try{var t=ch&&ch.require&&ch.require("util").types;return t||Pw&&Pw.binding&&Pw.binding("util")}catch{}}(),kN=gc&&gc.isTypedArray,Xpe=kN?x1(kN):Qpe,Jpe=Object.prototype,Zpe=Jpe.hasOwnProperty;function jj(t,e){var n=Cp(t),r=!n&&_pe(t),i=!n&&!r&&Fj(t),s=!n&&!r&&!i&&Xpe(t),o=n||r||i||s,a=o?fpe(t.length,String):[],l=a.length;for(var u in t)(e||Zpe.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Tpe(u,l)))&&a.push(u);return a}var eme=Object.prototype;function A1(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||eme;return t===n}var tme=Pj(Object.keys,Object),nme=Object.prototype,rme=nme.hasOwnProperty;function ime(t){if(!A1(t))return tme(t);var e=[];for(var n in Object(t))rme.call(t,n)&&n!="constructor"&&e.push(n);return e}function Bj(t){return t!=null&&Vj(t.length)&&!Oj(t)}function P1(t){return Bj(t)?jj(t):ime(t)}function sme(t,e){return t&&n0(e,P1(e),t)}function ome(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var ame=Object.prototype,lme=ame.hasOwnProperty;function ume(t){if(!Sp(t))return ome(t);var e=A1(t),n=[];for(var r in t)r=="constructor"&&(e||!lme.call(t,r))||n.push(r);return n}function k1(t){return Bj(t)?jj(t,!0):ume(t)}function cme(t,e){return t&&n0(e,k1(e),t)}var zj=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,NN=zj&&typeof Pr=="object"&&Pr&&!Pr.nodeType&&Pr,dme=NN&&NN.exports===zj,ON=dme?is.Buffer:void 0,DN=ON?ON.allocUnsafe:void 0;function hme(t,e){if(e)return t.slice();var n=t.length,r=DN?DN(n):new t.constructor(n);return t.copy(r),r}function Wj(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function fme(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function qj(){return[]}var pme=Object.prototype,mme=pme.propertyIsEnumerable,MN=Object.getOwnPropertySymbols,N1=MN?function(t){return t==null?[]:(t=Object(t),fme(MN(t),function(e){return mme.call(t,e)}))}:qj;function gme(t,e){return n0(t,N1(t),e)}function Hj(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var _me=Object.getOwnPropertySymbols,Gj=_me?function(t){for(var e=[];t;)Hj(e,N1(t)),t=R1(t);return e}:qj;function yme(t,e){return n0(t,Gj(t),e)}function Kj(t,e,n){var r=e(t);return Cp(t)?r:Hj(r,n(t))}function vme(t){return Kj(t,P1,N1)}function wme(t){return Kj(t,k1,Gj)}var sT=Ol(is,"DataView"),oT=Ol(is,"Promise"),aT=Ol(is,"Set"),lT=Ol(is,"WeakMap"),LN="[object Map]",Eme="[object Object]",$N="[object Promise]",FN="[object Set]",VN="[object WeakMap]",UN="[object DataView]",Ime=Nl(sT),Tme=Nl(Rf),bme=Nl(oT),Sme=Nl(aT),Cme=Nl(lT),_a=Pl;(sT&&_a(new sT(new ArrayBuffer(1)))!=UN||Rf&&_a(new Rf)!=LN||oT&&_a(oT.resolve())!=$N||aT&&_a(new aT)!=FN||lT&&_a(new lT)!=VN)&&(_a=function(t){var e=Pl(t),n=e==Eme?t.constructor:void 0,r=n?Nl(n):"";if(r)switch(r){case Ime:return UN;case Tme:return LN;case bme:return $N;case Sme:return FN;case Cme:return VN}return e});const O1=_a;var Rme=Object.prototype,xme=Rme.hasOwnProperty;function Ame(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&xme.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var jN=is.Uint8Array;function D1(t){var e=new t.constructor(t.byteLength);return new jN(e).set(new jN(t)),e}function Pme(t,e){var n=e?D1(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var kme=/\w*$/;function Nme(t){var e=new t.constructor(t.source,kme.exec(t));return e.lastIndex=t.lastIndex,e}var BN=qo?qo.prototype:void 0,zN=BN?BN.valueOf:void 0;function Ome(t){return zN?Object(zN.call(t)):{}}function Dme(t,e){var n=e?D1(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Mme="[object Boolean]",Lme="[object Date]",$me="[object Map]",Fme="[object Number]",Vme="[object RegExp]",Ume="[object Set]",jme="[object String]",Bme="[object Symbol]",zme="[object ArrayBuffer]",Wme="[object DataView]",qme="[object Float32Array]",Hme="[object Float64Array]",Gme="[object Int8Array]",Kme="[object Int16Array]",Qme="[object Int32Array]",Yme="[object Uint8Array]",Xme="[object Uint8ClampedArray]",Jme="[object Uint16Array]",Zme="[object Uint32Array]";function ege(t,e,n){var r=t.constructor;switch(e){case zme:return D1(t);case Mme:case Lme:return new r(+t);case Wme:return Pme(t,n);case qme:case Hme:case Gme:case Kme:case Qme:case Yme:case Xme:case Jme:case Zme:return Dme(t,n);case $me:return new r;case Fme:case jme:return new r(t);case Vme:return Nme(t);case Ume:return new r;case Bme:return Ome(t)}}var WN=Object.create,tge=function(){function t(){}return function(e){if(!Sp(e))return{};if(WN)return WN(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function nge(t){return typeof t.constructor=="function"&&!A1(t)?tge(R1(t)):{}}var rge="[object Map]";function ige(t){return kl(t)&&O1(t)==rge}var qN=gc&&gc.isMap,sge=qN?x1(qN):ige,oge="[object Set]";function age(t){return kl(t)&&O1(t)==oge}var HN=gc&&gc.isSet,lge=HN?x1(HN):age,uge=1,cge=2,dge=4,Qj="[object Arguments]",hge="[object Array]",fge="[object Boolean]",pge="[object Date]",mge="[object Error]",Yj="[object Function]",gge="[object GeneratorFunction]",_ge="[object Map]",yge="[object Number]",Xj="[object Object]",vge="[object RegExp]",wge="[object Set]",Ege="[object String]",Ige="[object Symbol]",Tge="[object WeakMap]",bge="[object ArrayBuffer]",Sge="[object DataView]",Cge="[object Float32Array]",Rge="[object Float64Array]",xge="[object Int8Array]",Age="[object Int16Array]",Pge="[object Int32Array]",kge="[object Uint8Array]",Nge="[object Uint8ClampedArray]",Oge="[object Uint16Array]",Dge="[object Uint32Array]",et={};et[Qj]=et[hge]=et[bge]=et[Sge]=et[fge]=et[pge]=et[Cge]=et[Rge]=et[xge]=et[Age]=et[Pge]=et[_ge]=et[yge]=et[Xj]=et[vge]=et[wge]=et[Ege]=et[Ige]=et[kge]=et[Nge]=et[Oge]=et[Dge]=!0;et[mge]=et[Yj]=et[Tge]=!1;function Km(t,e,n,r,i,s){var o,a=e&uge,l=e&cge,u=e&dge;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!Sp(t))return t;var c=Cp(t);if(c){if(o=Ame(t),!a)return Wj(t,o)}else{var d=O1(t),h=d==Yj||d==gge;if(Fj(t))return hme(t,a);if(d==Xj||d==Qj||h&&!i){if(o=l||h?{}:nge(t),!a)return l?yme(t,cme(o,t)):gme(t,sme(o,t))}else{if(!et[d])return i?t:{};o=ege(t,d,a)}}s||(s=new zc);var f=s.get(t);if(f)return f;s.set(t,o),lge(t)?t.forEach(function(v){o.add(Km(v,e,n,v,t,s))}):sge(t)&&t.forEach(function(v,m){o.set(m,Km(v,e,n,m,t,s))});var p=u?l?wme:vme:l?k1:P1,g=c?void 0:p(t);return cpe(g||t,function(v,m){g&&(m=v,v=t[m]),Mj(o,m,Km(v,e,n,m,t,s))}),o}var Mge=4;function GN(t){return Km(t,Mge)}function Jj(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Lge="[object Symbol]";function M1(t){return typeof t=="symbol"||kl(t)&&Pl(t)==Lge}var $ge="Expected a function";function L1(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError($ge);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(L1.Cache||na),n}L1.Cache=na;var Fge=500;function Vge(t){var e=L1(t,function(r){return n.size===Fge&&n.clear(),r}),n=e.cache;return e}var Uge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jge=/\\(\\)?/g,Bge=Vge(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Uge,function(n,r,i,s){e.push(i?s.replace(jge,"$1"):r||n)}),e});const zge=Bge;var Wge=1/0;function qge(t){if(typeof t=="string"||M1(t))return t;var e=t+"";return e=="0"&&1/t==-Wge?"-0":e}var Hge=1/0,KN=qo?qo.prototype:void 0,QN=KN?KN.toString:void 0;function Zj(t){if(typeof t=="string")return t;if(Cp(t))return Jj(t,Zj)+"";if(M1(t))return QN?QN.call(t):"";var e=t+"";return e=="0"&&1/t==-Hge?"-0":e}function Gge(t){return t==null?"":Zj(t)}function eB(t){return Cp(t)?Jj(t,qge):M1(t)?[t]:Wj(zge(Gge(t)))}function Jt(){return Jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jt.apply(this,arguments)}function tB(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var r0=w.createContext(void 0);r0.displayName="FormikContext";r0.Provider;r0.Consumer;function Kge(){var t=w.useContext(r0);return t}var li=function(e){return typeof e=="function"},i0=function(e){return e!==null&&typeof e=="object"},Qge=function(e){return String(Math.floor(Number(e)))===e},kw=function(e){return Object.prototype.toString.call(e)==="[object String]"},Nw=function(e){return i0(e)&&li(e.then)};function wr(t,e,n,r){r===void 0&&(r=0);for(var i=eB(e);t&&r<i.length;)t=t[i[r++]];return r!==i.length&&!t||t===void 0?n:t}function Wa(t,e,n){for(var r=GN(t),i=r,s=0,o=eB(e);s<o.length-1;s++){var a=o[s],l=wr(t,o.slice(0,s+1));if(l&&(i0(l)||Array.isArray(l)))i=i[a]=GN(l);else{var u=o[s+1];i=i[a]=Qge(u)&&Number(u)>=0?[]:{}}}return(s===0?t:i)[o[s]]===n?t:(n===void 0?delete i[o[s]]:i[o[s]]=n,s===0&&n===void 0&&delete r[o[s]],r)}function nB(t,e,n,r){n===void 0&&(n=new WeakMap),r===void 0&&(r={});for(var i=0,s=Object.keys(t);i<s.length;i++){var o=s[i],a=t[o];i0(a)?n.get(a)||(n.set(a,!0),r[o]=Array.isArray(a)?[]:{},nB(a,e,n,r[o])):r[o]=e}return r}function Yge(t,e){switch(e.type){case"SET_VALUES":return Jt({},t,{values:e.payload});case"SET_TOUCHED":return Jt({},t,{touched:e.payload});case"SET_ERRORS":return ga(t.errors,e.payload)?t:Jt({},t,{errors:e.payload});case"SET_STATUS":return Jt({},t,{status:e.payload});case"SET_ISSUBMITTING":return Jt({},t,{isSubmitting:e.payload});case"SET_ISVALIDATING":return Jt({},t,{isValidating:e.payload});case"SET_FIELD_VALUE":return Jt({},t,{values:Wa(t.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return Jt({},t,{touched:Wa(t.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return Jt({},t,{errors:Wa(t.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return Jt({},t,e.payload);case"SET_FORMIK_STATE":return e.payload(t);case"SUBMIT_ATTEMPT":return Jt({},t,{touched:nB(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return Jt({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Jt({},t,{isSubmitting:!1});default:return t}}var aa={},fm={};function $1(t){var e=t.validateOnChange,n=e===void 0?!0:e,r=t.validateOnBlur,i=r===void 0?!0:r,s=t.validateOnMount,o=s===void 0?!1:s,a=t.isInitialValid,l=t.enableReinitialize,u=l===void 0?!1:l,c=t.onSubmit,d=tB(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),h=Jt({validateOnChange:n,validateOnBlur:i,validateOnMount:o,onSubmit:c},d),f=w.useRef(h.initialValues),p=w.useRef(h.initialErrors||aa),g=w.useRef(h.initialTouched||fm),v=w.useRef(h.initialStatus),m=w.useRef(!1),_=w.useRef({});w.useEffect(function(){return m.current=!0,function(){m.current=!1}},[]);var y=w.useState(0),E=y[1],b=w.useRef({values:h.initialValues,errors:h.initialErrors||aa,touched:h.initialTouched||fm,status:h.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),C=b.current,T=w.useCallback(function(x){var q=b.current;b.current=Yge(q,x),q!==b.current&&E(function(W){return W+1})},[]),A=w.useCallback(function(x,q){return new Promise(function(W,ne){var pe=h.validate(x,q);pe==null?W(aa):Nw(pe)?pe.then(function(Ee){W(Ee||aa)},function(Ee){ne(Ee)}):W(pe)})},[h.validate]),M=w.useCallback(function(x,q){var W=h.validationSchema,ne=li(W)?W(q):W,pe=q&&ne.validateAt?ne.validateAt(q,x):Jge(x,ne);return new Promise(function(Ee,me){pe.then(function(){Ee(aa)},function(oe){oe.name==="ValidationError"?Ee(Xge(oe)):me(oe)})})},[h.validationSchema]),P=w.useCallback(function(x,q){return new Promise(function(W){return W(_.current[x].validate(q))})},[]),L=w.useCallback(function(x){var q=Object.keys(_.current).filter(function(ne){return li(_.current[ne].validate)}),W=q.length>0?q.map(function(ne){return P(ne,wr(x,ne))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(W).then(function(ne){return ne.reduce(function(pe,Ee,me){return Ee==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Ee&&(pe=Wa(pe,q[me],Ee)),pe},{})})},[P]),G=w.useCallback(function(x){return Promise.all([L(x),h.validationSchema?M(x):{},h.validate?A(x):{}]).then(function(q){var W=q[0],ne=q[1],pe=q[2],Ee=rT.all([W,ne,pe],{arrayMerge:Zge});return Ee})},[h.validate,h.validationSchema,L,A,M]),F=jr(function(x){return x===void 0&&(x=C.values),T({type:"SET_ISVALIDATING",payload:!0}),G(x).then(function(q){return m.current&&(T({type:"SET_ISVALIDATING",payload:!1}),T({type:"SET_ERRORS",payload:q})),q})});w.useEffect(function(){o&&m.current===!0&&ga(f.current,h.initialValues)&&F(f.current)},[o,F]);var U=w.useCallback(function(x){var q=x&&x.values?x.values:f.current,W=x&&x.errors?x.errors:p.current?p.current:h.initialErrors||{},ne=x&&x.touched?x.touched:g.current?g.current:h.initialTouched||{},pe=x&&x.status?x.status:v.current?v.current:h.initialStatus;f.current=q,p.current=W,g.current=ne,v.current=pe;var Ee=function(){T({type:"RESET_FORM",payload:{isSubmitting:!!x&&!!x.isSubmitting,errors:W,touched:ne,status:pe,values:q,isValidating:!!x&&!!x.isValidating,submitCount:x&&x.submitCount&&typeof x.submitCount=="number"?x.submitCount:0}})};if(h.onReset){var me=h.onReset(C.values,we);Nw(me)?me.then(Ee):Ee()}else Ee()},[h.initialErrors,h.initialStatus,h.initialTouched,h.onReset]);w.useEffect(function(){m.current===!0&&!ga(f.current,h.initialValues)&&u&&(f.current=h.initialValues,U(),o&&F(f.current))},[u,h.initialValues,U,o,F]),w.useEffect(function(){u&&m.current===!0&&!ga(p.current,h.initialErrors)&&(p.current=h.initialErrors||aa,T({type:"SET_ERRORS",payload:h.initialErrors||aa}))},[u,h.initialErrors]),w.useEffect(function(){u&&m.current===!0&&!ga(g.current,h.initialTouched)&&(g.current=h.initialTouched||fm,T({type:"SET_TOUCHED",payload:h.initialTouched||fm}))},[u,h.initialTouched]),w.useEffect(function(){u&&m.current===!0&&!ga(v.current,h.initialStatus)&&(v.current=h.initialStatus,T({type:"SET_STATUS",payload:h.initialStatus}))},[u,h.initialStatus,h.initialTouched]);var B=jr(function(x){if(_.current[x]&&li(_.current[x].validate)){var q=wr(C.values,x),W=_.current[x].validate(q);return Nw(W)?(T({type:"SET_ISVALIDATING",payload:!0}),W.then(function(ne){return ne}).then(function(ne){T({type:"SET_FIELD_ERROR",payload:{field:x,value:ne}}),T({type:"SET_ISVALIDATING",payload:!1})})):(T({type:"SET_FIELD_ERROR",payload:{field:x,value:W}}),Promise.resolve(W))}else if(h.validationSchema)return T({type:"SET_ISVALIDATING",payload:!0}),M(C.values,x).then(function(ne){return ne}).then(function(ne){T({type:"SET_FIELD_ERROR",payload:{field:x,value:wr(ne,x)}}),T({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Y=w.useCallback(function(x,q){var W=q.validate;_.current[x]={validate:W}},[]),Z=w.useCallback(function(x){delete _.current[x]},[]),N=jr(function(x,q){T({type:"SET_TOUCHED",payload:x});var W=q===void 0?i:q;return W?F(C.values):Promise.resolve()}),z=w.useCallback(function(x){T({type:"SET_ERRORS",payload:x})},[]),X=jr(function(x,q){var W=li(x)?x(C.values):x;T({type:"SET_VALUES",payload:W});var ne=q===void 0?n:q;return ne?F(W):Promise.resolve()}),ve=w.useCallback(function(x,q){T({type:"SET_FIELD_ERROR",payload:{field:x,value:q}})},[]),he=jr(function(x,q,W){T({type:"SET_FIELD_VALUE",payload:{field:x,value:q}});var ne=W===void 0?n:W;return ne?F(Wa(C.values,x,q)):Promise.resolve()}),Be=w.useCallback(function(x,q){var W=q,ne=x,pe;if(!kw(x)){x.persist&&x.persist();var Ee=x.target?x.target:x.currentTarget,me=Ee.type,oe=Ee.name,vr=Ee.id,ss=Ee.value,ia=Ee.checked,ce=Ee.outerHTML,Qe=Ee.options,qt=Ee.multiple;W=q||oe||vr,ne=/number|range/.test(me)?(pe=parseFloat(ss),isNaN(pe)?"":pe):/checkbox/.test(me)?t_e(wr(C.values,W),ia,ss):Qe&&qt?e_e(Qe):ss}W&&he(W,ne)},[he,C.values]),fe=jr(function(x){if(kw(x))return function(q){return Be(q,x)};Be(x)}),Pe=jr(function(x,q,W){q===void 0&&(q=!0),T({type:"SET_FIELD_TOUCHED",payload:{field:x,value:q}});var ne=W===void 0?i:W;return ne?F(C.values):Promise.resolve()}),ke=w.useCallback(function(x,q){x.persist&&x.persist();var W=x.target,ne=W.name,pe=W.id,Ee=W.outerHTML,me=q||ne||pe;Pe(me,!0)},[Pe]),yt=jr(function(x){if(kw(x))return function(q){return ke(q,x)};ke(x)}),Xt=w.useCallback(function(x){li(x)?T({type:"SET_FORMIK_STATE",payload:x}):T({type:"SET_FORMIK_STATE",payload:function(){return x}})},[]),ht=w.useCallback(function(x){T({type:"SET_STATUS",payload:x})},[]),fn=w.useCallback(function(x){T({type:"SET_ISSUBMITTING",payload:x})},[]),De=jr(function(){return T({type:"SUBMIT_ATTEMPT"}),F().then(function(x){var q=x instanceof Error,W=!q&&Object.keys(x).length===0;if(W){var ne;try{if(ne=ze(),ne===void 0)return}catch(pe){throw pe}return Promise.resolve(ne).then(function(pe){return m.current&&T({type:"SUBMIT_SUCCESS"}),pe}).catch(function(pe){if(m.current)throw T({type:"SUBMIT_FAILURE"}),pe})}else if(m.current&&(T({type:"SUBMIT_FAILURE"}),q))throw x})}),it=jr(function(x){x&&x.preventDefault&&li(x.preventDefault)&&x.preventDefault(),x&&x.stopPropagation&&li(x.stopPropagation)&&x.stopPropagation(),De().catch(function(q){console.warn("Warning: An unhandled error was caught from submitForm()",q)})}),we={resetForm:U,validateForm:F,validateField:B,setErrors:z,setFieldError:ve,setFieldTouched:Pe,setFieldValue:he,setStatus:ht,setSubmitting:fn,setTouched:N,setValues:X,setFormikState:Xt,submitForm:De},ze=jr(function(){return c(C.values,we)}),Ze=jr(function(x){x&&x.preventDefault&&li(x.preventDefault)&&x.preventDefault(),x&&x.stopPropagation&&li(x.stopPropagation)&&x.stopPropagation(),U()}),xi=w.useCallback(function(x){return{value:wr(C.values,x),error:wr(C.errors,x),touched:!!wr(C.touched,x),initialValue:wr(f.current,x),initialTouched:!!wr(g.current,x),initialError:wr(p.current,x)}},[C.errors,C.touched,C.values]),Jn=w.useCallback(function(x){return{setValue:function(W,ne){return he(x,W,ne)},setTouched:function(W,ne){return Pe(x,W,ne)},setError:function(W){return ve(x,W)}}},[he,Pe,ve]),Zn=w.useCallback(function(x){var q=i0(x),W=q?x.name:x,ne=wr(C.values,W),pe={name:W,value:ne,onChange:fe,onBlur:yt};if(q){var Ee=x.type,me=x.value,oe=x.as,vr=x.multiple;Ee==="checkbox"?me===void 0?pe.checked=!!ne:(pe.checked=!!(Array.isArray(ne)&&~ne.indexOf(me)),pe.value=me):Ee==="radio"?(pe.checked=ne===me,pe.value=me):oe==="select"&&vr&&(pe.value=pe.value||[],pe.multiple=!0)}return pe},[yt,fe,C.values]),Ln=w.useMemo(function(){return!ga(f.current,C.values)},[f.current,C.values]),er=w.useMemo(function(){return typeof a<"u"?Ln?C.errors&&Object.keys(C.errors).length===0:a!==!1&&li(a)?a(h):a:C.errors&&Object.keys(C.errors).length===0},[a,Ln,C.errors,h]),st=Jt({},C,{initialValues:f.current,initialErrors:p.current,initialTouched:g.current,initialStatus:v.current,handleBlur:yt,handleChange:fe,handleReset:Ze,handleSubmit:it,resetForm:U,setErrors:z,setFormikState:Xt,setFieldTouched:Pe,setFieldValue:he,setFieldError:ve,setStatus:ht,setSubmitting:fn,setTouched:N,setValues:X,submitForm:De,validateForm:F,validateField:B,isValid:er,dirty:Ln,unregisterField:Z,registerField:Y,getFieldProps:Zn,getFieldMeta:xi,getFieldHelpers:Jn,validateOnBlur:i,validateOnChange:n,validateOnMount:o});return st}function Xge(t){var e={};if(t.inner){if(t.inner.length===0)return Wa(e,t.path,t.message);for(var i=t.inner,n=Array.isArray(i),r=0,i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if(r=i.next(),r.done)break;s=r.value}var o=s;wr(e,o.path)||(e=Wa(e,o.path,o.message))}}return e}function Jge(t,e,n,r){n===void 0&&(n=!1);var i=uT(t);return e[n?"validateSync":"validate"](i,{abortEarly:!1,context:r||i})}function uT(t){var e=Array.isArray(t)?[]:{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=String(n);Array.isArray(t[r])===!0?e[r]=t[r].map(function(i){return Array.isArray(i)===!0||TN(i)?uT(i):i!==""?i:void 0}):TN(t[r])?e[r]=uT(t[r]):e[r]=t[r]!==""?t[r]:void 0}return e}function Zge(t,e,n){var r=t.slice();return e.forEach(function(s,o){if(typeof r[o]>"u"){var a=n.clone!==!1,l=a&&n.isMergeableObject(s);r[o]=l?rT(Array.isArray(s)?[]:{},s,n):s}else n.isMergeableObject(s)?r[o]=rT(t[o],s,n):t.indexOf(s)===-1&&r.push(s)}),r}function e_e(t){return Array.from(t).filter(function(e){return e.selected}).map(function(e){return e.value})}function t_e(t,e,n){if(typeof t=="boolean")return!!e;var r=[],i=!1,s=-1;if(Array.isArray(t))r=t,s=t.indexOf(n),i=s>=0;else if(!n||n=="true"||n=="false")return!!e;return e&&n&&!i?r.concat(n):i?r.slice(0,s).concat(r.slice(s+1)):r}var n_e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function jr(t){var e=w.useRef(t);return n_e(function(){e.current=t}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current.apply(void 0,r)},[])}var r_e=w.forwardRef(function(t,e){var n=t.action,r=tB(t,["action"]),i=n??"#",s=Kge(),o=s.handleReset,a=s.handleSubmit;return w.createElement("form",Jt({onSubmit:a,ref:e,onReset:o,action:i},r))});r_e.displayName="Form";function Dl(t){this._maxSize=t,this.clear()}Dl.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Dl.prototype.get=function(t){return this._values[t]};Dl.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var i_e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,rB=/^\d+$/,s_e=/^\d/,o_e=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,a_e=/^\s*(['"]?)(.*?)(\1)\s*$/,F1=512,YN=new Dl(F1),XN=new Dl(F1),JN=new Dl(F1),qa={Cache:Dl,split:cT,normalizePath:Ow,setter:function(t){var e=Ow(t);return XN.get(t)||XN.set(t,function(r,i){for(var s=0,o=e.length,a=r;s<o-1;){var l=e[s];if(l==="__proto__"||l==="constructor"||l==="prototype")return r;a=a[e[s++]]}a[e[s]]=i})},getter:function(t,e){var n=Ow(t);return JN.get(t)||JN.set(t,function(i){for(var s=0,o=n.length;s<o;)if(i!=null||!e)i=i[n[s++]];else return;return i})},join:function(t){return t.reduce(function(e,n){return e+(V1(n)||rB.test(n)?"["+n+"]":(e?".":"")+n)},"")},forEach:function(t,e,n){l_e(Array.isArray(t)?t:cT(t),e,n)}};function Ow(t){return YN.get(t)||YN.set(t,cT(t).map(function(e){return e.replace(a_e,"$2")}))}function cT(t){return t.match(i_e)||[""]}function l_e(t,e,n){var r=t.length,i,s,o,a;for(s=0;s<r;s++)i=t[s],i&&(d_e(i)&&(i='"'+i+'"'),a=V1(i),o=!a&&/^\d+$/.test(i),e.call(n,i,a,o,s,t))}function V1(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function u_e(t){return t.match(s_e)&&!t.match(rB)}function c_e(t){return o_e.test(t)}function d_e(t){return!V1(t)&&(u_e(t)||c_e(t))}const h_e=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,s0=t=>t.match(h_e)||[],o0=t=>t[0].toUpperCase()+t.slice(1),U1=(t,e)=>s0(t).join(e).toLowerCase(),iB=t=>s0(t).reduce((e,n)=>`${e}${e?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),f_e=t=>o0(iB(t)),p_e=t=>U1(t,"_"),m_e=t=>U1(t,"-"),g_e=t=>o0(U1(t," ")),__e=t=>s0(t).map(o0).join(" ");var Dw={words:s0,upperFirst:o0,camelCase:iB,pascalCase:f_e,snakeCase:p_e,kebabCase:m_e,sentenceCase:g_e,titleCase:__e},j1={exports:{}};j1.exports=function(t){return sB(y_e(t),t)};j1.exports.array=sB;function sB(t,e){var n=t.length,r=new Array(n),i={},s=n,o=v_e(e),a=w_e(t);for(e.forEach(function(u){if(!a.has(u[0])||!a.has(u[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)i[s]||l(t[s],s,new Set);return r;function l(u,c,d){if(d.has(u)){var h;try{h=", node was:"+JSON.stringify(u)}catch{h=""}throw new Error("Cyclic dependency"+h)}if(!a.has(u))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(u));if(!i[c]){i[c]=!0;var f=o.get(u)||new Set;if(f=Array.from(f),c=f.length){d.add(u);do{var p=f[--c];l(p,a.get(p),d)}while(c);d.delete(u)}r[--n]=u}}}function y_e(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var i=t[n];e.add(i[0]),e.add(i[1])}return Array.from(e)}function v_e(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var i=t[n];e.has(i[0])||e.set(i[0],new Set),e.has(i[1])||e.set(i[1],new Set),e.get(i[0]).add(i[1])}return e}function w_e(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}var E_e=j1.exports;const I_e=S_(E_e),T_e=Object.prototype.toString,b_e=Error.prototype.toString,S_e=RegExp.prototype.toString,C_e=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",R_e=/^Symbol\((.*)\)(.*)$/;function x_e(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function ZN(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return x_e(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return C_e.call(t).replace(R_e,"Symbol($1)");const r=T_e.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+b_e.call(t)+"]":r==="RegExp"?S_e.call(t):null}function Io(t,e){let n=ZN(t,e);return n!==null?n:JSON.stringify(t,function(r,i){let s=ZN(this[r],e);return s!==null?s:i},2)}function oB(t){return t==null?[]:[].concat(t)}let aB,A_e=/\$\{\s*(\w+)\s*\}/g;aB=Symbol.toStringTag;class ir extends Error{static formatError(e,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof e=="string"?e.replace(A_e,(i,s)=>Io(n[s])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,i,s){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this[aB]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=i,this.errors=[],this.inner=[],oB(e).forEach(o=>{if(ir.isError(o)){this.errors.push(...o.errors);const a=o.inner.length?o.inner:[o];this.inner.push(...a)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],!s&&Error.captureStackTrace&&Error.captureStackTrace(this,ir)}}let ki={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const i=r!=null&&r!==n?` (cast from the value \`${Io(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${Io(n,!0)}\``+i:`${t} must match the configured type. The validated value was: \`${Io(n,!0)}\``+i}},ui={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},P_e={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},dT={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},k_e={isValue:"${path} field must be ${value}"},hT={noUnknown:"${path} field has unspecified keys: ${unknown}"},N_e={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},O_e={notType:t=>{const{path:e,value:n,spec:r}=t,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${e} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${Io(n,!0)}\``;if(n.length>i)return`${e} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${Io(n,!0)}\``}return ir.formatError(ki.notType,t)}};Object.assign(Object.create(null),{mixed:ki,string:ui,number:P_e,date:dT,object:hT,array:N_e,boolean:k_e,tuple:O_e});const B1=t=>t&&t.__isYupSchema__;class T_{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:s}=n,o=typeof r=="function"?r:(...a)=>a.every(l=>l===r);return new T_(e,(a,l)=>{var u;let c=o(...a)?i:s;return(u=c==null?void 0:c(l))!=null?u:l})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(s=>s.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),i=this.fn(r,e,n);if(i===void 0||i===e)return e;if(!B1(i))throw new TypeError("conditions must return a schema object");return i.resolve(n)}}const pm={context:"$",value:"."};function D_e(t,e){return new ra(t,e)}class ra{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===pm.context,this.isValue=this.key[0]===pm.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?pm.context:this.isValue?pm.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&qa.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let i=this.isContext?r:this.isValue?e:n;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}ra.prototype.__isYupRef=!0;const Ma=t=>t==null;function Yl(t){function e({value:n,path:r="",options:i,originalValue:s,schema:o},a,l){const{name:u,test:c,params:d,message:h,skipAbsent:f}=t;let{parent:p,context:g,abortEarly:v=o.spec.abortEarly,disableStackTrace:m=o.spec.disableStackTrace}=i;function _(L){return ra.isRef(L)?L.getValue(n,p,g):L}function y(L={}){var G;const F=Object.assign({value:n,originalValue:s,label:o.spec.label,path:L.path||r,spec:o.spec},d,L.params);for(const B of Object.keys(F))F[B]=_(F[B]);const U=new ir(ir.formatError(L.message||h,F),n,F.path,L.type||u,(G=L.disableStackTrace)!=null?G:m);return U.params=F,U}const E=v?a:l;let b={path:r,parent:p,type:u,from:i.from,createError:y,resolve:_,options:i,originalValue:s,schema:o};const C=L=>{ir.isError(L)?E(L):L?l(null):E(y())},T=L=>{ir.isError(L)?E(L):a(L)};if(f&&Ma(n))return C(!0);let M;try{var P;if(M=c.call(b,n,b),typeof((P=M)==null?void 0:P.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${b.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(M).then(C,T)}}catch(L){T(L);return}C(M)}return e.OPTIONS=t,e}function M_e(t,e,n,r=n){let i,s,o;return e?(qa.forEach(e,(a,l,u)=>{let c=l?a.slice(1,a.length-1):a;t=t.resolve({context:r,parent:i,value:n});let d=t.type==="tuple",h=u?parseInt(c,10):0;if(t.innerType||d){if(d&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(n&&h>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);i=n,n=n&&n[h],t=d?t.spec.types[h]:t.innerType}if(!u){if(!t.fields||!t.fields[c])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${t.type}")`);i=n,n=n&&n[c],t=t.fields[c]}s=c,o=l?"["+a+"]":"."+a}),{schema:t,parent:i,parentPath:s}):{parent:i,parentPath:e,schema:t}}class b_ extends Set{describe(){const e=[];for(const n of this.values())e.push(ra.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new b_(this.values())}merge(e,n){const r=this.clone();return e.forEach(i=>r.add(i)),n.forEach(i=>r.delete(i)),r}}function yu(t,e=new Map){if(B1(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=yu(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,i]of t.entries())n.set(r,yu(i,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(yu(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,i]of Object.entries(t))n[r]=yu(i,e)}else throw Error(`Unable to clone ${t}`);return n}class ns{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new b_,this._blacklist=new b_,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ki.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=yu(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const i=Object.assign({},n.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(s=>{e.tests.forEach(o=>{s.test(o.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((i,s)=>s.resolve(i,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,i,s;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=e.recursive)!=null?i:this.spec.recursive,disableStackTrace:(s=e.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({value:e},n)),i=n.assert==="ignore-optionality",s=r._cast(e,n);if(n.assert!==!1&&!r.isType(s)){if(i&&Ma(s))return s;let o=Io(e),a=Io(s);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(a!==o?`result of cast: ${a}`:""))}return s}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((i,s)=>s.call(this,i,e,this),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,i){let{path:s,originalValue:o=e,strict:a=this.spec.strict}=n,l=e;a||(l=this._cast(l,Object.assign({assert:!1},n)));let u=[];for(let c of Object.values(this.internalTests))c&&u.push(c);this.runTests({path:s,value:l,originalValue:o,options:n,tests:u},r,c=>{if(c.length)return i(c,l);this.runTests({path:s,value:l,originalValue:o,options:n,tests:this.tests},r,i)})}runTests(e,n,r){let i=!1,{tests:s,value:o,originalValue:a,path:l,options:u}=e,c=g=>{i||(i=!0,n(g,o))},d=g=>{i||(i=!0,r(g,o))},h=s.length,f=[];if(!h)return d([]);let p={value:o,originalValue:a,path:l,options:u,schema:this};for(let g=0;g<s.length;g++){const v=s[g];v(p,c,function(_){_&&(Array.isArray(_)?f.push(..._):f.push(_)),--h<=0&&d(f)})}}asNestedTest({key:e,index:n,parent:r,parentPath:i,originalParent:s,options:o}){const a=e??n;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof a=="number";let u=r[a];const c=Object.assign({},o,{strict:!0,parent:r,value:u,originalValue:s[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?`${i||""}[${u?a:`"${a}"`}]`:(i?`${i}.`:"")+e});return(d,h,f)=>this.resolve(c)._validate(u,c,h,f)}validate(e,n){var r;let i=this.resolve(Object.assign({},n,{value:e})),s=(r=n==null?void 0:n.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((o,a)=>i._validate(e,n,(l,u)=>{ir.isError(l)&&(l.value=u),a(l)},(l,u)=>{l.length?a(new ir(l,u,void 0,void 0,s)):o(u)}))}validateSync(e,n){var r;let i=this.resolve(Object.assign({},n,{value:e})),s,o=(r=n==null?void 0:n.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(e,Object.assign({},n,{sync:!0}),(a,l)=>{throw ir.isError(a)&&(a.value=l),a},(a,l)=>{if(a.length)throw new ir(a,e,void 0,void 0,o);s=l}),s}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(ir.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(ir.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):yu(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=Yl({message:n,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=Yl({message:n,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=ki.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=ki.notNull){return this.nullability(!1,e)}required(e=ki.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=ki.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=Yl(n),s=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===n.name&&(s||o.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),i=oB(e).map(s=>new ra(s));return i.forEach(s=>{s.isSibling&&r.deps.push(s.key)}),r.conditions.push(typeof n=="function"?new T_(i,n):T_.fromOptions(i,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=Yl({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=ki.oneOf){let r=this.clone();return e.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=Yl({message:n,name:"oneOf",skipAbsent:!0,test(i){let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(i)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:o}})}}),r}notOneOf(e,n=ki.notOneOf){let r=this.clone();return e.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=Yl({message:n,name:"notOneOf",test(i){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(i)?this.createError({params:{values:Array.from(s).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:i,optional:s,nullable:o}=n.spec;return{meta:i,label:r,optional:s,nullable:o,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,u,c)=>c.findIndex(d=>d.name===l.name)===u)}}}ns.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])ns.prototype[`${t}At`]=function(e,n,r={}){const{parent:i,parentPath:s,schema:o}=M_e(this,e,n,r.context);return o[t](i&&i[s],Object.assign({},r,{parent:i,path:e}))};for(const t of["equals","is"])ns.prototype[t]=ns.prototype.oneOf;for(const t of["not","nope"])ns.prototype[t]=ns.prototype.notOneOf;let L_e=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,$_e=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,F_e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,V_e=t=>Ma(t)||t===t.trim(),U_e={}.toString();function Es(){return new lB}class lB extends ns{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const i=e!=null&&e.toString?e.toString():e;return i===U_e?e:i})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||ki.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=ui.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=ui.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=ui.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,i,s;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:i,name:s}=n:i=n),this.test({name:s||"matches",message:i||ui.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=ui.email){return this.matches(L_e,{name:"email",message:e,excludeEmptyString:!0})}url(e=ui.url){return this.matches($_e,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=ui.uuid){return this.matches(F_e,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=ui.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:V_e})}lowercase(e=ui.lowercase){return this.transform(n=>Ma(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Ma(n)||n===n.toLowerCase()})}uppercase(e=ui.uppercase){return this.transform(n=>Ma(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Ma(n)||n===n.toUpperCase()})}}Es.prototype=lB.prototype;const j_e=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function os(t,e=0){return Number(t)||e}function B_e(t){const e=j_e.exec(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;const n={year:os(e[1]),month:os(e[2],1)-1,day:os(e[3],1),hour:os(e[4]),minute:os(e[5]),second:os(e[6]),millisecond:e[7]?os(e[7].substring(0,3)):0,z:e[8]||void 0,plusMinus:e[9]||void 0,hourOffset:os(e[10]),minuteOffset:os(e[11])};if(n.z===void 0&&n.plusMinus===void 0)return new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond).valueOf();let r=0;return n.z!=="Z"&&n.plusMinus!==void 0&&(r=n.hourOffset*60+n.minuteOffset,n.plusMinus==="+"&&(r=0-r)),Date.UTC(n.year,n.month,n.day,n.hour,n.minute+r,n.second,n.millisecond)}let z_e=new Date(""),W_e=t=>Object.prototype.toString.call(t)==="[object Date]";class a0 extends ns{constructor(){super({type:"date",check(e){return W_e(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=B_e(e),isNaN(e)?a0.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(ra.isRef(e))r=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(e,n=dT.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(e,n=dT.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}a0.INVALID_DATE=z_e;a0.prototype;function q_e(t,e=[]){let n=[],r=new Set,i=new Set(e.map(([o,a])=>`${o}-${a}`));function s(o,a){let l=qa.split(o)[0];r.add(l),i.has(`${a}-${l}`)||n.push([a,l])}for(const o of Object.keys(t)){let a=t[o];r.add(o),ra.isRef(a)&&a.isSibling?s(a.path,o):B1(a)&&"deps"in a&&a.deps.forEach(l=>s(l,o))}return I_e.array(Array.from(r),n).reverse()}function eO(t,e){let n=1/0;return t.some((r,i)=>{var s;if((s=e.path)!=null&&s.includes(r))return n=i,!0}),n}function uB(t){return(e,n)=>eO(t,e)-eO(t,n)}const H_e=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function Qm(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=Qm(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=Qm(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(Qm)}):"optional"in t?t.optional():t}const G_e=(t,e)=>{const n=[...qa.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),i=qa.getter(qa.join(n),!0)(t);return!!(i&&r in i)};let tO=t=>Object.prototype.toString.call(t)==="[object Object]";function K_e(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const Q_e=uB([]);function l0(t){return new cB(t)}class cB extends ns{constructor(e){super({type:"object",check(n){return tO(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=Q_e,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let i=super._cast(e,n);if(i===void 0)return this.getDefault(n);if(!this._typeCheck(i))return i;let s=this.fields,o=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(i).filter(d=>!this._nodes.includes(d))),l={},u=Object.assign({},n,{parent:l,__validating:n.__validating||!1}),c=!1;for(const d of a){let h=s[d],f=d in i;if(h){let p,g=i[d];u.path=(n.path?`${n.path}.`:"")+d,h=h.resolve({value:g,context:n.context,parent:l});let v=h instanceof ns?h.spec:void 0,m=v==null?void 0:v.strict;if(v!=null&&v.strip){c=c||d in i;continue}p=!n.__validating||!m?h.cast(i[d],u):i[d],p!==void 0&&(l[d]=p)}else f&&!o&&(l[d]=i[d]);(f!==d in l||l[d]!==i[d])&&(c=!0)}return c?l:i}_validate(e,n={},r,i){let{from:s=[],originalValue:o=e,recursive:a=this.spec.recursive}=n;n.from=[{schema:this,value:o},...s],n.__validating=!0,n.originalValue=o,super._validate(e,n,r,(l,u)=>{if(!a||!tO(u)){i(l,u);return}o=o||u;let c=[];for(let d of this._nodes){let h=this.fields[d];!h||ra.isRef(h)||c.push(h.asNestedTest({options:n,key:d,parent:u,parentPath:n.path,originalParent:o}))}this.runTests({tests:c,value:u,originalValue:o,options:n},r,d=>{i(d.sort(this._sortErrors).concat(l),u)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[i,s]of Object.entries(this.fields)){const o=r[i];r[i]=o===void 0?s:o}return n.withMutation(i=>i.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var i;const s=this.fields[r];let o=e;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),n[r]=s&&"getDefault"in s?s.getDefault(o):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=q_e(e,n),r._sortErrors=uB(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),i=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),i)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return Qm(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,i])=>e.includes(r)&&e.includes(i)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let i=qa.getter(e,!0);return this.transform(s=>{if(!s)return s;let o=s;return G_e(s,e)&&(o=Object.assign({},s),r||delete o[e],o[n]=i(s)),o})}json(){return this.transform(H_e)}noUnknown(e=!0,n=hT.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(i){if(i==null)return!0;const s=K_e(this.schema,i);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=hT.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const i of Object.keys(n))r[e(i)]=n[i];return r})}camelCase(){return this.transformKeys(Dw.camelCase)}snakeCase(){return this.transformKeys(Dw.snakeCase)}constantCase(){return this.transformKeys(e=>Dw.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[s,o]of Object.entries(n.fields)){var i;let a=e;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[s]})),r.fields[s]=o.describe(a)}return r}}l0.prototype=cB.prototype;const Y_e="_container_khuy3_1",Is={container:Y_e},X_e=({onSubmit:t})=>{const e=R_(),n={cardNumber:"",cvv:"",expirationDate:""},r=l0({cardNumber:Es().matches(/^\d{16}$/,"enter any 16 digits").required("required field"),cvv:Es().matches(/^\d{3}$/,"enter any 3 digits").required("required field"),expirationDate:Es().matches(/^\d{2}\/\d{2}$/,`
enter the date in the format 01/01`).required("required field")}),i=$1({initialValues:n,onSubmit:l=>{localStorage.clear(),e(ire()),o(!0),t(l)},validationSchema:r}),[s,o]=sr.useState(!1),a=()=>{o(!1)};return I.jsx(Wo,{className:Is.form,container:!0,justifyContent:"center",children:I.jsx(Wo,{item:!0,xs:8,children:I.jsxs("form",{onSubmit:i.handleSubmit,children:[I.jsxs(E1,{onClose:a,open:s,children:[I.jsx(b1,{className:Is.dialogTitle,children:"payment message"}),I.jsx(T1,{children:I.jsx("div",{children:"Your order has been successfully paid"})}),I.jsx(I1,{children:I.jsx(gr,{autoFocus:!0,color:"primary",onClick:a,component:Xa,to:"/",children:"CLOSE"})})]}),I.jsxs("div",{className:Is.container,children:[I.jsx(Xr,{error:i.touched.cardNumber&&!!i.errors.cardNumber,helperText:i.touched.cardNumber&&i.errors.cardNumber,label:"Card Number",name:"cardNumber",onChange:i.handleChange,value:i.values.cardNumber,variant:"outlined"}),I.jsx(Xr,{error:i.touched.expirationDate&&!!i.errors.expirationDate,helperText:i.touched.expirationDate&&i.errors.expirationDate,label:"Expiration Date",name:"expirationDate",onChange:i.handleChange,style:{margin:"20px 0 20px 0"},value:i.values.expirationDate,variant:"outlined"}),I.jsx(Xr,{error:i.touched.cvv&&!!i.errors.cvv,helperText:i.touched.cvv&&i.errors.cvv,label:"CVV",name:"cvv",onChange:i.handleChange,value:i.values.cvv,variant:"outlined"}),I.jsx(gr,{color:"primary",type:"submit",variant:"contained",children:"Pay"})]})]})})})},J_e="_error404_1lt3v_1",Z_e="_wrapper_1lt3v_6",nO={error404:J_e,wrapper:Z_e},eye="/eShop/assets/404-kMbd88y6.svg",tye=()=>I.jsx("div",{id:"hw5-page-404",children:I.jsx("div",{className:nO.wrapper,children:I.jsx("img",{alt:"404",className:nO.error404,src:eye})})}),nye=({id:t,name:e,photo:n,price:r,quantity:i})=>{const s=R_(),o=Ii(c=>c.cart.items.find(d=>d.id===t)),[a,l]=w.useState(!1);w.useEffect(()=>{i===0&&l(!0)},[i]);const u=()=>{s(o?E4(t):nre({id:t,name:e,photo:n,price:r,quantity:i}))};return I.jsx(Tp,{sx:{marginTop:2},children:I.jsxs(bp,{children:[I.jsx(We,{component:"div",variant:"h5",children:e}),I.jsx(dj,{style:a?{opacity:.5}:{},alt:e,component:"img",height:"250",image:n}),a?I.jsx(We,{style:{display:"flex",justifyContent:"center",position:"relative",bottom:"140px"},component:"div",variant:"h5",children:"Not available"}):I.jsx(We,{component:"div",variant:"h5"}),a?I.jsx(We,{variant:"body1"}):I.jsxs(We,{color:"text.secondary",variant:"body1",children:["Price:  ",r]}),I.jsx(gr,{disabled:a,onClick:u,variant:"contained",children:"Add to Cart"})]})})},rye=()=>{const t=Ii(r=>r.product.loading),e=Ii(r=>r.product.items),n=Object.values(e);return I.jsx(Wo,{container:!0,spacing:2,justifyContent:"center",children:t?I.jsx(hj,{style:{display:"flex",margin:"50px"}}):n.map(r=>I.jsx(Wo,{width:"300px",item:!0,children:I.jsx(nye,{id:r.id,name:r.name,photo:r.photo,price:r.price,quantity:r.quantity},r.id)},r.id))})};var z1={},dB={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(dB);var Yn=dB.exports,Mw={};const iye=PB(nae);var rO;function Xn(){return rO||(rO=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=iye}(Mw)),Mw}var sye=Yn;Object.defineProperty(z1,"__esModule",{value:!0});var hB=z1.default=void 0,oye=sye(Xn()),iO=I,aye=(0,oye.default)([(0,iO.jsx)("path",{d:"M18 11c.7 0 1.37.1 2 .29V9l-8-6-8 6v12h7.68c-.43-.91-.68-1.92-.68-3 0-3.87 3.13-7 7-7z"},"0"),(0,iO.jsx)("path",{d:"M18 13c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm3 5.5h-2.5V21h-1v-2.5H15v-1h2.5V15h1v2.5H21v1z"},"1")],"AddHome");hB=z1.default=aye;var W1={},lye=Yn;Object.defineProperty(W1,"__esModule",{value:!0});var fB=W1.default=void 0,uye=lye(Xn()),cye=I,dye=(0,uye.default)((0,cye.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");fB=W1.default=dye;var q1={},hye=Yn;Object.defineProperty(q1,"__esModule",{value:!0});var pB=q1.default=void 0,fye=hye(Xn()),pye=I,mye=(0,fye.default)((0,pye.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"}),"Payment");pB=q1.default=mye;var H1={},gye=Yn;Object.defineProperty(H1,"__esModule",{value:!0});var fT=H1.default=void 0,_ye=gye(Xn()),yye=I,vye=(0,_ye.default)((0,yye.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCart");fT=H1.default=vye;var G1={},wye=Yn;Object.defineProperty(G1,"__esModule",{value:!0});var mB=G1.default=void 0,Eye=wye(Xn()),Iye=I,Tye=(0,Eye.default)((0,Iye.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");mB=G1.default=Tye;var K1={},bye=Yn;Object.defineProperty(K1,"__esModule",{value:!0});var gB=K1.default=void 0,Sye=bye(Xn()),Cye=I,Rye=(0,Sye.default)((0,Cye.jsx)("path",{d:"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11zm0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6zM4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5zm0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"Percent");gB=K1.default=Rye;const xye="_container_1qpp8_1",Aye={container:xye};var Q1={},Pye=Yn;Object.defineProperty(Q1,"__esModule",{value:!0});var _B=Q1.default=void 0,kye=Pye(Xn()),Nye=I,Oye=(0,kye.default)((0,Nye.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");_B=Q1.default=Oye;var Y1={},Dye=Yn;Object.defineProperty(Y1,"__esModule",{value:!0});var yB=Y1.default=void 0,Mye=Dye(Xn()),Lye=I,$ye=(0,Mye.default)((0,Lye.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Article");yB=Y1.default=$ye;var X1={},Fye=Yn;Object.defineProperty(X1,"__esModule",{value:!0});var vB=X1.default=void 0,Vye=Fye(Xn()),Uye=I,jye=(0,Vye.default)((0,Uye.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");vB=X1.default=jye;var J1={},Bye=Yn;Object.defineProperty(J1,"__esModule",{value:!0});var wB=J1.default=void 0,zye=Bye(Xn()),Wye=I,qye=(0,zye.default)((0,Wye.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");wB=J1.default=qye;var Z1={},Hye=Yn;Object.defineProperty(Z1,"__esModule",{value:!0});var EB=Z1.default=void 0,Gye=Hye(Xn()),Kye=I,Qye=(0,Gye.default)((0,Kye.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");EB=Z1.default=Qye;var eR={},Yye=Yn;Object.defineProperty(eR,"__esModule",{value:!0});var IB=eR.default=void 0,Xye=Yye(Xn()),Jye=I,Zye=(0,Xye.default)((0,Jye.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove");IB=eR.default=Zye;const eve=({id:t,name:e,photo:n,price:r,quantity:i})=>{const s=R_(),o=()=>{s(Ek(t)),localStorage.clear()},a=()=>{i>1?s(rre(t)):(s(Ek(t)),localStorage.clear())},l=()=>{s(E4(t))};return I.jsx(Tp,{children:I.jsxs(bp,{children:[I.jsx(We,{component:"div",variant:"h5",children:e}),I.jsx(dj,{alt:e,component:"img",image:n,style:{height:100,width:100}}),I.jsxs(We,{color:"text.secondary",variant:"body1",children:["Price:  ",r]}),I.jsxs(We,{color:"text.secondary",variant:"body1",children:[I.jsx(gr,{onClick:o,variant:"outlined",children:I.jsx(EB,{})}),I.jsx(gr,{onClick:a,variant:"text",children:I.jsx(IB,{})}),i,I.jsx(gr,{onClick:l,variant:"text",children:I.jsx(wB,{})})]})]})})},tve=()=>{const t=Ii(r=>r.cart.items),e=Ii(r=>r.auth.isAuthenticated),n=t.reduce((r,i)=>r+i.price*i.quantity,0);return w.useEffect(()=>{t.length!==0&&localStorage.setItem("cartItems",JSON.stringify(t))},[t]),I.jsx(Tp,{children:I.jsxs(bp,{children:[t.length>0?I.jsxs(We,{component:"div",variant:"h5",children:["Cart",e?I.jsx(gr,{component:Xa,style:{margin:"10px"},to:"/checkout",variant:"contained",children:"Order"}):I.jsx(gr,{component:Xa,style:{margin:"10px"},to:"/signIn",variant:"contained",children:"Order"})]}):I.jsx(We,{component:"div",variant:"h5",children:"Cart is empty"}),t.map(r=>I.jsx(eve,{id:r.id,name:r.name,photo:r.photo,price:r.price,quantity:r.quantity},r.id)),I.jsxs(We,{color:"text.secondary",variant:"body1",children:["Total:  ",n]})]})})},nve=()=>{const t=Ii(i=>i.cart.items),e=t.reduce((i,s)=>i+s.price*s.quantity,0),n=KC(),r=()=>{};return I.jsx(Tp,{children:I.jsxs(bp,{children:[I.jsxs(We,{component:"div",variant:"h5",children:["Checkout # ",n]}),t.map(i=>I.jsx("div",{children:I.jsxs(We,{component:"div",variant:"body1",children:[i.name," - ",i.quantity,"pcs. - $",i.price]})},i.id)),I.jsxs(We,{color:"div",style:{margin:"20px 0"},variant:"h5",children:[I.jsx(gr,{component:Xa,disabled:e===0,onClick:r,style:{margin:"0 10px 0 0"},to:"/payment",variant:"contained",children:"Place Order"}),"Total: $",e]})]})})},rve=m1(I.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z"}),"AccountCircle");var tR={},ive=Yn;Object.defineProperty(tR,"__esModule",{value:!0});var TB=tR.default=void 0,sve=ive(Xn()),ove=I,ave=(0,sve.default)((0,ove.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonAdd");TB=tR.default=ave;const lve=()=>{const t=mp(),e=H_(),n=Ii(u=>u.auth.error),r={email:"",password:"",passwordRepeat:""},i=l0({email:Es().matches(/^\S+@\S+\.\S+$/,"Enter a valid email address").required("Email is a required field"),password:Es().matches(/^[a-zA-Z0-9]{1,6}$/,"Create a password of no more than 6 characters, numbers, and letters").required("Password is a required field"),passwordRepeat:Es().oneOf([D_e("password"),null],"Passwords must match").required("Repeat password is a required field")}),s=$1({initialValues:r,onSubmit:u=>{t(yre(u)).then(c=>{console.log(c),a(!0)})},validationSchema:i}),[o,a]=w.useState(!1),l=()=>{a(!1),e("/")};return I.jsx(Wo,{className:Is.form,container:!0,justifyContent:"center",children:I.jsxs(Wo,{item:!0,xs:8,children:[I.jsx(We,{component:"div",variant:"h3",children:"Create account"}),I.jsxs("form",{onSubmit:s.handleSubmit,children:[I.jsxs(E1,{onClose:l,open:o,children:[I.jsx(b1,{className:Is.dialogTitle,children:"account message"}),I.jsx(T1,{children:n?I.jsx(We,{component:"div",style:{color:"red"},variant:"body2",children:n}):I.jsx(We,{component:"div",style:{color:"green"},variant:"body2",children:"Your are successfully registered"})}),I.jsx(I1,{children:I.jsx(gr,{autoFocus:!0,color:"primary",onClick:l,children:"CLOSE"})})]}),I.jsxs("div",{className:Is.container,children:[I.jsx(Xr,{error:s.touched.email&&!!s.errors.email,helperText:s.touched.email&&s.errors.email,label:"email",name:"email",onChange:s.handleChange,value:s.values.email,variant:"outlined"}),I.jsx(Xr,{error:s.touched.password&&!!s.errors.password,helperText:s.touched.password&&s.errors.password,label:"password",name:"password",onChange:s.handleChange,style:{margin:"20px 0 20px 0"},value:s.values.password,variant:"outlined"}),I.jsx(Xr,{error:s.touched.passwordRepeat&&!!s.errors.passwordRepeat,helperText:s.touched.passwordRepeat&&s.errors.passwordRepeat,label:"Repeat password",name:"passwordRepeat",onChange:s.handleChange,value:s.values.passwordRepeat,variant:"outlined"}),I.jsx(gr,{color:"primary",type:"submit",variant:"contained",children:"Create account"})]})]})]})})};var nR={},uve=Yn;Object.defineProperty(nR,"__esModule",{value:!0});var bB=nR.default=void 0,cve=uve(Xn()),dve=I,hve=(0,cve.default)((0,dve.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"}),"Login");bB=nR.default=hve;const fve=()=>{const t=mp(),e=H_(),n=Ii(c=>c.auth.error),r={email:"",password:""},i=l0({email:Es().matches(/^\S+@\S+\.\S+$/,"Enter a valid email address").required("Email is a required field"),password:Es().matches(/^[a-zA-Z0-9]{1,6}$/,"Create a password of no more than 6 characters, numbers, and letters").required("Password is a required field")}),s=$1({initialValues:r,onSubmit:c=>{t(vre(c)).then(d=>{console.log(d),a(!0)})},validationSchema:i}),[o,a]=w.useState(!1),l=()=>{a(!1),e("/")},u=n?"Error: "+n:"You are logged in to your account";return I.jsx(Wo,{className:Is.form,container:!0,justifyContent:"center",children:I.jsxs(Wo,{item:!0,xs:8,children:[I.jsx(We,{component:"div",variant:"h3",children:"Login"}),I.jsxs("form",{onSubmit:s.handleSubmit,children:[I.jsxs(E1,{onClose:l,open:o,children:[I.jsx(b1,{className:Is.dialogTitle,children:"account message"}),I.jsx(T1,{children:I.jsx(We,{component:"div",style:{color:n?"red":"green"},variant:"body2",children:u})}),I.jsx(I1,{children:I.jsx(gr,{autoFocus:!0,color:"primary",onClick:l,children:"CLOSE"})})]}),I.jsxs("div",{className:Is.container,children:[I.jsx(Xr,{error:s.touched.email&&!!s.errors.email,helperText:s.touched.email&&s.errors.email,label:"email",name:"email",onChange:s.handleChange,value:s.values.email,variant:"outlined"}),I.jsx(Xr,{error:s.touched.password&&!!s.errors.password,helperText:s.touched.password&&s.errors.password,label:"password",name:"password",onChange:s.handleChange,style:{margin:"20px 0 20px 0"},value:s.values.password,variant:"outlined"}),I.jsx(gr,{color:"primary",type:"submit",variant:"contained",children:"Login"})]})]})]})})};var rR={},pve=Yn;Object.defineProperty(rR,"__esModule",{value:!0});var SB=rR.default=void 0,mve=pve(Xn()),gve=I,_ve=(0,mve.default)((0,gve.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");SB=rR.default=_ve;const yve=()=>{const[t,e]=sr.useState(null),[n,r]=sr.useState(null),i=Ii(b=>b.auth.isAuthenticated),s=Ii(b=>b.cart.items),o=s.reduce((b,C)=>b+C.price*C.quantity,0),a=s.reduce((b,C)=>b+C.quantity,0),l=mp(),u=H_();w.useEffect(()=>{l(Um())},[l]),w.useEffect(()=>{s.length!==0&&localStorage.setItem("cartItems",JSON.stringify(s))},[s]),w.useEffect(()=>{const b=localStorage.getItem("cartItems");b&&l(sre(JSON.parse(b)))},[l]);const c=b=>{e(b.currentTarget)},d=b=>{r(b.currentTarget)},h=()=>{e(null)},f=()=>{r(null)},p=()=>{u("/"),e(null)},g=()=>{u("/add"),r(null)},v=()=>{u("/cart"),r(null)},m=()=>{u("/checkout"),r(null)},_=()=>{u("/signUp"),r(null)},y=()=>{u("/signIn"),r(null)},E=()=>{l(Ire()),r(null)};return I.jsxs(Yle,{sx:{flexGrow:2},children:[I.jsx(Yae,{position:"fixed",children:I.jsxs($he,{style:{display:"flex",justifyContent:"space-between"},children:[I.jsxs("div",{children:[I.jsx(Tw,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:c,color:"inherit",children:I.jsx(mB,{})}),I.jsxs(Gm,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!t,onClose:h,children:[I.jsxs(ai,{onClick:p,children:[I.jsx(fB,{})," Home"]}),I.jsxs(ai,{onClick:p,children:[I.jsx(gB,{})," Promotional code"]}),I.jsxs(ai,{onClick:p,children:[I.jsx(yB,{})," News"]}),I.jsxs(ai,{onClick:p,children:[I.jsx(vB,{})," About"]})]}),I.jsx(We,{color:"inherit",style:{width:"0px",textDecoration:"none"},variant:"h6",component:Xa,to:"/",sx:{flexGrow:1},children:"My Shop"})]}),I.jsxs("div",{children:[I.jsxs(Tw,{size:"large",component:Xa,to:"/cart",style:{padding:"0"},color:"inherit",children:[I.jsx(fT,{}),a?I.jsx(We,{style:{backgroundColor:"red",position:"relative",right:"16px",bottom:"6px",fontSize:"8px",border:"1px solid red",borderRadius:"6px",padding:"0 4px 0 4px"},color:"white",component:"span",children:a}):""]}),o?I.jsxs(We,{color:"text.secondary",component:"span",variant:"h6",children:[" ",o]}):"",I.jsx(Tw,{size:"large","aria-label":"account of current user","aria-controls":"user-appbar","aria-haspopup":"true",onClick:d,color:"inherit",children:I.jsx(rve,{})}),i?I.jsxs(Gm,{id:"user-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!n,onClose:f,children:[I.jsxs(ai,{onClick:f,children:[I.jsx(_B,{})," Profile"]}),I.jsxs(ai,{onClick:g,children:[I.jsx(hB,{})," Add product"]}),I.jsxs(ai,{onClick:v,children:[I.jsx(fT,{}),a?I.jsx(We,{style:{position:"relative",right:"16px",bottom:"6px",fontWeight:"bold"},color:"red",component:"span",variant:"body2",children:a}):""," Cart"]}),I.jsxs(ai,{onClick:m,children:[I.jsx(pB,{})," Pay for the order"]}),I.jsxs(ai,{onClick:E,children:[I.jsx(SB,{})," LogOut"]})]}):I.jsxs(Gm,{id:"user-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!n,onClose:f,children:[I.jsxs(ai,{onClick:_,children:[I.jsx(TB,{})," SignUp"]}),I.jsxs(ai,{onClick:y,children:[I.jsx(bB,{})," SignIn"]})]})]})]})}),I.jsx(Lue,{className:Aye.container,children:I.jsxs(h3,{children:[I.jsx(as,{element:I.jsx(rye,{}),path:"/"}),I.jsx(as,{element:I.jsx(qhe,{}),path:"/add"}),I.jsx(as,{element:I.jsx(tve,{}),path:"/cart"}),I.jsx(as,{element:I.jsx(nve,{}),path:"/checkout"}),I.jsx(as,{element:I.jsx(X_e,{}),path:"/payment"}),I.jsx(as,{element:I.jsx(lve,{}),path:"/signUp"}),I.jsx(as,{element:I.jsx(fve,{}),path:"/signIn"}),I.jsx(as,{element:I.jsx(tye,{}),path:"*"})]})})]})};C4(document.getElementById("root")).render(I.jsx(_5,{store:bre,children:I.jsx(y3,{basename:"/eShop/",children:I.jsx(yve,{})})}))});export default vve();
